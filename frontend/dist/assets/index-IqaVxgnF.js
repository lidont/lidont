var af=Object.defineProperty;var cf=(s,t,e)=>t in s?af(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var y=(s,t,e)=>(cf(s,typeof t!="symbol"?t+"":t,e),e),oa=(s,t,e)=>{if(!t.has(s))throw TypeError("Cannot "+e)};var u=(s,t,e)=>(oa(s,t,"read from private field"),e?e.call(s):t.get(s)),w=(s,t,e)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,e)},d=(s,t,e,n)=>(oa(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e);var Br=(s,t,e,n)=>({set _(r){d(s,t,r,e)},get _(){return u(s,t,n)}}),v=(s,t,e)=>(oa(s,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}})();const lf="6.6.0";function uf(s,t,e){const n=t.split("|").map(i=>i.trim());for(let i=0;i<n.length;i++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof s===t)return}const r=new Error(`invalid value for type ${t}`);throw r.code="INVALID_ARGUMENT",r.argument=`value.${e}`,r.value=s,r}async function Et(s){const t=Object.keys(s);return(await Promise.all(t.map(n=>Promise.resolve(s[n])))).reduce((n,r,i)=>(n[t[i]]=r,n),{})}function R(s,t,e){for(let n in t){let r=t[n];const i=e?e[n]:null;i&&uf(r,i,n),Object.defineProperty(s,n,{enumerable:!0,value:r,writable:!1})}}function Is(s){if(s==null)return"null";if(Array.isArray(s))return"[ "+s.map(Is).join(", ")+" ]";if(s instanceof Uint8Array){const t="0123456789abcdef";let e="0x";for(let n=0;n<s.length;n++)e+=t[s[n]>>4],e+=t[s[n]&15];return e}if(typeof s=="object"&&typeof s.toJSON=="function")return Is(s.toJSON());switch(typeof s){case"boolean":case"symbol":return s.toString();case"bigint":return BigInt(s).toString();case"number":return s.toString();case"string":return JSON.stringify(s);case"object":{const t=Object.keys(s);return t.sort(),"{ "+t.map(e=>`${Is(e)}: ${Is(s[e])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Ce(s,t){return s&&s.code===t}function Xa(s){return Ce(s,"CALL_EXCEPTION")}function st(s,t,e){{const r=[];if(e){if("message"in e||"code"in e||"name"in e)throw new Error(`value will overwrite populated values: ${Is(e)}`);for(const i in e){const o=e[i];r.push(i+"="+Is(o))}}r.push(`code=${t}`),r.push(`version=${lf}`),r.length&&(s+=" ("+r.join(", ")+")")}let n;switch(t){case"INVALID_ARGUMENT":n=new TypeError(s);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":n=new RangeError(s);break;default:n=new Error(s)}return R(n,{code:t}),e&&Object.assign(n,e),n}function E(s,t,e,n){if(!s)throw st(t,e,n)}function m(s,t,e,n){E(s,t,"INVALID_ARGUMENT",{argument:e,value:n})}function ql(s,t,e){e==null&&(e=""),e&&(e=": "+e),E(s>=t,"missing arguemnt"+e,"MISSING_ARGUMENT",{count:s,expectedCount:t}),E(s<=t,"too many arguemnts"+e,"UNEXPECTED_ARGUMENT",{count:s,expectedCount:t})}const hf=["NFD","NFC","NFKD","NFKC"].reduce((s,t)=>{try{if("test".normalize(t)!=="test")throw new Error("bad");if(t==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");s.push(t)}catch{}return s},[]);function ff(s){E(hf.indexOf(s)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:s}})}function Bi(s,t,e){if(e==null&&(e=""),s!==t){let n=e,r="new";e&&(n+=".",r+=" "+e),E(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:r})}}function Zl(s,t,e){if(s instanceof Uint8Array)return e?new Uint8Array(s):s;if(typeof s=="string"&&s.match(/^0x([0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((s.length-2)/2);let r=2;for(let i=0;i<n.length;i++)n[i]=parseInt(s.substring(r,r+2),16),r+=2;return n}m(!1,"invalid BytesLike value",t||"value",s)}function L(s,t){return Zl(s,t,!1)}function Pt(s,t){return Zl(s,t,!0)}function tt(s,t){return!(typeof s!="string"||!s.match(/^0x[0-9A-Fa-f]*$/)||typeof t=="number"&&s.length!==2+2*t||t===!0&&s.length%2!==0)}function df(s){return tt(s,!0)||s instanceof Uint8Array}const kc="0123456789abcdef";function T(s){const t=L(s);let e="0x";for(let n=0;n<t.length;n++){const r=t[n];e+=kc[(r&240)>>4]+kc[r&15]}return e}function rt(s){return"0x"+s.map(t=>T(t).substring(2)).join("")}function Ss(s){return tt(s,!0)?(s.length-2)/2:L(s).length}function et(s,t,e){const n=L(s);return e!=null&&e>n.length&&E(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:e}),T(n.slice(t??0,e??n.length))}function pf(s,t,e){const n=L(s);E(t>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:t,offset:t+1});const r=new Uint8Array(t);return r.fill(0),e?r.set(n,t-n.length):r.set(n,0),T(r)}function ds(s,t){return pf(s,t,!0)}const Qo=BigInt(0),oe=BigInt(1),Ns=9007199254740991;function go(s,t){const e=Wo(s,"value"),n=BigInt(D(t,"width"));if(E(e>>n===Qo,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:s}),e>>n-oe){const r=(oe<<n)-oe;return-((~e&r)+oe)}return e}function Xl(s,t){let e=P(s,"value");const n=BigInt(D(t,"width")),r=oe<<n-oe;if(e<Qo){e=-e,E(e<=r,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:s});const i=(oe<<n)-oe;return(~e&i)+oe}else E(e<r,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:s});return e}function Gn(s,t){const e=Wo(s,"value"),n=BigInt(D(t,"bits"));return e&(oe<<n)-oe}function P(s,t){switch(typeof s){case"bigint":return s;case"number":return m(Number.isInteger(s),"underflow",t||"value",s),m(s>=-Ns&&s<=Ns,"overflow",t||"value",s),BigInt(s);case"string":try{if(s==="")throw new Error("empty string");return s[0]==="-"&&s[1]!=="-"?-BigInt(s.substring(1)):BigInt(s)}catch(e){m(!1,`invalid BigNumberish string: ${e.message}`,t||"value",s)}}m(!1,"invalid BigNumberish value",t||"value",s)}function Wo(s,t){const e=P(s,t);return E(e>=Qo,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:s}),e}const Tc="0123456789abcdef";function jo(s){if(s instanceof Uint8Array){let t="0x0";for(const e of s)t+=Tc[e>>4],t+=Tc[e&15];return BigInt(t)}return P(s)}function D(s,t){switch(typeof s){case"bigint":return m(s>=-Ns&&s<=Ns,"overflow",t||"value",s),Number(s);case"number":return m(Number.isInteger(s),"underflow",t||"value",s),m(s>=-Ns&&s<=Ns,"overflow",t||"value",s),s;case"string":try{if(s==="")throw new Error("empty string");return D(BigInt(s),t)}catch(e){m(!1,`invalid numeric string: ${e.message}`,t||"value",s)}}m(!1,"invalid numeric value",t||"value",s)}function gf(s){return D(jo(s))}function Nn(s,t){let n=Wo(s,"value").toString(16);if(t==null)n.length%2&&(n="0"+n);else{const r=D(t,"width");for(E(r*2>=n.length,`value exceeds width (${r} bits)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:s});n.length<r*2;)n="0"+n}return"0x"+n}function Ut(s){const t=Wo(s,"value");if(t===Qo)return new Uint8Array([]);let e=t.toString(16);e.length%2&&(e="0"+e);const n=new Uint8Array(e.length/2);for(let r=0;r<n.length;r++){const i=r*2;n[r]=parseInt(e.substring(i,i+2),16)}return n}function ks(s){let t=T(df(s)?s:Ut(s)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return t===""&&(t="0"),"0x"+t}const mf="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const Pc=BigInt(58);function wf(s){let t=jo(L(s)),e="";for(;t;)e=mf[Number(t%Pc)]+e,t/=Pc;return e}function yf(s){s=atob(s);const t=new Uint8Array(s.length);for(let e=0;e<s.length;e++)t[e]=s.charCodeAt(e);return L(t)}function Af(s){const t=L(s);let e="";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}var Ms;class $l{constructor(t,e,n){y(this,"filter");y(this,"emitter");w(this,Ms,void 0);d(this,Ms,e),R(this,{emitter:t,filter:n})}async removeListener(){u(this,Ms)!=null&&await this.emitter.off(this.filter,u(this,Ms))}}Ms=new WeakMap;function bf(s,t,e,n,r){m(!1,`invalid codepoint at offset ${t}; ${s}`,"bytes",e)}function tu(s,t,e,n,r){if(s==="BAD_PREFIX"||s==="UNEXPECTED_CONTINUE"){let i=0;for(let o=t+1;o<e.length&&e[o]>>6===2;o++)i++;return i}return s==="OVERRUN"?e.length-t-1:0}function Ef(s,t,e,n,r){return s==="OVERLONG"?(m(typeof r=="number","invalid bad code point for replacement","badCodepoint",r),n.push(r),0):(n.push(65533),tu(s,t,e))}const xf=Object.freeze({error:bf,ignore:tu,replace:Ef});function vf(s,t){t==null&&(t=xf.error);const e=L(s,"bytes"),n=[];let r=0;for(;r<e.length;){const i=e[r++];if(!(i>>7)){n.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?r+=t("UNEXPECTED_CONTINUE",r-1,e,n):r+=t("BAD_PREFIX",r-1,e,n);continue}if(r-1+o>=e.length){r+=t("OVERRUN",r-1,e,n);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let h=e[r];if((h&192)!=128){r+=t("MISSING_CONTINUE",r,e,n),c=null;break}c=c<<6|h&63,r++}if(c!==null){if(c>1114111){r+=t("OUT_OF_RANGE",r-1-o,e,n,c);continue}if(c>=55296&&c<=57343){r+=t("UTF16_SURROGATE",r-1-o,e,n,c);continue}if(c<=a){r+=t("OVERLONG",r-1-o,e,n,c);continue}n.push(c)}}return n}function Ke(s,t){t!=null&&(ff(t),s=s.normalize(t));let e=[];for(let n=0;n<s.length;n++){const r=s.charCodeAt(n);if(r<128)e.push(r);else if(r<2048)e.push(r>>6|192),e.push(r&63|128);else if((r&64512)==55296){n++;const i=s.charCodeAt(n);m(n<s.length&&(i&64512)===56320,"invalid surrogate pair","str",s);const o=65536+((r&1023)<<10)+(i&1023);e.push(o>>18|240),e.push(o>>12&63|128),e.push(o>>6&63|128),e.push(o&63|128)}else e.push(r>>12|224),e.push(r>>6&63|128),e.push(r&63|128)}return new Uint8Array(e)}function Cf(s){return s.map(t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))).join("")}function $a(s,t){return Cf(vf(s,t))}async function If(s,t){const e=s.url.split(":")[0].toLowerCase();E(e==="http"||e==="https",`unsupported protocol ${e}`,"UNSUPPORTED_OPERATION",{info:{protocol:e},operation:"request"}),E(e==="https"||!s.credentials||s.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let n;if(t){const l=new AbortController;n=l.signal,t.addListener(()=>{l.abort()})}const r={method:s.method,headers:new Headers(Array.from(s)),body:s.body||void 0,signal:n},i=await fetch(s.url,r),o={};i.headers.forEach((l,h)=>{o[h.toLowerCase()]=l});const a=await i.arrayBuffer(),c=a==null?null:new Uint8Array(a);return{statusCode:i.status,statusMessage:i.statusText,headers:o,body:c}}const Nf=12,kf=250;let Oc=If;const Tf=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Pf=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let aa=!1;async function eu(s,t){try{const e=s.match(Tf);if(!e)throw new Error("invalid data");return new Cn(200,"OK",{"content-type":e[1]||"text/plain"},e[2]?yf(e[3]):Rf(e[3]))}catch{return new Cn(599,"BAD REQUEST (invalid data: URI)",{},null,new _e(s))}}function nu(s){async function t(e,n){try{const r=e.match(Pf);if(!r)throw new Error("invalid link");return new _e(`${s}${r[2]}`)}catch{return new Cn(599,"BAD REQUEST (invalid IPFS URI)",{},null,new _e(e))}}return t}const Hi={data:eu,ipfs:nu("https://gateway.ipfs.io/ipfs/")},su=new WeakMap;var zn,rn;class Of{constructor(t){w(this,zn,void 0);w(this,rn,void 0);d(this,zn,[]),d(this,rn,!1),su.set(t,()=>{if(!u(this,rn)){d(this,rn,!0);for(const e of u(this,zn))setTimeout(()=>{e()},0);d(this,zn,[])}})}addListener(t){E(!u(this,rn),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),u(this,zn).push(t)}get cancelled(){return u(this,rn)}checkSignal(){E(!this.cancelled,"cancelled","CANCELLED",{})}}zn=new WeakMap,rn=new WeakMap;function Gi(s){if(s==null)throw new Error("missing signal; should not happen");return s.checkSignal(),s}var Hs,Gs,$t,Oe,Vs,zs,ot,St,Re,Qn,Wn,jn,de,Se,Kn,Mr;const Lo=class Lo{constructor(t){w(this,Kn);w(this,Hs,void 0);w(this,Gs,void 0);w(this,$t,void 0);w(this,Oe,void 0);w(this,Vs,void 0);w(this,zs,void 0);w(this,ot,void 0);w(this,St,void 0);w(this,Re,void 0);w(this,Qn,void 0);w(this,Wn,void 0);w(this,jn,void 0);w(this,de,void 0);w(this,Se,void 0);d(this,zs,String(t)),d(this,Hs,!1),d(this,Gs,!0),d(this,$t,{}),d(this,Oe,""),d(this,Vs,3e5),d(this,Se,{slotInterval:kf,maxAttempts:Nf})}get url(){return u(this,zs)}set url(t){d(this,zs,String(t))}get body(){return u(this,ot)==null?null:new Uint8Array(u(this,ot))}set body(t){if(t==null)d(this,ot,void 0),d(this,St,void 0);else if(typeof t=="string")d(this,ot,Ke(t)),d(this,St,"text/plain");else if(t instanceof Uint8Array)d(this,ot,t),d(this,St,"application/octet-stream");else if(typeof t=="object")d(this,ot,Ke(JSON.stringify(t))),d(this,St,"application/json");else throw new Error("invalid body")}hasBody(){return u(this,ot)!=null}get method(){return u(this,Oe)?u(this,Oe):this.hasBody()?"POST":"GET"}set method(t){t==null&&(t=""),d(this,Oe,String(t).toUpperCase())}get headers(){const t=Object.assign({},u(this,$t));return u(this,Re)&&(t.authorization=`Basic ${Af(Ke(u(this,Re)))}`),this.allowGzip&&(t["accept-encoding"]="gzip"),t["content-type"]==null&&u(this,St)&&(t["content-type"]=u(this,St)),this.body&&(t["content-length"]=String(this.body.length)),t}getHeader(t){return this.headers[t.toLowerCase()]}setHeader(t,e){u(this,$t)[String(t).toLowerCase()]=String(e)}clearHeaders(){d(this,$t,{})}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let n=0;return{next:()=>{if(n<e.length){const r=e[n++];return{value:[r,t[r]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return u(this,Re)||null}setCredentials(t,e){m(!t.match(/:/),"invalid basic authentication username","username","[REDACTED]"),d(this,Re,`${t}:${e}`)}get allowGzip(){return u(this,Gs)}set allowGzip(t){d(this,Gs,!!t)}get allowInsecureAuthentication(){return!!u(this,Hs)}set allowInsecureAuthentication(t){d(this,Hs,!!t)}get timeout(){return u(this,Vs)}set timeout(t){m(t>=0,"timeout must be non-zero","timeout",t),d(this,Vs,t)}get preflightFunc(){return u(this,Qn)||null}set preflightFunc(t){d(this,Qn,t)}get processFunc(){return u(this,Wn)||null}set processFunc(t){d(this,Wn,t)}get retryFunc(){return u(this,jn)||null}set retryFunc(t){d(this,jn,t)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${u(this,ot)?T(u(this,ot)):"null"}>`}setThrottleParams(t){t.slotInterval!=null&&(u(this,Se).slotInterval=t.slotInterval),t.maxAttempts!=null&&(u(this,Se).maxAttempts=t.maxAttempts)}send(){return E(u(this,de)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),d(this,de,new Of(this)),v(this,Kn,Mr).call(this,0,Rc()+this.timeout,0,this,new Cn(0,"",{},null,this))}cancel(){E(u(this,de)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const t=su.get(this);if(!t)throw new Error("missing signal; should not happen");t()}redirect(t){const e=this.url.split(":")[0].toLowerCase(),n=t.split(":")[0].toLowerCase();E(this.method==="GET"&&(e!=="https"||n!=="http")&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(t)})`});const r=new Lo(t);return r.method="GET",r.allowGzip=this.allowGzip,r.timeout=this.timeout,d(r,$t,Object.assign({},u(this,$t))),u(this,ot)&&d(r,ot,new Uint8Array(u(this,ot))),d(r,St,u(this,St)),r}clone(){const t=new Lo(this.url);return d(t,Oe,u(this,Oe)),u(this,ot)&&d(t,ot,u(this,ot)),d(t,St,u(this,St)),d(t,$t,Object.assign({},u(this,$t))),d(t,Re,u(this,Re)),this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),d(t,Qn,u(this,Qn)),d(t,Wn,u(this,Wn)),d(t,jn,u(this,jn)),t}static lockConfig(){aa=!0}static getGateway(t){return Hi[t.toLowerCase()]||null}static registerGateway(t,e){if(t=t.toLowerCase(),t==="http"||t==="https")throw new Error(`cannot intercept ${t}; use registerGetUrl`);if(aa)throw new Error("gateways locked");Hi[t]=e}static registerGetUrl(t){if(aa)throw new Error("gateways locked");Oc=t}static createDataGateway(){return eu}static createIpfsGatewayFunc(t){return nu(t)}};Hs=new WeakMap,Gs=new WeakMap,$t=new WeakMap,Oe=new WeakMap,Vs=new WeakMap,zs=new WeakMap,ot=new WeakMap,St=new WeakMap,Re=new WeakMap,Qn=new WeakMap,Wn=new WeakMap,jn=new WeakMap,de=new WeakMap,Se=new WeakMap,Kn=new WeakSet,Mr=async function(t,e,n,r,i){var h,f,p;if(t>=u(this,Se).maxAttempts)return i.makeServerError("exceeded maximum retry limit");E(Rc()<=e,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:r}),n>0&&await Sf(n);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in Hi){const g=await Hi[a](o.url,Gi(u(r,de)));if(g instanceof Cn){let b=g;if(this.processFunc){Gi(u(r,de));try{b=await this.processFunc(o,b)}catch(A){(A.throttle==null||typeof A.stall!="number")&&b.makeServerError("error in post-processing function",A).assertOk()}}return b}o=g}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await Oc(o,Gi(u(r,de)));let l=new Cn(c.statusCode,c.statusMessage,c.headers,c.body,r);if(l.statusCode===301||l.statusCode===302){try{const g=l.headers.location||"";return v(h=o.redirect(g),Kn,Mr).call(h,t+1,e,0,r,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,t))){const g=l.headers["retry-after"];let b=u(this,Se).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return typeof g=="string"&&g.match(/^[1-9][0-9]*$/)&&(b=parseInt(g)),v(f=o.clone(),Kn,Mr).call(f,t+1,e,b,r,l)}if(this.processFunc){Gi(u(r,de));try{l=await this.processFunc(o,l)}catch(g){(g.throttle==null||typeof g.stall!="number")&&l.makeServerError("error in post-processing function",g).assertOk();let b=u(this,Se).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return g.stall>=0&&(b=g.stall),v(p=o.clone(),Kn,Mr).call(p,t+1,e,b,r,l)}}return l};let _e=Lo;var ui,hi,fi,te,Qs,Jn;const vc=class vc{constructor(t,e,n,r,i){w(this,ui,void 0);w(this,hi,void 0);w(this,fi,void 0);w(this,te,void 0);w(this,Qs,void 0);w(this,Jn,void 0);d(this,ui,t),d(this,hi,e),d(this,fi,Object.keys(n).reduce((o,a)=>(o[a.toLowerCase()]=String(n[a]),o),{})),d(this,te,r==null?null:new Uint8Array(r)),d(this,Qs,i||null),d(this,Jn,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${u(this,te)?T(u(this,te)):"null"}>`}get statusCode(){return u(this,ui)}get statusMessage(){return u(this,hi)}get headers(){return Object.assign({},u(this,fi))}get body(){return u(this,te)==null?null:new Uint8Array(u(this,te))}get bodyText(){try{return u(this,te)==null?"":$a(u(this,te))}catch{E(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{E(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let n=0;return{next:()=>{if(n<e.length){const r=e[n++];return{value:[r,t[r]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(t,e){let n;t?n=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${t})`:(t=`${this.statusCode} ${this.statusMessage}`,n=`CLIENT ESCALATED SERVER ERROR (${t})`);const r=new vc(599,n,this.headers,this.body,u(this,Qs)||void 0);return d(r,Jn,{message:t,error:e}),r}throwThrottleError(t,e){e==null?e=-1:m(Number.isInteger(e)&&e>=0,"invalid stall timeout","stall",e);const n=new Error(t||"throttling requests");throw R(n,{stall:e,throttle:!0}),n}getHeader(t){return this.headers[t.toLowerCase()]}hasBody(){return u(this,te)!=null}get request(){return u(this,Qs)}ok(){return u(this,Jn).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:t,error:e}=u(this,Jn);t===""&&(t=`server response ${this.statusCode} ${this.statusMessage}`),E(!1,t,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:e})}};ui=new WeakMap,hi=new WeakMap,fi=new WeakMap,te=new WeakMap,Qs=new WeakMap,Jn=new WeakMap;let Cn=vc;function Rc(){return new Date().getTime()}function Rf(s){return Ke(s.replace(/%([0-9a-f][0-9a-f])/gi,(t,e)=>String.fromCharCode(parseInt(e,16))))}function Sf(s){return new Promise(t=>setTimeout(t,s))}const Bf=BigInt(-1),Zt=BigInt(0),Ts=BigInt(1),Lf=BigInt(5),As={};let Bs="0000";for(;Bs.length<80;)Bs+=Bs;function Fn(s){let t=Bs;for(;t.length<s;)t+=t;return BigInt("1"+t.substring(0,s))}function Lr(s,t,e){const n=BigInt(t.width);if(t.signed){const r=Ts<<n-Ts;E(e==null||s>=-r&&s<r,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:s}),s>Zt?s=go(Gn(s,n),n):s=-go(Gn(-s,n),n)}else{const r=Ts<<n;E(e==null||s>=0&&s<r,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:s}),s=(s%r+r)%r&r-Ts}return s}function ca(s){typeof s=="number"&&(s=`fixed128x${s}`);let t=!0,e=128,n=18;if(typeof s=="string"){if(s!=="fixed")if(s==="ufixed")t=!1;else{const i=s.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);m(i,"invalid fixed format","format",s),t=i[1]!=="u",e=parseInt(i[2]),n=parseInt(i[3])}}else if(s){const i=s,o=(a,c,l)=>i[a]==null?l:(m(typeof i[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,i[a]),i[a]);t=o("signed","boolean",t),e=o("width","number",e),n=o("decimals","number",n)}m(e%8===0,"invalid FixedNumber width (not byte aligned)","format.width",e),m(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);const r=(t?"":"u")+"fixed"+String(e)+"x"+String(n);return{signed:t,width:e,decimals:n,name:r}}function Uf(s,t){let e="";s<Zt&&(e="-",s*=Bf);let n=s.toString();if(t===0)return e+n;for(;n.length<=t;)n=Bs+n;const r=n.length-t;for(n=n.substring(0,r)+"."+n.substring(r);n[0]==="0"&&n[1]!==".";)n=n.substring(1);for(;n[n.length-1]==="0"&&n[n.length-2]!==".";)n=n.substring(0,n.length-1);return e+n}var ee,W,bt,Be,Mn,ne,Ne,di,Ea,pi,xa,gi,va,mi,Ca;const en=class en{constructor(t,e,n){w(this,Be);w(this,ne);w(this,di);w(this,pi);w(this,gi);w(this,mi);y(this,"format");w(this,ee,void 0);w(this,W,void 0);w(this,bt,void 0);y(this,"_value");Bi(t,As,"FixedNumber"),d(this,W,e),d(this,ee,n);const r=Uf(e,n.decimals);R(this,{format:n.name,_value:r}),d(this,bt,Fn(n.decimals))}get signed(){return u(this,ee).signed}get width(){return u(this,ee).width}get decimals(){return u(this,ee).decimals}get value(){return u(this,W)}addUnsafe(t){return v(this,di,Ea).call(this,t)}add(t){return v(this,di,Ea).call(this,t,"add")}subUnsafe(t){return v(this,pi,xa).call(this,t)}sub(t){return v(this,pi,xa).call(this,t,"sub")}mulUnsafe(t){return v(this,gi,va).call(this,t)}mul(t){return v(this,gi,va).call(this,t,"mul")}mulSignal(t){v(this,Be,Mn).call(this,t);const e=u(this,W)*u(t,W);return E(e%u(this,bt)===Zt,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),v(this,ne,Ne).call(this,e/u(this,bt),"mulSignal")}divUnsafe(t){return v(this,mi,Ca).call(this,t)}div(t){return v(this,mi,Ca).call(this,t,"div")}divSignal(t){E(u(t,W)!==Zt,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),v(this,Be,Mn).call(this,t);const e=u(this,W)*u(this,bt);return E(e%u(t,W)===Zt,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),v(this,ne,Ne).call(this,e/u(t,W),"divSignal")}cmp(t){let e=this.value,n=t.value;const r=this.decimals-t.decimals;return r>0?n*=Fn(r):r<0&&(e*=Fn(-r)),e<n?-1:e>n?1:0}eq(t){return this.cmp(t)===0}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=u(this,W);return u(this,W)<Zt&&(t-=u(this,bt)-Ts),t=u(this,W)/u(this,bt)*u(this,bt),v(this,ne,Ne).call(this,t,"floor")}ceiling(){let t=u(this,W);return u(this,W)>Zt&&(t+=u(this,bt)-Ts),t=u(this,W)/u(this,bt)*u(this,bt),v(this,ne,Ne).call(this,t,"ceiling")}round(t){if(t==null&&(t=0),t>=this.decimals)return this;const e=this.decimals-t,n=Lf*Fn(e-1);let r=this.value+n;const i=Fn(e);return r=r/i*i,Lr(r,u(this,ee),"round"),new en(As,r,u(this,ee))}isZero(){return u(this,W)===Zt}isNegative(){return u(this,W)<Zt}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return en.fromString(this.toString(),t)}static fromValue(t,e,n){const r=e==null?0:D(e),i=ca(n);let o=P(t,"value");const a=r-i.decimals;if(a>0){const c=Fn(a);E(o%c===Zt,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),o/=c}else a<0&&(o*=Fn(-a));return Lr(o,i,"fromValue"),new en(As,o,i)}static fromString(t,e){const n=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);m(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",t);const r=ca(e);let i=n[2]||"0",o=n[3]||"";for(;o.length<r.decimals;)o+=Bs;E(o.substring(r.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),o=o.substring(0,r.decimals);const a=BigInt(n[1]+i+o);return Lr(a,r,"fromString"),new en(As,a,r)}static fromBytes(t,e){let n=jo(L(t,"value"));const r=ca(e);return r.signed&&(n=go(n,r.width)),Lr(n,r,"fromBytes"),new en(As,n,r)}};ee=new WeakMap,W=new WeakMap,bt=new WeakMap,Be=new WeakSet,Mn=function(t){m(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)},ne=new WeakSet,Ne=function(t,e){return t=Lr(t,u(this,ee),e),new en(As,t,u(this,ee))},di=new WeakSet,Ea=function(t,e){return v(this,Be,Mn).call(this,t),v(this,ne,Ne).call(this,u(this,W)+u(t,W),e)},pi=new WeakSet,xa=function(t,e){return v(this,Be,Mn).call(this,t),v(this,ne,Ne).call(this,u(this,W)-u(t,W),e)},gi=new WeakSet,va=function(t,e){return v(this,Be,Mn).call(this,t),v(this,ne,Ne).call(this,u(this,W)*u(t,W)/u(this,bt),e)},mi=new WeakSet,Ca=function(t,e){return E(u(t,W)!==Zt,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),v(this,Be,Mn).call(this,t),v(this,ne,Ne).call(this,u(this,W)*u(this,bt)/u(t,W),e)};let mo=en;function Df(s){let t=s.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function Sc(s,t,e){let n=0;for(let r=0;r<e;r++)n=n*256+s[t+r];return n}function Bc(s,t,e,n){const r=[];for(;e<t+1+n;){const i=ru(s,e);r.push(i.result),e+=i.consumed,E(e<=t+1+n,"child data too short","BUFFER_OVERRUN",{buffer:s,length:n,offset:t})}return{consumed:1+n,result:r}}function ru(s,t){E(s.length!==0,"data too short","BUFFER_OVERRUN",{buffer:s,length:0,offset:1});const e=n=>{E(n<=s.length,"data short segment too short","BUFFER_OVERRUN",{buffer:s,length:s.length,offset:n})};if(s[t]>=248){const n=s[t]-247;e(t+1+n);const r=Sc(s,t+1,n);return e(t+1+n+r),Bc(s,t,t+1+n,n+r)}else if(s[t]>=192){const n=s[t]-192;return e(t+1+n),Bc(s,t,t+1,n)}else if(s[t]>=184){const n=s[t]-183;e(t+1+n);const r=Sc(s,t+1,n);e(t+1+n+r);const i=T(s.slice(t+1+n,t+1+n+r));return{consumed:1+n+r,result:i}}else if(s[t]>=128){const n=s[t]-128;e(t+1+n);const r=T(s.slice(t+1,t+1+n));return{consumed:1+n,result:r}}return{consumed:1,result:Df(s[t])}}function tc(s){const t=L(s,"data"),e=ru(t,0);return m(e.consumed===t.length,"unexpected junk after rlp payload","data",s),e.result}function Lc(s){const t=[];for(;s;)t.unshift(s&255),s>>=8;return t}function iu(s){if(Array.isArray(s)){let n=[];if(s.forEach(function(i){n=n.concat(iu(i))}),n.length<=55)return n.unshift(192+n.length),n;const r=Lc(n.length);return r.unshift(247+r.length),r.concat(n)}const t=Array.prototype.slice.call(L(s,"object"));if(t.length===1&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const e=Lc(t.length);return e.unshift(183+e.length),e.concat(t)}const Uc="0123456789abcdef";function qr(s){let t="0x";for(const e of iu(s))t+=Uc[e>>4],t+=Uc[e&15];return t}const ou=["wei","kwei","mwei","gwei","szabo","finney","ether"];function ec(s,t){let e=18;if(typeof t=="string"){const n=ou.indexOf(t);m(n>=0,"invalid unit","unit",t),e=3*n}else t!=null&&(e=D(t,"unit"));return mo.fromValue(s,e,{decimals:e}).toString()}function Ff(s,t){m(typeof s=="string","value must be a string","value",s);let e=18;if(typeof t=="string"){const n=ou.indexOf(t);m(n>=0,"invalid unit","unit",t),e=3*n}else t!=null&&(e=D(t,"unit"));return mo.fromString(s,{decimals:e}).value}function be(s){return ec(s,18)}const vt=32,Ia=new Uint8Array(vt),Mf=["then"],Vi={};function Ur(s,t){const e=new Error(`deferred error during ABI decoding triggered accessing ${s}`);throw e.error=t,e}var on;const _r=class _r extends Array{constructor(...e){const n=e[0];let r=e[1],i=(e[2]||[]).slice(),o=!0;n!==Vi&&(r=e,i=[],o=!1);super(r.length);w(this,on,void 0);r.forEach((c,l)=>{this[l]=c});const a=i.reduce((c,l)=>(typeof l=="string"&&c.set(l,(c.get(l)||0)+1),c),new Map);if(d(this,on,Object.freeze(r.map((c,l)=>{const h=i[l];return h!=null&&a.get(h)===1?h:null}))),!!o)return Object.freeze(this),new Proxy(this,{get:(c,l,h)=>{if(typeof l=="string"){if(l.match(/^[0-9]+$/)){const p=D(l,"%index");if(p<0||p>=this.length)throw new RangeError("out of result range");const g=c[p];return g instanceof Error&&Ur(`index ${p}`,g),g}if(Mf.indexOf(l)>=0)return Reflect.get(c,l,h);const f=c[l];if(f instanceof Function)return function(...p){return f.apply(this===h?c:this,p)};if(!(l in c))return c.getValue.apply(this===h?c:this,[l])}return Reflect.get(c,l,h)}})}toArray(){const e=[];return this.forEach((n,r)=>{n instanceof Error&&Ur(`index ${r}`,n),e.push(n)}),e}toObject(){return u(this,on).reduce((e,n,r)=>(E(n!=null,"value at index ${ index } unnamed","UNSUPPORTED_OPERATION",{operation:"toObject()"}),n in e||(e[n]=this.getValue(n)),e),{})}slice(e,n){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),n==null&&(n=this.length),n<0&&(n+=this.length,n<0&&(n=0)),n>this.length&&(n=this.length);const r=[],i=[];for(let o=e;o<n;o++)r.push(this[o]),i.push(u(this,on)[o]);return new _r(Vi,r,i)}filter(e,n){const r=[],i=[];for(let o=0;o<this.length;o++){const a=this[o];a instanceof Error&&Ur(`index ${o}`,a),e.call(n,a,o,this)&&(r.push(a),i.push(u(this,on)[o]))}return new _r(Vi,r,i)}map(e,n){const r=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&Ur(`index ${i}`,o),r.push(e.call(n,o,i,this))}return r}getValue(e){const n=u(this,on).indexOf(e);if(n===-1)return;const r=this[n];return r instanceof Error&&Ur(`property ${JSON.stringify(e)}`,r.error),r}static fromItems(e,n){return new _r(Vi,e,n)}};on=new WeakMap;let wo=_r;function Dc(s){let t=Ut(s);return E(t.length<=vt,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:vt,offset:t.length}),t.length!==vt&&(t=Pt(rt([Ia.slice(t.length%vt),t]))),t}class qe{constructor(t,e,n,r){y(this,"name");y(this,"type");y(this,"localName");y(this,"dynamic");R(this,{name:t,type:e,localName:n,dynamic:r},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,e){m(!1,t,this.localName,e)}}var Le,_n,Ws,no;class Na{constructor(){w(this,Ws);w(this,Le,void 0);w(this,_n,void 0);d(this,Le,[]),d(this,_n,0)}get data(){return rt(u(this,Le))}get length(){return u(this,_n)}appendWriter(t){return v(this,Ws,no).call(this,Pt(t.data))}writeBytes(t){let e=Pt(t);const n=e.length%vt;return n&&(e=Pt(rt([e,Ia.slice(n)]))),v(this,Ws,no).call(this,e)}writeValue(t){return v(this,Ws,no).call(this,Dc(t))}writeUpdatableValue(){const t=u(this,Le).length;return u(this,Le).push(Ia),d(this,_n,u(this,_n)+vt),e=>{u(this,Le)[t]=Dc(e)}}}Le=new WeakMap,_n=new WeakMap,Ws=new WeakSet,no=function(t){return u(this,Le).push(t),d(this,_n,u(this,_n)+t.length),t.length};var Bt,Wt,Uo,au;const Cc=class Cc{constructor(t,e){w(this,Uo);y(this,"allowLoose");w(this,Bt,void 0);w(this,Wt,void 0);R(this,{allowLoose:!!e}),d(this,Bt,Pt(t)),d(this,Wt,0)}get data(){return T(u(this,Bt))}get dataLength(){return u(this,Bt).length}get consumed(){return u(this,Wt)}get bytes(){return new Uint8Array(u(this,Bt))}subReader(t){return new Cc(u(this,Bt).slice(u(this,Wt)+t),this.allowLoose)}readBytes(t,e){let n=v(this,Uo,au).call(this,0,t,!!e);return d(this,Wt,u(this,Wt)+n.length),n.slice(0,t)}readValue(){return jo(this.readBytes(vt))}readIndex(){return gf(this.readBytes(vt))}};Bt=new WeakMap,Wt=new WeakMap,Uo=new WeakSet,au=function(t,e,n){let r=Math.ceil(e/vt)*vt;return u(this,Wt)+r>u(this,Bt).length&&(this.allowLoose&&n&&u(this,Wt)+e<=u(this,Bt).length?r=e:E(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Pt(u(this,Bt)),length:u(this,Bt).length,offset:u(this,Wt)+r})),u(this,Bt).slice(u(this,Wt),u(this,Wt)+r)};let ka=Cc;function Ta(s){if(!Number.isSafeInteger(s)||s<0)throw new Error(`Wrong positive integer: ${s}`)}function Hf(s){if(typeof s!="boolean")throw new Error(`Expected boolean, not ${s}`)}function cu(s,...t){if(!(s instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(s.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${s.length}`)}function Gf(s){if(typeof s!="function"||typeof s.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ta(s.outputLen),Ta(s.blockLen)}function Vf(s,t=!0){if(s.destroyed)throw new Error("Hash instance has been destroyed");if(t&&s.finished)throw new Error("Hash#digest() has already been called")}function zf(s,t){cu(s);const e=t.outputLen;if(s.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const Z={number:Ta,bool:Hf,bytes:cu,hash:Gf,exists:Vf,output:zf};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const so=s=>new Uint32Array(s.buffer,s.byteOffset,Math.floor(s.byteLength/4)),ro=s=>new DataView(s.buffer,s.byteOffset,s.byteLength),fe=(s,t)=>s<<32-t|s>>>t,Qf=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Qf)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(s,t)=>t.toString(16).padStart(2,"0"));const Wf=async()=>{};async function Fc(s,t,e){let n=Date.now();for(let r=0;r<s;r++){e(r);const i=Date.now()-n;i>=0&&i<t||(await Wf(),n+=i)}}function jf(s){if(typeof s!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof s}`);return new TextEncoder().encode(s)}function ps(s){if(typeof s=="string"&&(s=jf(s)),!(s instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof s})`);return s}class yo{clone(){return this._cloneInto()}}const Kf=s=>Object.prototype.toString.call(s)==="[object Object]"&&s.constructor===Object;function lu(s,t){if(t!==void 0&&(typeof t!="object"||!Kf(t)))throw new TypeError("Options should be object or undefined");return Object.assign(s,t)}function Rr(s){const t=n=>s().update(ps(n)).digest(),e=s();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>s(),t}function Jf(s){const t=(n,r)=>s(r).update(ps(n)).digest(),e=s({});return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=n=>s(n),t}class uu extends yo{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Z.hash(t);const n=ps(e);if(this.iHash=t.create(),!(this.iHash instanceof yo))throw new TypeError("Expected instance of class which extends utils.Hash");const r=this.blockLen=this.iHash.blockLen;this.outputLen=this.iHash.outputLen;const i=new Uint8Array(r);i.set(n.length>this.iHash.blockLen?t.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return Z.exists(this),this.iHash.update(t),this}digestInto(t){Z.exists(this),Z.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:a}=this;return t=t,t.finished=r,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const nc=(s,t,e)=>new uu(s,t).update(e).digest();nc.create=(s,t)=>new uu(s,t);function _f(s,t,e,n){Z.hash(s);const r=lu({dkLen:32,asyncTick:10},n),{c:i,dkLen:o,asyncTick:a}=r;if(Z.number(i),Z.number(o),Z.number(a),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=ps(t),l=ps(e),h=new Uint8Array(o),f=nc.create(s,c),p=f._cloneInto().update(l);return{c:i,dkLen:o,asyncTick:a,DK:h,PRF:f,PRFSalt:p}}function Yf(s,t,e,n,r){return s.destroy(),t.destroy(),n&&n.destroy(),r.fill(0),e}function sc(s,t,e,n){const{c:r,dkLen:i,DK:o,PRF:a,PRFSalt:c}=_f(s,t,e,n);let l;const h=new Uint8Array(4),f=ro(h),p=new Uint8Array(a.outputLen);for(let g=1,b=0;b<i;g++,b+=a.outputLen){const A=o.subarray(b,b+a.outputLen);f.setInt32(0,g,!1),(l=c._cloneInto(l)).update(h).digestInto(p),A.set(p.subarray(0,A.length));for(let x=1;x<r;x++){a._cloneInto(l).update(p).digestInto(p);for(let I=0;I<A.length;I++)A[I]^=p[I]}}return Yf(a,c,o,l,p)}function qf(s,t,e,n){if(typeof s.setBigUint64=="function")return s.setBigUint64(t,e,n);const r=BigInt(32),i=BigInt(4294967295),o=Number(e>>r&i),a=Number(e&i),c=n?4:0,l=n?0:4;s.setUint32(t+c,o,n),s.setUint32(t+l,a,n)}class rc extends yo{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ro(this.buffer)}update(t){Z.exists(this);const{view:e,buffer:n,blockLen:r}=this;t=ps(t);const i=t.length;for(let o=0;o<i;){const a=Math.min(r-this.pos,i-o);if(a===r){const c=ro(t);for(;r<=i-o;o+=r)this.process(c,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===r&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Z.exists(this),Z.output(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(let c=o;c<r;c++)e[c]=0;qf(n,r-8,BigInt(this.length*8),i),this.process(n,0);const a=ro(t);this.get().forEach((c,l)=>a.setUint32(4*l,c,i))}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:o,pos:a}=this;return t.length=r,t.pos=a,t.finished=i,t.destroyed=o,r%e&&t.buffer.set(n),t}}const Zf=(s,t,e)=>s&t^~s&e,Xf=(s,t,e)=>s&t^s&e^t&e,$f=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ze=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Xe=new Uint32Array(64);class td extends rc{constructor(){super(64,32,8,!1),this.A=Ze[0]|0,this.B=Ze[1]|0,this.C=Ze[2]|0,this.D=Ze[3]|0,this.E=Ze[4]|0,this.F=Ze[5]|0,this.G=Ze[6]|0,this.H=Ze[7]|0}get(){const{A:t,B:e,C:n,D:r,E:i,F:o,G:a,H:c}=this;return[t,e,n,r,i,o,a,c]}set(t,e,n,r,i,o,a,c){this.A=t|0,this.B=e|0,this.C=n|0,this.D=r|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,e){for(let f=0;f<16;f++,e+=4)Xe[f]=t.getUint32(e,!1);for(let f=16;f<64;f++){const p=Xe[f-15],g=Xe[f-2],b=fe(p,7)^fe(p,18)^p>>>3,A=fe(g,17)^fe(g,19)^g>>>10;Xe[f]=A+Xe[f-7]+b+Xe[f-16]|0}let{A:n,B:r,C:i,D:o,E:a,F:c,G:l,H:h}=this;for(let f=0;f<64;f++){const p=fe(a,6)^fe(a,11)^fe(a,25),g=h+p+Zf(a,c,l)+$f[f]+Xe[f]|0,A=(fe(n,2)^fe(n,13)^fe(n,22))+Xf(n,r,i)|0;h=l,l=c,c=a,a=o+g|0,o=i,i=r,r=n,n=g+A|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,h=h+this.H|0,this.set(n,r,i,o,a,c,l,h)}roundClean(){Xe.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Li=Rr(()=>new td),zi=BigInt(2**32-1),Pa=BigInt(32);function hu(s,t=!1){return t?{h:Number(s&zi),l:Number(s>>Pa&zi)}:{h:Number(s>>Pa&zi)|0,l:Number(s&zi)|0}}function ed(s,t=!1){let e=new Uint32Array(s.length),n=new Uint32Array(s.length);for(let r=0;r<s.length;r++){const{h:i,l:o}=hu(s[r],t);[e[r],n[r]]=[i,o]}return[e,n]}const nd=(s,t)=>BigInt(s>>>0)<<Pa|BigInt(t>>>0),sd=(s,t,e)=>s>>>e,rd=(s,t,e)=>s<<32-e|t>>>e,id=(s,t,e)=>s>>>e|t<<32-e,od=(s,t,e)=>s<<32-e|t>>>e,ad=(s,t,e)=>s<<64-e|t>>>e-32,cd=(s,t,e)=>s>>>e-32|t<<64-e,ld=(s,t)=>t,ud=(s,t)=>s,hd=(s,t,e)=>s<<e|t>>>32-e,fd=(s,t,e)=>t<<e|s>>>32-e,dd=(s,t,e)=>t<<e-32|s>>>64-e,pd=(s,t,e)=>s<<e-32|t>>>64-e;function gd(s,t,e,n){const r=(t>>>0)+(n>>>0);return{h:s+e+(r/2**32|0)|0,l:r|0}}const md=(s,t,e)=>(s>>>0)+(t>>>0)+(e>>>0),wd=(s,t,e,n)=>t+e+n+(s/2**32|0)|0,yd=(s,t,e,n)=>(s>>>0)+(t>>>0)+(e>>>0)+(n>>>0),Ad=(s,t,e,n,r)=>t+e+n+r+(s/2**32|0)|0,bd=(s,t,e,n,r)=>(s>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Ed=(s,t,e,n,r,i)=>t+e+n+r+i+(s/2**32|0)|0,B={fromBig:hu,split:ed,toBig:nd,shrSH:sd,shrSL:rd,rotrSH:id,rotrSL:od,rotrBH:ad,rotrBL:cd,rotr32H:ld,rotr32L:ud,rotlSH:hd,rotlSL:fd,rotlBH:dd,rotlBL:pd,add:gd,add3L:md,add3H:wd,add4L:yd,add4H:Ad,add5H:Ed,add5L:bd},[xd,vd]=B.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(s=>BigInt(s))),$e=new Uint32Array(80),tn=new Uint32Array(80);class ic extends rc{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:r,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:h,Fh:f,Fl:p,Gh:g,Gl:b,Hh:A,Hl:x}=this;return[t,e,n,r,i,o,a,c,l,h,f,p,g,b,A,x]}set(t,e,n,r,i,o,a,c,l,h,f,p,g,b,A,x){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=r|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=h|0,this.Fh=f|0,this.Fl=p|0,this.Gh=g|0,this.Gl=b|0,this.Hh=A|0,this.Hl=x|0}process(t,e){for(let O=0;O<16;O++,e+=4)$e[O]=t.getUint32(e),tn[O]=t.getUint32(e+=4);for(let O=16;O<80;O++){const U=$e[O-15]|0,S=tn[O-15]|0,K=B.rotrSH(U,S,1)^B.rotrSH(U,S,8)^B.shrSH(U,S,7),ht=B.rotrSL(U,S,1)^B.rotrSL(U,S,8)^B.shrSL(U,S,7),J=$e[O-2]|0,_=tn[O-2]|0,ft=B.rotrSH(J,_,19)^B.rotrBH(J,_,61)^B.shrSH(J,_,6),Yt=B.rotrSL(J,_,19)^B.rotrBL(J,_,61)^B.shrSL(J,_,6),Mt=B.add4L(ht,Yt,tn[O-7],tn[O-16]),qt=B.add4H(Mt,K,ft,$e[O-7],$e[O-16]);$e[O]=qt|0,tn[O]=Mt|0}let{Ah:n,Al:r,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:h,Eh:f,El:p,Fh:g,Fl:b,Gh:A,Gl:x,Hh:I,Hl:C}=this;for(let O=0;O<80;O++){const U=B.rotrSH(f,p,14)^B.rotrSH(f,p,18)^B.rotrBH(f,p,41),S=B.rotrSL(f,p,14)^B.rotrSL(f,p,18)^B.rotrBL(f,p,41),K=f&g^~f&A,ht=p&b^~p&x,J=B.add5L(C,S,ht,vd[O],tn[O]),_=B.add5H(J,I,U,K,xd[O],$e[O]),ft=J|0,Yt=B.rotrSH(n,r,28)^B.rotrBH(n,r,34)^B.rotrBH(n,r,39),Mt=B.rotrSL(n,r,28)^B.rotrBL(n,r,34)^B.rotrBL(n,r,39),qt=n&i^n&a^i&a,Ie=r&o^r&c^o&c;I=A|0,C=x|0,A=g|0,x=b|0,g=f|0,b=p|0,{h:f,l:p}=B.add(l|0,h|0,_|0,ft|0),l=a|0,h=c|0,a=i|0,c=o|0,i=n|0,o=r|0;const he=B.add3L(ft,Mt,Ie);n=B.add3H(he,_,Yt,qt),r=he|0}({h:n,l:r}=B.add(this.Ah|0,this.Al|0,n|0,r|0)),{h:i,l:o}=B.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=B.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:h}=B.add(this.Dh|0,this.Dl|0,l|0,h|0),{h:f,l:p}=B.add(this.Eh|0,this.El|0,f|0,p|0),{h:g,l:b}=B.add(this.Fh|0,this.Fl|0,g|0,b|0),{h:A,l:x}=B.add(this.Gh|0,this.Gl|0,A|0,x|0),{h:I,l:C}=B.add(this.Hh|0,this.Hl|0,I|0,C|0),this.set(n,r,i,o,a,c,l,h,f,p,g,b,A,x,I,C)}roundClean(){$e.fill(0),tn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Cd extends ic{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Id extends ic{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const oc=Rr(()=>new ic);Rr(()=>new Cd);Rr(()=>new Id);function Nd(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const Mc=Nd(),Hc=Mc.crypto||Mc.msCrypto;function fu(s){switch(s){case"sha256":return Li.create();case"sha512":return oc.create()}m(!1,"invalid hashing algorithm name","algorithm",s)}function kd(s,t){const e={sha256:Li,sha512:oc}[s];return m(e!=null,"invalid hmac algorithm","algorithm",s),nc.create(e,t)}function Td(s,t,e,n,r){const i={sha256:Li,sha512:oc}[r];return m(i!=null,"invalid pbkdf2 algorithm","algorithm",r),sc(i,s,t,{c:e,dkLen:n})}function Pd(s){E(Hc!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),m(Number.isInteger(s)&&s>0&&s<=1024,"invalid length","length",s);const t=new Uint8Array(s);return Hc.getRandomValues(t),t}let du=!1;const pu=function(s,t,e){return kd(s,t).update(e).digest()};let gu=pu;function Ui(s,t,e){const n=L(t,"key"),r=L(e,"data");return T(gu(s,n,r))}Ui._=pu;Ui.lock=function(){du=!0};Ui.register=function(s){if(du)throw new Error("computeHmac is locked");gu=s};Object.freeze(Ui);const[mu,wu,yu]=[[],[],[]],Od=BigInt(0),Dr=BigInt(1),Rd=BigInt(2),Sd=BigInt(7),Bd=BigInt(256),Ld=BigInt(113);for(let s=0,t=Dr,e=1,n=0;s<24;s++){[e,n]=[n,(2*e+3*n)%5],mu.push(2*(5*n+e)),wu.push((s+1)*(s+2)/2%64);let r=Od;for(let i=0;i<7;i++)t=(t<<Dr^(t>>Sd)*Ld)%Bd,t&Rd&&(r^=Dr<<(Dr<<BigInt(i))-Dr);yu.push(r)}const[Ud,Dd]=B.split(yu,!0),Gc=(s,t,e)=>e>32?B.rotlBH(s,t,e):B.rotlSH(s,t,e),Vc=(s,t,e)=>e>32?B.rotlBL(s,t,e):B.rotlSL(s,t,e);function Fd(s,t=24){const e=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let o=0;o<10;o++)e[o]=s[o]^s[o+10]^s[o+20]^s[o+30]^s[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=e[c],h=e[c+1],f=Gc(l,h,1)^e[a],p=Vc(l,h,1)^e[a+1];for(let g=0;g<50;g+=10)s[o+g]^=f,s[o+g+1]^=p}let r=s[2],i=s[3];for(let o=0;o<24;o++){const a=wu[o],c=Gc(r,i,a),l=Vc(r,i,a),h=mu[o];r=s[h],i=s[h+1],s[h]=c,s[h+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)e[a]=s[o+a];for(let a=0;a<10;a++)s[o+a]^=~e[(a+2)%10]&e[(a+4)%10]}s[0]^=Ud[n],s[1]^=Dd[n]}e.fill(0)}class Ko extends yo{constructor(t,e,n,r=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Z.number(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=so(this.state)}keccak(){Fd(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Z.exists(this);const{blockLen:e,state:n}=this;t=ps(t);const r=t.length;for(let i=0;i<r;){const o=Math.min(e-this.pos,r-i);for(let a=0;a<o;a++)n[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:r}=this;t[n]^=e,e&128&&n===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){Z.exists(this,!1),Z.bytes(t),this.finish();const e=this.state,{blockLen:n}=this;for(let r=0,i=t.length;r<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-r);t.set(e.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Z.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Z.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:r,rounds:i,enableXOF:o}=this;return t||(t=new Ko(e,n,r,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=r,t.enableXOF=o,t.destroyed=this.destroyed,t}}const Pn=(s,t,e)=>Rr(()=>new Ko(t,s,e));Pn(6,144,224/8);Pn(6,136,256/8);Pn(6,104,384/8);Pn(6,72,512/8);Pn(1,144,224/8);const Md=Pn(1,136,256/8);Pn(1,104,384/8);Pn(1,72,512/8);const Au=(s,t,e)=>Jf((n={})=>new Ko(t,s,n.dkLen===void 0?e:n.dkLen,!0));Au(31,168,128/8);Au(31,136,256/8);let bu=!1;const Eu=function(s){return Md(s)};let xu=Eu;function $(s){const t=L(s,"data");return T(xu(t))}$._=Eu;$.lock=function(){bu=!0};$.register=function(s){if(bu)throw new TypeError("keccak256 is locked");xu=s};Object.freeze($);const Hd=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),vu=Uint8Array.from({length:16},(s,t)=>t),Gd=vu.map(s=>(9*s+5)%16);let ac=[vu],cc=[Gd];for(let s=0;s<4;s++)for(let t of[ac,cc])t.push(t[s].map(e=>Hd[e]));const Cu=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(s=>new Uint8Array(s)),Vd=ac.map((s,t)=>s.map(e=>Cu[t][e])),zd=cc.map((s,t)=>s.map(e=>Cu[t][e])),Qd=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Wd=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Qi=(s,t)=>s<<t|s>>>32-t;function zc(s,t,e,n){return s===0?t^e^n:s===1?t&e|~t&n:s===2?(t|~e)^n:s===3?t&n|e&~n:t^(e|~n)}const Wi=new Uint32Array(16);class jd extends rc{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:e,h2:n,h3:r,h4:i}=this;return[t,e,n,r,i]}set(t,e,n,r,i){this.h0=t|0,this.h1=e|0,this.h2=n|0,this.h3=r|0,this.h4=i|0}process(t,e){for(let g=0;g<16;g++,e+=4)Wi[g]=t.getUint32(e,!0);let n=this.h0|0,r=n,i=this.h1|0,o=i,a=this.h2|0,c=a,l=this.h3|0,h=l,f=this.h4|0,p=f;for(let g=0;g<5;g++){const b=4-g,A=Qd[g],x=Wd[g],I=ac[g],C=cc[g],O=Vd[g],U=zd[g];for(let S=0;S<16;S++){const K=Qi(n+zc(g,i,a,l)+Wi[I[S]]+A,O[S])+f|0;n=f,f=l,l=Qi(a,10)|0,a=i,i=K}for(let S=0;S<16;S++){const K=Qi(r+zc(b,o,c,h)+Wi[C[S]]+x,U[S])+p|0;r=p,p=h,h=Qi(c,10)|0,c=o,o=K}}this.set(this.h1+a+h|0,this.h2+l+p|0,this.h3+f+r|0,this.h4+n+o|0,this.h0+i+c|0)}roundClean(){Wi.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const Kd=Rr(()=>new jd);let Iu=!1;const Nu=function(s){return Kd(s)};let ku=Nu;function Jo(s){const t=L(s,"data");return T(ku(t))}Jo._=Nu;Jo.lock=function(){Iu=!0};Jo.register=function(s){if(Iu)throw new TypeError("ripemd160 is locked");ku=s};Object.freeze(Jo);let Tu=!1;const Pu=function(s,t,e,n,r){return Td(s,t,e,n,r)};let Ou=Pu;function _o(s,t,e,n,r){const i=L(s,"password"),o=L(t,"salt");return T(Ou(i,o,e,n,r))}_o._=Pu;_o.lock=function(){Tu=!0};_o.register=function(s){if(Tu)throw new Error("pbkdf2 is locked");Ou=s};Object.freeze(_o);let Ru=!1;const Su=function(s){return new Uint8Array(Pd(s))};let Bu=Su;function Yo(s){return Bu(s)}Yo._=Su;Yo.lock=function(){Ru=!0};Yo.register=function(s){if(Ru)throw new Error("randomBytes is locked");Bu=s};Object.freeze(Yo);const H=(s,t)=>s<<t|s>>>32-t;function Qc(s,t,e,n,r,i){let o=s[t++]^e[n++],a=s[t++]^e[n++],c=s[t++]^e[n++],l=s[t++]^e[n++],h=s[t++]^e[n++],f=s[t++]^e[n++],p=s[t++]^e[n++],g=s[t++]^e[n++],b=s[t++]^e[n++],A=s[t++]^e[n++],x=s[t++]^e[n++],I=s[t++]^e[n++],C=s[t++]^e[n++],O=s[t++]^e[n++],U=s[t++]^e[n++],S=s[t++]^e[n++],K=o,ht=a,J=c,_=l,ft=h,Yt=f,Mt=p,qt=g,Ie=b,he=A,Rn=x,Sn=I,Bn=C,Ln=O,Un=U,Dn=S;for(let Nc=0;Nc<8;Nc+=2)ft^=H(K+Bn|0,7),Ie^=H(ft+K|0,9),Bn^=H(Ie+ft|0,13),K^=H(Bn+Ie|0,18),he^=H(Yt+ht|0,7),Ln^=H(he+Yt|0,9),ht^=H(Ln+he|0,13),Yt^=H(ht+Ln|0,18),Un^=H(Rn+Mt|0,7),J^=H(Un+Rn|0,9),Mt^=H(J+Un|0,13),Rn^=H(Mt+J|0,18),_^=H(Dn+Sn|0,7),qt^=H(_+Dn|0,9),Sn^=H(qt+_|0,13),Dn^=H(Sn+qt|0,18),ht^=H(K+_|0,7),J^=H(ht+K|0,9),_^=H(J+ht|0,13),K^=H(_+J|0,18),Mt^=H(Yt+ft|0,7),qt^=H(Mt+Yt|0,9),ft^=H(qt+Mt|0,13),Yt^=H(ft+qt|0,18),Sn^=H(Rn+he|0,7),Ie^=H(Sn+Rn|0,9),he^=H(Ie+Sn|0,13),Rn^=H(he+Ie|0,18),Bn^=H(Dn+Un|0,7),Ln^=H(Bn+Dn|0,9),Un^=H(Ln+Bn|0,13),Dn^=H(Un+Ln|0,18);r[i++]=o+K|0,r[i++]=a+ht|0,r[i++]=c+J|0,r[i++]=l+_|0,r[i++]=h+ft|0,r[i++]=f+Yt|0,r[i++]=p+Mt|0,r[i++]=g+qt|0,r[i++]=b+Ie|0,r[i++]=A+he|0,r[i++]=x+Rn|0,r[i++]=I+Sn|0,r[i++]=C+Bn|0,r[i++]=O+Ln|0,r[i++]=U+Un|0,r[i++]=S+Dn|0}function Ls(s,t,e,n,r){let i=n+0,o=n+16*r;for(let a=0;a<16;a++)e[o+a]=s[t+(2*r-1)*16+a];for(let a=0;a<r;a++,i+=16,t+=16)Qc(e,o,s,t,e,i),a>0&&(o+=16),Qc(e,i,s,t+=16,e,o)}function Lu(s,t,e){const n=lu({dkLen:32,asyncTick:10,maxmem:1073742848},e),{N:r,r:i,p:o,dkLen:a,asyncTick:c,maxmem:l,onProgress:h}=n;if(Z.number(r),Z.number(i),Z.number(o),Z.number(a),Z.number(c),Z.number(l),h!==void 0&&typeof h!="function")throw new Error("progressCb should be function");const f=128*i,p=f/4;if(r<=1||r&r-1||r>=2**(f/8)||r>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>(2**32-1)*32/f)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const g=f*(r+o);if(g>l)throw new Error(`Scrypt: parameters too large, ${g} (128 * r * (N + p)) > ${l} (maxmem)`);const b=sc(Li,s,t,{c:1,dkLen:f*o}),A=so(b),x=so(new Uint8Array(f*r)),I=so(new Uint8Array(f));let C=()=>{};if(h){const O=2*r*o,U=Math.max(Math.floor(O/1e4),1);let S=0;C=()=>{S++,h&&(!(S%U)||S===O)&&h(S/O)}}return{N:r,r:i,p:o,dkLen:a,blockSize32:p,V:x,B32:A,B:b,tmp:I,blockMixCb:C,asyncTick:c}}function Uu(s,t,e,n,r){const i=sc(Li,s,e,{c:1,dkLen:t});return e.fill(0),n.fill(0),r.fill(0),i}function Jd(s,t,e){const{N:n,r,p:i,dkLen:o,blockSize32:a,V:c,B32:l,B:h,tmp:f,blockMixCb:p}=Lu(s,t,e);for(let g=0;g<i;g++){const b=a*g;for(let A=0;A<a;A++)c[A]=l[b+A];for(let A=0,x=0;A<n-1;A++)Ls(c,x,c,x+=a,r),p();Ls(c,(n-1)*a,l,b,r),p();for(let A=0;A<n;A++){const x=l[b+a-16]%n;for(let I=0;I<a;I++)f[I]=l[b+I]^c[x*a+I];Ls(f,0,l,b,r),p()}}return Uu(s,o,h,c,f)}async function _d(s,t,e){const{N:n,r,p:i,dkLen:o,blockSize32:a,V:c,B32:l,B:h,tmp:f,blockMixCb:p,asyncTick:g}=Lu(s,t,e);for(let b=0;b<i;b++){const A=a*b;for(let I=0;I<a;I++)c[I]=l[A+I];let x=0;await Fc(n-1,g,I=>{Ls(c,x,c,x+=a,r),p()}),Ls(c,(n-1)*a,l,A,r),p(),await Fc(n,g,I=>{const C=l[A+a-16]%n;for(let O=0;O<a;O++)f[O]=l[A+O]^c[C*a+O];Ls(f,0,l,A,r),p()})}return Uu(s,o,h,c,f)}let Du=!1,Fu=!1;const Mu=async function(s,t,e,n,r,i,o){return await _d(s,t,{N:e,r:n,p:r,dkLen:i,onProgress:o})},Hu=function(s,t,e,n,r,i){return Jd(s,t,{N:e,r:n,p:r,dkLen:i})};let Gu=Mu,Vu=Hu;async function qo(s,t,e,n,r,i,o){const a=L(s,"passwd"),c=L(t,"salt");return T(await Gu(a,c,e,n,r,i,o))}qo._=Mu;qo.lock=function(){Fu=!0};qo.register=function(s){if(Fu)throw new Error("scrypt is locked");Gu=s};Object.freeze(qo);function Zo(s,t,e,n,r,i){const o=L(s,"passwd"),a=L(t,"salt");return T(Vu(o,a,e,n,r,i))}Zo._=Hu;Zo.lock=function(){Du=!0};Zo.register=function(s){if(Du)throw new Error("scryptSync is locked");Vu=s};Object.freeze(Zo);const zu=function(s){return fu("sha256").update(s).digest()},Qu=function(s){return fu("sha512").update(s).digest()};let Wu=zu,ju=Qu,Ku=!1,Ju=!1;function Di(s){const t=L(s,"data");return T(Wu(t))}Di._=zu;Di.lock=function(){Ku=!0};Di.register=function(s){if(Ku)throw new Error("sha256 is locked");Wu=s};Object.freeze(Di);function lc(s){const t=L(s,"data");return T(ju(t))}lc._=Qu;lc.lock=function(){Ju=!0};lc.register=function(s){if(Ju)throw new Error("sha512 is locked");ju=s};Object.freeze(Di);var Yd={},qd=Object.freeze({__proto__:null,default:Yd});/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const M=BigInt(0),Y=BigInt(1),xn=BigInt(2),Wr=BigInt(3),Wc=BigInt(8),nt=Object.freeze({a:M,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:Y,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),jc=(s,t)=>(s+t/xn)/t,ji={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(s){const{n:t}=nt,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Y*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,o=BigInt("0x100000000000000000000000000000000"),a=jc(i*s,t),c=jc(-n*s,t);let l=k(s-a*e-c*r,t),h=k(-a*n-c*i,t);const f=l>o,p=h>o;if(f&&(l=t-l),p&&(h=t-h),l>o||h>o)throw new Error("splitScalarEndo: Endomorphism failed, k="+s);return{k1neg:f,k1:l,k2neg:p,k2:h}}},ae=32,Ir=32,Zd=32,Ao=ae+1,bo=2*ae+1;function Kc(s){const{a:t,b:e}=nt,n=k(s*s),r=k(n*s);return k(r+t*s+e)}const Ki=nt.a===M;class _u extends Error{constructor(t){super(t)}}function Jc(s){if(!(s instanceof z))throw new TypeError("JacobianPoint expected")}class z{constructor(t,e,n){this.x=t,this.y=e,this.z=n}static fromAffine(t){if(!(t instanceof Q))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(Q.ZERO)?z.ZERO:new z(t.x,t.y,Y)}static toAffineBatch(t){const e=np(t.map(n=>n.z));return t.map((n,r)=>n.toAffine(e[r]))}static normalizeZ(t){return z.toAffineBatch(t).map(z.fromAffine)}equals(t){Jc(t);const{x:e,y:n,z:r}=this,{x:i,y:o,z:a}=t,c=k(r*r),l=k(a*a),h=k(e*l),f=k(i*c),p=k(k(n*a)*l),g=k(k(o*r)*c);return h===f&&p===g}negate(){return new z(this.x,k(-this.y),this.z)}double(){const{x:t,y:e,z:n}=this,r=k(t*t),i=k(e*e),o=k(i*i),a=t+i,c=k(xn*(k(a*a)-r-o)),l=k(Wr*r),h=k(l*l),f=k(h-xn*c),p=k(l*(c-f)-Wc*o),g=k(xn*e*n);return new z(f,p,g)}add(t){Jc(t);const{x:e,y:n,z:r}=this,{x:i,y:o,z:a}=t;if(i===M||o===M)return this;if(e===M||n===M)return t;const c=k(r*r),l=k(a*a),h=k(e*l),f=k(i*c),p=k(k(n*a)*l),g=k(k(o*r)*c),b=k(f-h),A=k(g-p);if(b===M)return A===M?this.double():z.ZERO;const x=k(b*b),I=k(b*x),C=k(h*x),O=k(A*A-I-xn*C),U=k(A*(C-O)-p*I),S=k(r*a*b);return new z(O,U,S)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){const e=z.ZERO;if(typeof t=="bigint"&&t===M)return e;let n=qc(t);if(n===Y)return this;if(!Ki){let f=e,p=this;for(;n>M;)n&Y&&(f=f.add(p)),p=p.double(),n>>=Y;return f}let{k1neg:r,k1:i,k2neg:o,k2:a}=ji.splitScalar(n),c=e,l=e,h=this;for(;i>M||a>M;)i&Y&&(c=c.add(h)),a&Y&&(l=l.add(h)),h=h.double(),i>>=Y,a>>=Y;return r&&(c=c.negate()),o&&(l=l.negate()),l=new z(k(l.x*ji.beta),l.y,l.z),c.add(l)}precomputeWindow(t){const e=Ki?128/t+1:256/t+1,n=[];let r=this,i=r;for(let o=0;o<e;o++){i=r,n.push(i);for(let a=1;a<2**(t-1);a++)i=i.add(r),n.push(i);r=i.double()}return n}wNAF(t,e){!e&&this.equals(z.BASE)&&(e=Q.BASE);const n=e&&e._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let r=e&&Oa.get(e);r||(r=this.precomputeWindow(n),e&&n!==1&&(r=z.normalizeZ(r),Oa.set(e,r)));let i=z.ZERO,o=z.BASE;const a=1+(Ki?128/n:256/n),c=2**(n-1),l=BigInt(2**n-1),h=2**n,f=BigInt(n);for(let p=0;p<a;p++){const g=p*c;let b=Number(t&l);t>>=f,b>c&&(b-=h,t+=Y);const A=g,x=g+Math.abs(b)-1,I=p%2!==0,C=b<0;b===0?o=o.add(Ji(I,r[A])):i=i.add(Ji(C,r[x]))}return{p:i,f:o}}multiply(t,e){let n=qc(t),r,i;if(Ki){const{k1neg:o,k1:a,k2neg:c,k2:l}=ji.splitScalar(n);let{p:h,f}=this.wNAF(a,e),{p,f:g}=this.wNAF(l,e);h=Ji(o,h),p=Ji(c,p),p=new z(k(p.x*ji.beta),p.y,p.z),r=h.add(p),i=f.add(g)}else{const{p:o,f:a}=this.wNAF(n,e);r=o,i=a}return z.normalizeZ([r,i])[0]}toAffine(t){const{x:e,y:n,z:r}=this,i=this.equals(z.ZERO);t==null&&(t=i?Wc:Fi(r));const o=t,a=k(o*o),c=k(a*o),l=k(e*a),h=k(n*c),f=k(r*o);if(i)return Q.ZERO;if(f!==Y)throw new Error("invZ was invalid");return new Q(l,h)}}z.BASE=new z(nt.Gx,nt.Gy,Y);z.ZERO=new z(M,Y,M);function Ji(s,t){const e=t.negate();return s?e:t}const Oa=new WeakMap;class Q{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,Oa.delete(this)}hasEvenY(){return this.y%xn===M}static fromCompressedHex(t){const e=t.length===32,n=In(e?t:t.subarray(1));if(!la(n))throw new Error("Point is not on curve");const r=Kc(n);let i=ep(r);const o=(i&Y)===Y;e?o&&(i=k(-i)):(t[0]&1)===1!==o&&(i=k(-i));const a=new Q(n,i);return a.assertValidity(),a}static fromUncompressedHex(t){const e=In(t.subarray(1,ae+1)),n=In(t.subarray(ae+1,ae*2+1)),r=new Q(e,n);return r.assertValidity(),r}static fromHex(t){const e=Zr(t),n=e.length,r=e[0];if(n===ae)return this.fromCompressedHex(e);if(n===Ao&&(r===2||r===3))return this.fromCompressedHex(e);if(n===bo&&r===4)return this.fromUncompressedHex(e);throw new Error(`Point.fromHex: received invalid point. Expected 32-${Ao} compressed bytes or ${bo} uncompressed bytes, not ${n}`)}static fromPrivateKey(t){return Q.BASE.multiply($r(t))}static fromSignature(t,e,n){const{r,s:i}=ap(e);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");const o=Yu(Zr(t)),{n:a}=nt,c=n===2||n===3?r+a:r,l=Fi(c,a),h=k(-o*l,a),f=k(i*l,a),p=n&1?"03":"02",g=Q.fromHex(p+Ds(c)),b=Q.BASE.multiplyAndAddUnsafe(g,h,f);if(!b)throw new Error("Cannot recover signature: point at infinify");return b.assertValidity(),b}toRawBytes(t=!1){return hs(this.toHex(t))}toHex(t=!1){const e=Ds(this.x);return t?`${this.hasEvenY()?"02":"03"}${e}`:`04${e}${Ds(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const t="Point is not on elliptic curve",{x:e,y:n}=this;if(!la(e)||!la(n))throw new Error(t);const r=k(n*n),i=Kc(e);if(k(r-i)!==M)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new Q(this.x,k(-this.y))}double(){return z.fromAffine(this).double().toAffine()}add(t){return z.fromAffine(this).add(z.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return z.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,e,n){const r=z.fromAffine(this),i=e===M||e===Y||this!==Q.BASE?r.multiplyUnsafe(e):r.multiply(e),o=z.fromAffine(t).multiplyUnsafe(n),a=i.add(o);return a.equals(z.ZERO)?void 0:a.toAffine()}}Q.BASE=new Q(nt.Gx,nt.Gy);Q.ZERO=new Q(M,M);function _c(s){return Number.parseInt(s[0],16)>=8?"00"+s:s}function Yc(s){if(s.length<2||s[0]!==2)throw new Error(`Invalid signature integer tag: ${Nr(s)}`);const t=s[1],e=s.subarray(2,t+2);if(!t||e.length!==t)throw new Error("Invalid signature integer: wrong length");if(e[0]===0&&e[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:In(e),left:s.subarray(t+2)}}function Xd(s){if(s.length<2||s[0]!=48)throw new Error(`Invalid signature tag: ${Nr(s)}`);if(s[1]!==s.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:e}=Yc(s.subarray(2)),{data:n,left:r}=Yc(e);if(r.length)throw new Error(`Invalid signature: left bytes after parsing: ${Nr(r)}`);return{r:t,s:n}}let Us=class io{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromCompact(t){const e=t instanceof Uint8Array,n="Signature.fromCompact";if(typeof t!="string"&&!e)throw new TypeError(`${n}: Expected string or Uint8Array`);const r=e?Nr(t):t;if(r.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new io(Eo(r.slice(0,64)),Eo(r.slice(64,128)))}static fromDER(t){const e=t instanceof Uint8Array;if(typeof t!="string"&&!e)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:n,s:r}=Xd(e?t:hs(t));return new io(n,r)}static fromHex(t){return this.fromDER(t)}assertValidity(){const{r:t,s:e}=this;if(!Xr(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Xr(e))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const t=nt.n>>Y;return this.s>t}normalizeS(){return this.hasHighS()?new io(this.r,k(-this.s,nt.n)):this}toDERRawBytes(){return hs(this.toDERHex())}toDERHex(){const t=_c(Fr(this.s)),e=_c(Fr(this.r)),n=t.length/2,r=e.length/2,i=Fr(n),o=Fr(r);return`30${Fr(r+n+4)}02${o}${e}02${i}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return hs(this.toCompactHex())}toCompactHex(){return Ds(this.r)+Ds(this.s)}};function sn(...s){if(!s.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(s.length===1)return s[0];const t=s.reduce((n,r)=>n+r.length,0),e=new Uint8Array(t);for(let n=0,r=0;n<s.length;n++){const i=s[n];e.set(i,r),r+=i.length}return e}const $d=Array.from({length:256},(s,t)=>t.toString(16).padStart(2,"0"));function Nr(s){if(!(s instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let e=0;e<s.length;e++)t+=$d[s[e]];return t}const tp=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Ds(s){if(typeof s!="bigint")throw new Error("Expected bigint");if(!(M<=s&&s<tp))throw new Error("Expected number 0 <= n < 2^256");return s.toString(16).padStart(64,"0")}function Ra(s){const t=hs(Ds(s));if(t.length!==32)throw new Error("Error: expected 32 bytes");return t}function Fr(s){const t=s.toString(16);return t.length&1?`0${t}`:t}function Eo(s){if(typeof s!="string")throw new TypeError("hexToNumber: expected string, got "+typeof s);return BigInt(`0x${s}`)}function hs(s){if(typeof s!="string")throw new TypeError("hexToBytes: expected string, got "+typeof s);if(s.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+s.length);const t=new Uint8Array(s.length/2);for(let e=0;e<t.length;e++){const n=e*2,r=s.slice(n,n+2),i=Number.parseInt(r,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[e]=i}return t}function In(s){return Eo(Nr(s))}function Zr(s){return s instanceof Uint8Array?Uint8Array.from(s):hs(s)}function qc(s){if(typeof s=="number"&&Number.isSafeInteger(s)&&s>0)return BigInt(s);if(typeof s=="bigint"&&Xr(s))return s;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function k(s,t=nt.P){const e=s%t;return e>=M?e:t+e}function Ht(s,t){const{P:e}=nt;let n=s;for(;t-- >M;)n*=n,n%=e;return n}function ep(s){const{P:t}=nt,e=BigInt(6),n=BigInt(11),r=BigInt(22),i=BigInt(23),o=BigInt(44),a=BigInt(88),c=s*s*s%t,l=c*c*s%t,h=Ht(l,Wr)*l%t,f=Ht(h,Wr)*l%t,p=Ht(f,xn)*c%t,g=Ht(p,n)*p%t,b=Ht(g,r)*g%t,A=Ht(b,o)*b%t,x=Ht(A,a)*A%t,I=Ht(x,o)*b%t,C=Ht(I,Wr)*l%t,O=Ht(C,i)*g%t,U=Ht(O,e)*c%t,S=Ht(U,xn);if(S*S%t!==s)throw new Error("Cannot find square root");return S}function Fi(s,t=nt.P){if(s===M||t<=M)throw new Error(`invert: expected positive integers, got n=${s} mod=${t}`);let e=k(s,t),n=t,r=M,i=Y;for(;e!==M;){const a=n/e,c=n%e,l=r-i*a;n=e,e=c,r=i,i=l}if(n!==Y)throw new Error("invert: does not exist");return k(r,t)}function np(s,t=nt.P){const e=new Array(s.length),n=s.reduce((i,o,a)=>o===M?i:(e[a]=i,k(i*o,t)),Y),r=Fi(n,t);return s.reduceRight((i,o,a)=>o===M?i:(e[a]=k(i*e[a],t),k(i*o,t)),r),e}function sp(s){const t=s.length*8-Ir*8,e=In(s);return t>0?e>>BigInt(t):e}function Yu(s,t=!1){const e=sp(s);if(t)return e;const{n}=nt;return e>=n?e-n:e}let Fs,jr;class rp{constructor(t,e){if(this.hashLen=t,this.qByteLen=e,typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(t).fill(1),this.k=new Uint8Array(t).fill(0),this.counter=0}hmac(...t){return vn.hmacSha256(this.k,...t)}hmacSync(...t){return jr(this.k,...t)}checkSync(){if(typeof jr!="function")throw new _u("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),t.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),t.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){this.incr();let t=0;const e=[];for(;t<this.qByteLen;){this.v=await this.hmac(this.v);const n=this.v.slice();e.push(n),t+=this.v.length}return sn(...e)}generateSync(){this.checkSync(),this.incr();let t=0;const e=[];for(;t<this.qByteLen;){this.v=this.hmacSync(this.v);const n=this.v.slice();e.push(n),t+=this.v.length}return sn(...e)}}function Xr(s){return M<s&&s<nt.n}function la(s){return M<s&&s<nt.P}function ip(s,t,e,n=!0){const{n:r}=nt,i=Yu(s,!0);if(!Xr(i))return;const o=Fi(i,r),a=Q.BASE.multiply(i),c=k(a.x,r);if(c===M)return;const l=k(o*k(t+e*c,r),r);if(l===M)return;let h=new Us(c,l),f=(a.x===h.r?0:2)|Number(a.y&Y);return n&&h.hasHighS()&&(h=h.normalizeS(),f^=1),{sig:h,recovery:f}}function $r(s){let t;if(typeof s=="bigint")t=s;else if(typeof s=="number"&&Number.isSafeInteger(s)&&s>0)t=BigInt(s);else if(typeof s=="string"){if(s.length!==2*Ir)throw new Error("Expected 32 bytes of private key");t=Eo(s)}else if(s instanceof Uint8Array){if(s.length!==Ir)throw new Error("Expected 32 bytes of private key");t=In(s)}else throw new TypeError("Expected valid private key");if(!Xr(t))throw new Error("Expected private key: 0 < key < n");return t}function op(s){return s instanceof Q?(s.assertValidity(),s):Q.fromHex(s)}function ap(s){if(s instanceof Us)return s.assertValidity(),s;try{return Us.fromDER(s)}catch{return Us.fromCompact(s)}}function cp(s,t=!1){return Q.fromPrivateKey(s).toRawBytes(t)}function lp(s,t,e,n=!1){return Q.fromSignature(s,t,e).toRawBytes(n)}function Zc(s){const t=s instanceof Uint8Array,e=typeof s=="string",n=(t||e)&&s.length;return t?n===Ao||n===bo:e?n===Ao*2||n===bo*2:s instanceof Q}function up(s,t,e=!1){if(Zc(s))throw new TypeError("getSharedSecret: first arg must be private key");if(!Zc(t))throw new TypeError("getSharedSecret: second arg must be public key");const n=op(t);return n.assertValidity(),n.multiply($r(s)).toRawBytes(e)}function qu(s){const t=s.length>ae?s.slice(0,ae):s;return In(t)}function hp(s){const t=qu(s),e=k(t,nt.n);return Zu(e<M?t:e)}function Zu(s){return Ra(s)}function fp(s,t,e){if(s==null)throw new Error(`sign: expected valid message hash, not "${s}"`);const n=Zr(s),r=$r(t),i=[Zu(r),hp(n)];if(e!=null){e===!0&&(e=vn.randomBytes(ae));const c=Zr(e);if(c.length!==ae)throw new Error(`sign: Expected ${ae} bytes of extra data`);i.push(c)}const o=sn(...i),a=qu(n);return{seed:o,m:a,d:r}}function dp(s,t){const{sig:e,recovery:n}=s,{der:r,recovered:i}=Object.assign({canonical:!0,der:!0},t),o=r?e.toDERRawBytes():e.toCompactRawBytes();return i?[o,n]:o}function pp(s,t,e={}){const{seed:n,m:r,d:i}=fp(s,t,e.extraEntropy),o=new rp(Zd,Ir);o.reseedSync(n);let a;for(;!(a=ip(o.generateSync(),r,i,e.canonical));)o.reseedSync();return dp(a,e)}Q.BASE._setWindowSize(8);const Rt={node:qd,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},_i={},vn={bytesToHex:Nr,hexToBytes:hs,concatBytes:sn,mod:k,invert:Fi,isValidPrivateKey(s){try{return $r(s),!0}catch{return!1}},_bigintTo32Bytes:Ra,_normalizePrivateKey:$r,hashToPrivateKey:s=>{s=Zr(s);const t=Ir+8;if(s.length<t||s.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");const e=k(In(s),nt.n-Y)+Y;return Ra(e)},randomBytes:(s=32)=>{if(Rt.web)return Rt.web.getRandomValues(new Uint8Array(s));if(Rt.node){const{randomBytes:t}=Rt.node;return Uint8Array.from(t(s))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>vn.hashToPrivateKey(vn.randomBytes(Ir+8)),precompute(s=8,t=Q.BASE){const e=t===Q.BASE?t:new Q(t.x,t.y);return e._setWindowSize(s),e.multiply(Wr),e},sha256:async(...s)=>{if(Rt.web){const t=await Rt.web.subtle.digest("SHA-256",sn(...s));return new Uint8Array(t)}else if(Rt.node){const{createHash:t}=Rt.node,e=t("sha256");return s.forEach(n=>e.update(n)),Uint8Array.from(e.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(s,...t)=>{if(Rt.web){const e=await Rt.web.subtle.importKey("raw",s,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=sn(...t),r=await Rt.web.subtle.sign("HMAC",e,n);return new Uint8Array(r)}else if(Rt.node){const{createHmac:e}=Rt.node,n=e("sha256",s);return t.forEach(r=>n.update(r)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(s,...t)=>{let e=_i[s];if(e===void 0){const n=await vn.sha256(Uint8Array.from(s,r=>r.charCodeAt(0)));e=sn(n,n),_i[s]=e}return vn.sha256(e,...t)},taggedHashSync:(s,...t)=>{if(typeof Fs!="function")throw new _u("sha256Sync is undefined, you need to set it");let e=_i[s];if(e===void 0){const n=Fs(Uint8Array.from(s,r=>r.charCodeAt(0)));e=sn(n,n),_i[s]=e}return Fs(e,...t)},_JacobianPoint:z};Object.defineProperties(vn,{sha256Sync:{configurable:!1,get(){return Fs},set(s){Fs||(Fs=s)}},hmacSha256Sync:{configurable:!1,get(){return jr},set(s){jr||(jr=s)}}});const Sa="0x0000000000000000000000000000000000000000",Xc="0x0000000000000000000000000000000000000000000000000000000000000000";BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");BigInt("1000000000000000000");BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("0x8000000000000000000000000000000000000000000000000000000000000000")*BigInt(-1);BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const $c=BigInt(0),tl=BigInt(1),el=BigInt(2),nl=BigInt(27),sl=BigInt(28),Yi=BigInt(35),bs={};function rl(s){return ds(Ut(s),32)}var js,Ks,Js,Yn;const Xt=class Xt{constructor(t,e,n,r){w(this,js,void 0);w(this,Ks,void 0);w(this,Js,void 0);w(this,Yn,void 0);Bi(t,bs,"Signature"),d(this,js,e),d(this,Ks,n),d(this,Js,r),d(this,Yn,null)}get r(){return u(this,js)}set r(t){m(Ss(t)===32,"invalid r","value",t),d(this,js,T(t))}get s(){return u(this,Ks)}set s(t){m(Ss(t)===32,"invalid s","value",t);const e=T(t);m(parseInt(e.substring(0,3))<8,"non-canonical s","value",e),d(this,Ks,e)}get v(){return u(this,Js)}set v(t){const e=D(t,"value");m(e===27||e===28,"invalid v","v",t),d(this,Js,e)}get networkV(){return u(this,Yn)}get legacyChainId(){const t=this.networkV;return t==null?null:Xt.getChainId(t)}get yParity(){return this.v===27?0:1}get yParityAndS(){const t=L(this.s);return this.yParity&&(t[0]|=128),T(t)}get compactSerialized(){return rt([this.r,this.yParityAndS])}get serialized(){return rt([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const t=new Xt(bs,this.r,this.s,this.v);return this.networkV&&d(t,Yn,this.networkV),t}toJSON(){const t=this.networkV;return{_type:"signature",networkV:t!=null?t.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(t){const e=P(t,"v");return e==nl||e==sl?$c:(m(e>=Yi,"invalid EIP-155 v","v",t),(e-Yi)/el)}static getChainIdV(t,e){return P(t)*el+BigInt(35+e-27)}static getNormalizedV(t){const e=P(t);return e===$c||e===nl?27:e===tl||e===sl?28:(m(e>=Yi,"invalid v","v",t),e&tl?27:28)}static from(t){function e(l,h){m(l,h,"signature",t)}if(t==null)return new Xt(bs,Xc,Xc,27);if(typeof t=="string"){const l=L(t,"signature");if(l.length===64){const h=T(l.slice(0,32)),f=l.slice(32,64),p=f[0]&128?28:27;return f[0]&=127,new Xt(bs,h,T(f),p)}if(l.length===65){const h=T(l.slice(0,32)),f=l.slice(32,64);e((f[0]&128)===0,"non-canonical s");const p=Xt.getNormalizedV(l[64]);return new Xt(bs,h,T(f),p)}e(!1,"invalid raw signature length")}if(t instanceof Xt)return t.clone();const n=t.r;e(n!=null,"missing r");const r=rl(n),i=function(l,h){if(l!=null)return rl(l);if(h!=null){e(tt(h,32),"invalid yParityAndS");const f=L(h);return f[0]&=127,T(f)}e(!1,"missing s")}(t.s,t.yParityAndS);e((L(i)[0]&128)==0,"non-canonical s");const{networkV:o,v:a}=function(l,h,f){if(l!=null){const p=P(l);return{networkV:p>=Yi?p:void 0,v:Xt.getNormalizedV(p)}}if(h!=null)return e(tt(h,32),"invalid yParityAndS"),{v:L(h)[0]&128?28:27};if(f!=null){switch(f){case 0:return{v:27};case 1:return{v:28}}e(!1,"invalid yParity")}e(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),c=new Xt(bs,r,i,a);return o&&d(c,Yn,o),e(!("yParity"in t&&t.yParity!==c.yParity),"yParity mismatch"),e(!("yParityAndS"in t&&t.yParityAndS!==c.yParityAndS),"yParityAndS mismatch"),c}};js=new WeakMap,Ks=new WeakMap,Js=new WeakMap,Yn=new WeakMap;let ce=Xt;vn.hmacSha256Sync=function(s,...t){return L(Ui("sha256",s,rt(t)))};var Ue;const Hn=class Hn{constructor(t){w(this,Ue,void 0);m(Ss(t)===32,"invalid private key","privateKey","[REDACTED]"),d(this,Ue,T(t))}get privateKey(){return u(this,Ue)}get publicKey(){return Hn.computePublicKey(u(this,Ue))}get compressedPublicKey(){return Hn.computePublicKey(u(this,Ue),!0)}sign(t){m(Ss(t)===32,"invalid digest length","digest",t);const[e,n]=pp(Pt(t),Pt(u(this,Ue)),{recovered:!0,canonical:!0}),r=Us.fromHex(e);return ce.from({r:Nn("0x"+r.r.toString(16),32),s:Nn("0x"+r.s.toString(16),32),v:n?28:27})}computeSharedSecret(t){const e=Hn.computePublicKey(t);return T(up(Pt(u(this,Ue)),L(e)))}static computePublicKey(t,e){let n=L(t,"key");if(n.length===32){const i=cp(n,!!e);return T(i)}if(n.length===64){const i=new Uint8Array(65);i[0]=4,i.set(n,1),n=i}const r=Q.fromHex(n);return T(r.toRawBytes(e))}static recoverPublicKey(t,e){m(Ss(t)===32,"invalid digest length","digest",t);const n=ce.from(e),r=Us.fromCompact(Pt(rt([n.r,n.s]))).toDERRawBytes(),i=lp(Pt(t),r,n.yParity);return m(i!=null,"invalid signautre for digest","signature",e),T(i)}static addPoints(t,e,n){const r=Q.fromHex(Hn.computePublicKey(t).substring(2)),i=Q.fromHex(Hn.computePublicKey(e).substring(2));return"0x"+r.add(i).toHex(!!n)}};Ue=new WeakMap;let ti=Hn;const gp=BigInt(0),mp=BigInt(36);function il(s){s=s.toLowerCase();const t=s.substring(2).split(""),e=new Uint8Array(40);for(let r=0;r<40;r++)e[r]=t[r].charCodeAt(0);const n=L($(e));for(let r=0;r<40;r+=2)n[r>>1]>>4>=8&&(t[r]=t[r].toUpperCase()),(n[r>>1]&15)>=8&&(t[r+1]=t[r+1].toUpperCase());return"0x"+t.join("")}const uc={};for(let s=0;s<10;s++)uc[String(s)]=String(s);for(let s=0;s<26;s++)uc[String.fromCharCode(65+s)]=String(10+s);const ol=15;function wp(s){s=s.toUpperCase(),s=s.substring(4)+s.substring(0,2)+"00";let t=s.split("").map(n=>uc[n]).join("");for(;t.length>=ol;){let n=t.substring(0,ol);t=parseInt(n,10)%97+t.substring(n.length)}let e=String(98-parseInt(t,10)%97);for(;e.length<2;)e="0"+e;return e}const yp=function(){const s={};for(let t=0;t<36;t++){const e="0123456789abcdefghijklmnopqrstuvwxyz"[t];s[e]=BigInt(t)}return s}();function Ap(s){s=s.toLowerCase();let t=gp;for(let e=0;e<s.length;e++)t=t*mp+yp[s[e]];return t}function V(s){if(m(typeof s=="string","invalid address","address",s),s.match(/^(0x)?[0-9a-fA-F]{40}$/)){s.startsWith("0x")||(s="0x"+s);const t=il(s);return m(!s.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===s,"bad address checksum","address",s),t}if(s.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){m(s.substring(2,4)===wp(s),"bad icap checksum","address",s);let t=Ap(s.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return il("0x"+t)}m(!1,"invalid address","address",s)}function bp(s){const t=V(s.from);let n=P(s.nonce,"tx.nonce").toString(16);return n==="0"?n="0x":n.length%2?n="0x0"+n:n="0x"+n,V(et($(qr([t,n])),12))}function Xu(s){return s&&typeof s.getAddress=="function"}function Ep(s){try{return V(s),!0}catch{}return!1}async function ua(s,t){const e=await t;return(e==null||e==="0x0000000000000000000000000000000000000000")&&(E(typeof s!="string","unconfigured name","UNCONFIGURED_NAME",{value:s}),m(!1,"invalid AddressLike value; did not resolve to a value address","target",s)),V(e)}function Dt(s,t){if(typeof s=="string")return s.match(/^0x[0-9a-f]{40}$/i)?V(s):(E(t!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),ua(s,t.resolveName(s)));if(Xu(s))return ua(s,s.getAddress());if(s&&typeof s.then=="function")return ua(s,s);m(!1,"unsupported addressable value","target",s)}const ke={};function N(s,t){let e=!1;return t<0&&(e=!0,t*=-1),new wt(ke,`${e?"":"u"}int${t}`,s,{signed:e,width:t})}function G(s,t){return new wt(ke,`bytes${t||""}`,s,{size:t})}const al=Symbol.for("_ethers_typed");var qn;const Te=class Te{constructor(t,e,n,r){y(this,"type");y(this,"value");w(this,qn,void 0);y(this,"_typedSymbol");r==null&&(r=null),Bi(ke,t,"Typed"),R(this,{_typedSymbol:al,type:e,value:n}),d(this,qn,r),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(t=>t.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return u(this,qn)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return u(this,qn)===!0?-1:u(this,qn)===!1?this.value.length:null}static from(t,e){return new Te(ke,t,e)}static uint8(t){return N(t,8)}static uint16(t){return N(t,16)}static uint24(t){return N(t,24)}static uint32(t){return N(t,32)}static uint40(t){return N(t,40)}static uint48(t){return N(t,48)}static uint56(t){return N(t,56)}static uint64(t){return N(t,64)}static uint72(t){return N(t,72)}static uint80(t){return N(t,80)}static uint88(t){return N(t,88)}static uint96(t){return N(t,96)}static uint104(t){return N(t,104)}static uint112(t){return N(t,112)}static uint120(t){return N(t,120)}static uint128(t){return N(t,128)}static uint136(t){return N(t,136)}static uint144(t){return N(t,144)}static uint152(t){return N(t,152)}static uint160(t){return N(t,160)}static uint168(t){return N(t,168)}static uint176(t){return N(t,176)}static uint184(t){return N(t,184)}static uint192(t){return N(t,192)}static uint200(t){return N(t,200)}static uint208(t){return N(t,208)}static uint216(t){return N(t,216)}static uint224(t){return N(t,224)}static uint232(t){return N(t,232)}static uint240(t){return N(t,240)}static uint248(t){return N(t,248)}static uint256(t){return N(t,256)}static uint(t){return N(t,256)}static int8(t){return N(t,-8)}static int16(t){return N(t,-16)}static int24(t){return N(t,-24)}static int32(t){return N(t,-32)}static int40(t){return N(t,-40)}static int48(t){return N(t,-48)}static int56(t){return N(t,-56)}static int64(t){return N(t,-64)}static int72(t){return N(t,-72)}static int80(t){return N(t,-80)}static int88(t){return N(t,-88)}static int96(t){return N(t,-96)}static int104(t){return N(t,-104)}static int112(t){return N(t,-112)}static int120(t){return N(t,-120)}static int128(t){return N(t,-128)}static int136(t){return N(t,-136)}static int144(t){return N(t,-144)}static int152(t){return N(t,-152)}static int160(t){return N(t,-160)}static int168(t){return N(t,-168)}static int176(t){return N(t,-176)}static int184(t){return N(t,-184)}static int192(t){return N(t,-192)}static int200(t){return N(t,-200)}static int208(t){return N(t,-208)}static int216(t){return N(t,-216)}static int224(t){return N(t,-224)}static int232(t){return N(t,-232)}static int240(t){return N(t,-240)}static int248(t){return N(t,-248)}static int256(t){return N(t,-256)}static int(t){return N(t,-256)}static bytes1(t){return G(t,1)}static bytes2(t){return G(t,2)}static bytes3(t){return G(t,3)}static bytes4(t){return G(t,4)}static bytes5(t){return G(t,5)}static bytes6(t){return G(t,6)}static bytes7(t){return G(t,7)}static bytes8(t){return G(t,8)}static bytes9(t){return G(t,9)}static bytes10(t){return G(t,10)}static bytes11(t){return G(t,11)}static bytes12(t){return G(t,12)}static bytes13(t){return G(t,13)}static bytes14(t){return G(t,14)}static bytes15(t){return G(t,15)}static bytes16(t){return G(t,16)}static bytes17(t){return G(t,17)}static bytes18(t){return G(t,18)}static bytes19(t){return G(t,19)}static bytes20(t){return G(t,20)}static bytes21(t){return G(t,21)}static bytes22(t){return G(t,22)}static bytes23(t){return G(t,23)}static bytes24(t){return G(t,24)}static bytes25(t){return G(t,25)}static bytes26(t){return G(t,26)}static bytes27(t){return G(t,27)}static bytes28(t){return G(t,28)}static bytes29(t){return G(t,29)}static bytes30(t){return G(t,30)}static bytes31(t){return G(t,31)}static bytes32(t){return G(t,32)}static address(t){return new Te(ke,"address",t)}static bool(t){return new Te(ke,"bool",!!t)}static bytes(t){return new Te(ke,"bytes",t)}static string(t){return new Te(ke,"string",t)}static array(t,e){throw new Error("not implemented yet")}static tuple(t,e){throw new Error("not implemented yet")}static overrides(t){return new Te(ke,"overrides",Object.assign({},t))}static isTyped(t){return t&&typeof t=="object"&&"_typedSymbol"in t&&t._typedSymbol===al}static dereference(t,e){if(Te.isTyped(t)){if(t.type!==e)throw new Error(`invalid type: expecetd ${e}, got ${t.type}`);return t.value}return t}};qn=new WeakMap;let wt=Te;class xp extends qe{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){let n=wt.dereference(e,"string");try{n=V(n)}catch(r){return this._throwError(r.message,e)}return t.writeValue(n)}decode(t){return V(Nn(t.readValue(),20))}}class vp extends qe{constructor(e){super(e.name,e.type,"_",e.dynamic);y(this,"coder");this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,n){return this.coder.encode(e,n)}decode(e){return this.coder.decode(e)}}function $u(s,t,e){let n=[];if(Array.isArray(e))n=e;else if(e&&typeof e=="object"){let c={};n=t.map(l=>{const h=l.localName;return E(h,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:e}),E(!c[h],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:e}),c[h]=!0,e[h]})}else m(!1,"invalid tuple value","tuple",e);m(t.length===n.length,"types/value length mismatch","tuple",e);let r=new Na,i=new Na,o=[];t.forEach((c,l)=>{let h=n[l];if(c.dynamic){let f=i.length;c.encode(i,h);let p=r.writeUpdatableValue();o.push(g=>{p(g+f)})}else c.encode(r,h)}),o.forEach(c=>{c(r.length)});let a=s.appendWriter(r);return a+=s.appendWriter(i),a}function th(s,t){let e=[],n=[],r=s.subReader(0);return t.forEach(i=>{let o=null;if(i.dynamic){let a=s.readIndex(),c=r.subReader(a);try{o=i.decode(c)}catch(l){if(Ce(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(s)}catch(a){if(Ce(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");e.push(o),n.push(i.localName||null)}),wo.fromItems(e,n)}class Cp extends qe{constructor(e,n,r){const i=e.type+"["+(n>=0?n:"")+"]",o=n===-1||e.dynamic;super("array",i,r,o);y(this,"coder");y(this,"length");R(this,{coder:e,length:n})}defaultValue(){const e=this.coder.defaultValue(),n=[];for(let r=0;r<this.length;r++)n.push(e);return n}encode(e,n){const r=wt.dereference(n,"array");Array.isArray(r)||this._throwError("expected array value",r);let i=this.length;i===-1&&(i=r.length,e.writeValue(r.length)),ql(r.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<r.length;a++)o.push(this.coder);return $u(e,o,r)}decode(e){let n=this.length;n===-1&&(n=e.readIndex(),E(n*vt<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:n*vt,length:e.dataLength}));let r=[];for(let i=0;i<n;i++)r.push(new vp(this.coder));return th(e,r)}}class Ip extends qe{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){const n=wt.dereference(e,"bool");return t.writeValue(n?1:0)}decode(t){return!!t.readValue()}}class eh extends qe{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=Pt(e);let n=t.writeValue(e.length);return n+=t.writeBytes(e),n}decode(t){return t.readBytes(t.readIndex(),!0)}}class Np extends eh{constructor(t){super("bytes",t)}decode(t){return T(super.decode(t))}}class kp extends qe{constructor(e,n){let r="bytes"+String(e);super(r,r,n,!1);y(this,"size");R(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,n){let r=Pt(wt.dereference(n,this.type));return r.length!==this.size&&this._throwError("incorrect data length",n),e.writeBytes(r)}decode(e){return T(e.readBytes(this.size))}}const Tp=new Uint8Array([]);class Pp extends qe{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return e!=null&&this._throwError("not null",e),t.writeBytes(Tp)}decode(t){return t.readBytes(0),null}}const Op=BigInt(0),Rp=BigInt(1),Sp=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Bp extends qe{constructor(e,n,r){const i=(n?"int":"uint")+e*8;super(i,i,r,!1);y(this,"size");y(this,"signed");R(this,{size:e,signed:n},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,n){let r=P(wt.dereference(n,this.type)),i=Gn(Sp,vt*8);if(this.signed){let o=Gn(i,this.size*8-1);(r>o||r<-(o+Rp))&&this._throwError("value out-of-bounds",n),r=Xl(r,8*vt)}else(r<Op||r>Gn(i,this.size*8))&&this._throwError("value out-of-bounds",n);return e.writeValue(r)}decode(e){let n=Gn(e.readValue(),this.size*8);return this.signed&&(n=go(n,this.size*8)),n}}class Lp extends eh{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,Ke(wt.dereference(e,"string")))}decode(t){return $a(super.decode(t))}}class qi extends qe{constructor(e,n){let r=!1;const i=[];e.forEach(a=>{a.dynamic&&(r=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,n,r);y(this,"coders");R(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(r=>{e.push(r.defaultValue())});const n=this.coders.reduce((r,i)=>{const o=i.localName;return o&&(r[o]||(r[o]=0),r[o]++),r},{});return this.coders.forEach((r,i)=>{let o=r.localName;!o||n[o]!==1||(o==="length"&&(o="_length"),e[o]==null&&(e[o]=e[i]))}),Object.freeze(e)}encode(e,n){const r=wt.dereference(n,"tuple");return $u(e,this.coders,r)}decode(e){return th(e,this.coders)}}function kn(s){return $(Ke(s))}function Up(s){let t=0;function e(){return s[t++]<<8|s[t++]}let n=e(),r=1,i=[0,1];for(let S=1;S<n;S++)i.push(r+=e());let o=e(),a=t;t+=o;let c=0,l=0;function h(){return c==0&&(l=l<<8|s[t++],c=8),l>>--c&1}const f=31,p=2**f,g=p>>>1,b=g>>1,A=p-1;let x=0;for(let S=0;S<f;S++)x=x<<1|h();let I=[],C=0,O=p;for(;;){let S=Math.floor(((x-C+1)*r-1)/O),K=0,ht=n;for(;ht-K>1;){let ft=K+ht>>>1;S<i[ft]?ht=ft:K=ft}if(K==0)break;I.push(K);let J=C+Math.floor(O*i[K]/r),_=C+Math.floor(O*i[K+1]/r)-1;for(;!((J^_)&g);)x=x<<1&A|h(),J=J<<1&A,_=_<<1&A|1;for(;J&~_&b;)x=x&g|x<<1&A>>>1|h(),J=J<<1^g,_=(_^g)<<1|g|1;C=J,O=1+_-J}let U=n-4;return I.map(S=>{switch(S-U){case 3:return U+65792+(s[a++]<<16|s[a++]<<8|s[a++]);case 2:return U+256+(s[a++]<<8|s[a++]);case 1:return U+s[a++];default:return S-1}})}function Dp(s){let t=0;return()=>s[t++]}function nh(s){return Dp(Up(Fp(s)))}function Fp(s){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((r,i)=>t[r.charCodeAt(0)]=i);let e=s.length,n=new Uint8Array(6*e>>3);for(let r=0,i=0,o=0,a=0;r<e;r++)a=a<<6|t[s.charCodeAt(r)],o+=6,o>=8&&(n[i++]=a>>(o-=8));return n}function Mp(s){return s&1?~s>>1:s>>1}function Hp(s,t){let e=Array(s);for(let n=0,r=0;n<s;n++)e[n]=r+=Mp(t());return e}function Tn(s,t=0){let e=[];for(;;){let n=s(),r=s();if(!r)break;t+=n;for(let i=0;i<r;i++)e.push(t+i);t+=r+1}return e}function sh(s){return ei(()=>{let t=Tn(s);if(t.length)return t})}function rh(s){let t=[];for(;;){let e=s();if(e==0)break;t.push(Gp(e,s))}for(;;){let e=s()-1;if(e<0)break;t.push(Vp(e,s))}return t.flat()}function ei(s){let t=[];for(;;){let e=s(t.length);if(!e)break;t.push(e)}return t}function ih(s,t,e){let n=Array(s).fill().map(()=>[]);for(let r=0;r<t;r++)Hp(s,e).forEach((i,o)=>n[o].push(i));return n}function Gp(s,t){let e=1+t(),n=t(),r=ei(t);return ih(r.length,1+s,t).flatMap((o,a)=>{let[c,...l]=o;return Array(r[a]).fill().map((h,f)=>{let p=f*n;return[c+f*e,l.map(g=>g+p)]})})}function Vp(s,t){let e=1+t();return ih(e,1+s,t).map(r=>[r[0],r.slice(1)])}var Ft=nh("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");const cl=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),ll=4;function zp(s){return s.toString(16).toUpperCase().padStart(2,"0")}function oh(s){return`{${zp(s)}}`}function Qp(s){let t=[];for(let e=0,n=s.length;e<n;){let r=s.codePointAt(e);e+=r<65536?1:2,t.push(r)}return t}function ni(s){let e=s.length;if(e<4096)return String.fromCodePoint(...s);let n=[];for(let r=0;r<e;)n.push(String.fromCodePoint(...s.slice(r,r+=4096)));return n.join("")}var hc=nh("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");function Hr(s){return s>>24&255}function ah(s){return s&16777215}const Wp=new Map(sh(hc).flatMap((s,t)=>s.map(e=>[e,t+1<<24]))),jp=new Set(Tn(hc)),ch=new Map,Ba=new Map;for(let[s,t]of rh(hc)){if(!jp.has(s)&&t.length==2){let[e,n]=t,r=Ba.get(e);r||(r=new Map,Ba.set(e,r)),r.set(n,s)}ch.set(s,t.reverse())}const si=44032,xo=4352,vo=4449,Co=4519,lh=19,uh=21,kr=28,Io=uh*kr,Kp=lh*Io,Jp=si+Kp,_p=xo+lh,Yp=vo+uh,qp=Co+kr;function hh(s){return s>=si&&s<Jp}function Zp(s,t){if(s>=xo&&s<_p&&t>=vo&&t<Yp)return si+(s-xo)*Io+(t-vo)*kr;if(hh(s)&&t>Co&&t<qp&&(s-si)%kr==0)return s+(t-Co);{let e=Ba.get(s);return e&&(e=e.get(t),e)?e:-1}}function fh(s){let t=[],e=[],n=!1;function r(i){let o=Wp.get(i);o&&(n=!0,i|=o),t.push(i)}for(let i of s)for(;;){if(i<128)t.push(i);else if(hh(i)){let o=i-si,a=o/Io|0,c=o%Io/kr|0,l=o%kr;r(xo+a),r(vo+c),l>0&&r(Co+l)}else{let o=ch.get(i);o?e.push(...o):r(i)}if(!e.length)break;i=e.pop()}if(n&&t.length>1){let i=Hr(t[0]);for(let o=1;o<t.length;o++){let a=Hr(t[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=t[c+1];if(t[c+1]=t[c],t[c]=l,!c||(i=Hr(t[--c]),i<=a))break}i=Hr(t[o])}}return t}function Xp(s){let t=[],e=[],n=-1,r=0;for(let i of s){let o=Hr(i),a=ah(i);if(n==-1)o==0?n=a:t.push(a);else if(r>0&&r>=o)o==0?(t.push(n,...e),e.length=0,n=a):e.push(a),r=o;else{let c=Zp(n,a);c>=0?n=c:r==0&&o==0?(t.push(n),n=a):(e.push(a),r=o)}}return n>=0&&t.push(n,...e),t}function dh(s){return fh(s).map(ah)}function $p(s){return Xp(fh(s))}const La=65039,ph=".",gh=1,ul=45;function Sr(){return new Set(Tn(Ft))}const tg=new Map(rh(Ft)),eg=Sr(),No=Sr(),hl=new Set(Tn(Ft).map(function(s){return this[s]},[...No])),ng=Sr();Sr();const sg=sh(Ft);function fl(){return new Set([Tn(Ft).map(s=>sg[s]),Tn(Ft)].flat(2))}const rg=Ft(),ri=ei(s=>{let t=ei(Ft).map(e=>e+96);if(t.length){let e=s>=rg;t[0]-=32,t=ni(t),e&&(t=`Restricted[${t}]`);let n=fl(),r=fl(),i=[...n,...r].sort((a,c)=>a-c),o=!Ft();return{N:t,P:n,M:o,R:e,V:new Set(i)}}}),dl=Sr(),ii=new Map;[...dl,...Sr()].sort((s,t)=>s-t).map((s,t,e)=>{let n=Ft(),r=e[t]=n?e[t-n]:{V:[],M:new Map};r.V.push(s),dl.has(s)||ii.set(s,r)});for(let{V:s,M:t}of new Set(ii.values())){let e=[];for(let r of s){let i=ri.filter(a=>a.V.has(r)),o=e.find(({G:a})=>i.some(c=>a.has(c)));o||(o={G:new Set,V:[]},e.push(o)),o.V.push(r),i.forEach(a=>o.G.add(a))}let n=e.flatMap(({G:r})=>[...r]);for(let{G:r,V:i}of e){let o=new Set(n.filter(a=>!r.has(a)));for(let a of i)t.set(a,o)}}let oi=new Set,mh=new Set;for(let s of ri)for(let t of s.V)(oi.has(t)?mh:oi).add(t);for(let s of oi)!ii.has(s)&&!mh.has(s)&&ii.set(s,gh);const ig=new Set([...oi,...dh(oi)]),og=Tn(Ft),ag=wh([]);function wh(s){let t=ei(()=>{let a=Tn(Ft).map(c=>og[c]);if(a.length)return wh(a)}).sort((a,c)=>c.Q.size-a.Q.size),e=Ft(),n=e%3;e=e/3|0;let r=e&1;e>>=1;let i=e&1,o=e&2;return{B:t,V:n,F:r,S:i,C:o,Q:new Set(s)}}class cg extends Array{get is_emoji(){return!0}}function Xo(s,t=oh){let e=[];hg(s[0])&&e.push("◌");let n=0,r=s.length;for(let i=0;i<r;i++){let o=s[i];yh(o)&&(e.push(ni(s.slice(n,i))),e.push(t(o)),n=i+1)}return e.push(ni(s.slice(n,r))),e.join("")}function fc(s){return(yh(s)?"":`${dc(Xo([s]))} `)+oh(s)}function dc(s){return`"${s}"‎`}function lg(s){if(s.length>=4&&s[2]==ul&&s[3]==ul)throw new Error("invalid label extension")}function pl(s){for(let e=s.lastIndexOf(95);e>0;)if(s[--e]!==95)throw new Error("underscore allowed only at start")}function ug(s){let t=s[0],e=cl.get(t);if(e)throw Kr(`leading ${e}`);let n=s.length,r=-1;for(let i=1;i<n;i++){t=s[i];let o=cl.get(t);if(o){if(r==i)throw Kr(`${e} + ${o}`);r=i+1,e=o}}if(r==n)throw Kr(`trailing ${e}`)}function hg(s){return No.has(s)}function yh(s){return ng.has(s)}function fg(s){return mg(dg(s))}function dg(s,t){let e=0;return s.split(ph).map(n=>{let r=Qp(n),i={input:r,offset:e};e+=r.length+1;let o;try{let a=i.tokens=yg(r,$p),c=a.length,l;if(c){let h=a[0],f=c>1||h.is_emoji;if(!f&&h.every(p=>p<128))o=h,pl(o),lg(o),l="ASCII";else if(f&&(i.emoji=!0,h=a.flatMap(p=>p.is_emoji?[]:p)),o=a.flatMap(p=>!t&&p.is_emoji?Ag(p):p),pl(o),!h.length)l="Emoji";else{if(No.has(o[0]))throw Kr("leading combining mark");for(let b=1;b<c;b++){let A=a[b];if(!A.is_emoji&&No.has(A[0]))throw Kr(`emoji + combining mark: "${ni(a[b-1])} + ${Xo([A[0]])}"`)}ug(o);let p=[...new Set(h)],[g]=gg(p);wg(g,h),pg(g,p),l=g.N}}else throw new Error("empty label");i.type=l}catch(a){i.error=a}return i.output=o,i})}function pg(s,t){let e,n=[];for(let r of t){let i=ii.get(r);if(i===gh)return;if(i){let o=i.M.get(r);if(e=e?e.filter(a=>o.has(a)):[...o],!e.length)return}else n.push(r)}if(e){for(let r of e)if(n.every(i=>r.V.has(i)))throw new Error(`whole-script confusable: ${s.N}/${r.N}`)}}function gg(s){let t=ri;for(let e of s){let n=t.filter(r=>r.V.has(e));if(!n.length)throw t===ri?Ah(e):bh(t[0],e);if(t=n,n.length==1)break}return t}function mg(s){return s.map(({input:t,error:e,output:n})=>{if(e){let r=e.message;throw new Error(s.length==1?r:`Invalid label ${dc(Xo(t))}: ${r}`)}return ni(n)}).join(ph)}function Ah(s){return new Error(`disallowed character: ${fc(s)}`)}function bh(s,t){let e=fc(t),n=ri.find(r=>r.P.has(t));return n&&(e=`${n.N} ${e}`),new Error(`illegal mixture: ${s.N} + ${e}`)}function Kr(s){return new Error(`illegal placement: ${s}`)}function wg(s,t){let{V:e,M:n}=s;for(let r of t)if(!e.has(r))throw bh(s,r);if(n){let r=dh(t);for(let i=1,o=r.length;i<o;i++)if(hl.has(r[i])){let a=i+1;for(let c;a<o&&hl.has(c=r[a]);a++)for(let l=i;l<a;l++)if(r[l]==c)throw new Error(`non-spacing marks: repeated ${fc(c)}`);if(a-i>ll)throw new Error(`non-spacing marks: too many ${dc(Xo(r.slice(i-1,a)))} (${a-i}/${ll})`);i=a}}}function yg(s,t){let e=[],n=[];for(s=s.slice().reverse();s.length;){let r=bg(s);if(r)n.length&&(e.push(t(n)),n=[]),e.push(r);else{let i=s.pop();if(ig.has(i))n.push(i);else{let o=tg.get(i);if(o)n.push(...o);else if(!eg.has(i))throw Ah(i)}}}return n.length&&e.push(t(n)),e}function Ag(s){return s.filter(t=>t!=La)}function bg(s,t){let e=ag,n,r,i=[],o=s.length;for(t&&(t.length=0);o;){let a=s[--o];if(e=e.B.find(c=>c.Q.has(a)),!e)break;if(e.S)r=a;else if(e.C&&a===r)break;i.push(a),e.F&&(i.push(La),o>0&&s[o-1]==La&&o--),e.V&&(n=Eg(i,e),t&&t.push(...s.slice(o).reverse()),s.length=o)}return n}function Eg(s,t){let e=cg.from(s);return t.V==2&&e.splice(1,1),e}const Eh=new Uint8Array(32);Eh.fill(0);function gl(s){return m(s.length!==0,"invalid ENS name; empty component","comp",s),s}function xh(s){const t=Ke(xg(s)),e=[];if(s.length===0)return e;let n=0;for(let r=0;r<t.length;r++)t[r]===46&&(e.push(gl(t.slice(n,r))),n=r+1);return m(n<t.length,"invalid ENS name; empty component","name",s),e.push(gl(t.slice(n))),e}function xg(s){try{return fg(s)}catch(t){m(!1,`invalid ENS name (${t.message})`,"name",s)}}function Ua(s){m(typeof s=="string","invalid ENS name; not a string","name",s);let t=Eh;const e=xh(s);for(;e.length;)t=$(rt([t,$(e.pop())]));return T(t)}function vg(s){return T(rt(xh(s).map(t=>{if(t.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const e=new Uint8Array(t.length+1);return e.set(t,1),e[0]=e.length-1,e})))+"00"}function ha(s,t){return{address:V(s),storageKeys:t.map((e,n)=>(m(tt(e,32),"invalid slot",`storageKeys[${n}]`,e),e.toLowerCase()))}}function ys(s){if(Array.isArray(s))return s.map((e,n)=>Array.isArray(e)?(m(e.length===2,"invalid slot set",`value[${n}]`,e),ha(e[0],e[1])):(m(e!=null&&typeof e=="object","invalid address-slot set","value",s),ha(e.address,e.storageKeys)));m(s!=null&&typeof s=="object","invalid access list","value",s);const t=Object.keys(s).map(e=>{const n=s[e].reduce((r,i)=>(r[i]=!0,r),{});return ha(e,Object.keys(n).sort())});return t.sort((e,n)=>e.address.localeCompare(n.address)),t}function Cg(s){let t;return typeof s=="string"?t=ti.computePublicKey(s,!1):t=s.publicKey,V($("0x"+t.substring(4)).substring(26))}function Ig(s,t){return Cg(ti.recoverPublicKey(s,t))}const kt=BigInt(0),Ng=BigInt(2),kg=BigInt(27),Tg=BigInt(28),Pg=BigInt(35),Og=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function pc(s){return s==="0x"?null:V(s)}function vh(s,t){try{return ys(s)}catch(e){m(!1,e.message,t,s)}}function $o(s,t){return s==="0x"?0:D(s,t)}function xt(s,t){if(s==="0x")return kt;const e=P(s,t);return m(e<=Og,"value exceeds uint size",t,e),e}function lt(s,t){const e=P(s,"value"),n=Ut(e);return m(n.length<=32,"value too large",`tx.${t}`,e),n}function Ch(s){return ys(s).map(t=>[t.address,t.storageKeys])}function Rg(s){const t=tc(s);m(Array.isArray(t)&&(t.length===9||t.length===6),"invalid field count for legacy transaction","data",s);const e={type:0,nonce:$o(t[0],"nonce"),gasPrice:xt(t[1],"gasPrice"),gasLimit:xt(t[2],"gasLimit"),to:pc(t[3]),value:xt(t[4],"value"),data:T(t[5]),chainId:kt};if(t.length===6)return e;const n=xt(t[6],"v"),r=xt(t[7],"r"),i=xt(t[8],"s");if(r===kt&&i===kt)e.chainId=n;else{let o=(n-Pg)/Ng;o<kt&&(o=kt),e.chainId=o,m(o!==kt||n===kg||n===Tg,"non-canonical legacy v","v",t[6]),e.signature=ce.from({r:ds(t[7],32),s:ds(t[8],32),v:n}),e.hash=$(s)}return e}function ml(s,t){const e=[lt(s.nonce||0,"nonce"),lt(s.gasPrice||0,"gasPrice"),lt(s.gasLimit||0,"gasLimit"),s.to!=null?V(s.to):"0x",lt(s.value||0,"value"),s.data||"0x"];let n=kt;if(s.chainId!=kt)n=P(s.chainId,"tx.chainId"),m(!t||t.networkV==null||t.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",t);else if(s.signature){const i=s.signature.legacyChainId;i!=null&&(n=i)}if(!t)return n!==kt&&(e.push(Ut(n)),e.push("0x"),e.push("0x")),qr(e);let r=BigInt(27+t.yParity);return n!==kt?r=ce.getChainIdV(n,t.v):BigInt(t.v)!==r&&m(!1,"tx.chainId/sig.v mismatch","sig",t),e.push(Ut(r)),e.push(Ut(t.r)),e.push(Ut(t.s)),qr(e)}function Ih(s,t){let e;try{if(e=$o(t[0],"yParity"),e!==0&&e!==1)throw new Error("bad yParity")}catch{m(!1,"invalid yParity","yParity",t[0])}const n=ds(t[1],32),r=ds(t[2],32),i=ce.from({r:n,s:r,yParity:e});s.signature=i}function Sg(s){const t=tc(L(s).slice(1));m(Array.isArray(t)&&(t.length===9||t.length===12),"invalid field count for transaction type: 2","data",T(s));const e=xt(t[2],"maxPriorityFeePerGas"),n=xt(t[3],"maxFeePerGas"),r={type:2,chainId:xt(t[0],"chainId"),nonce:$o(t[1],"nonce"),maxPriorityFeePerGas:e,maxFeePerGas:n,gasPrice:null,gasLimit:xt(t[4],"gasLimit"),to:pc(t[5]),value:xt(t[6],"value"),data:T(t[7]),accessList:vh(t[8],"accessList")};return t.length===9||(r.hash=$(s),Ih(r,t.slice(9))),r}function wl(s,t){const e=[lt(s.chainId||0,"chainId"),lt(s.nonce||0,"nonce"),lt(s.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),lt(s.maxFeePerGas||0,"maxFeePerGas"),lt(s.gasLimit||0,"gasLimit"),s.to!=null?V(s.to):"0x",lt(s.value||0,"value"),s.data||"0x",Ch(s.accessList||[])];return t&&(e.push(lt(t.yParity,"yParity")),e.push(Ut(t.r)),e.push(Ut(t.s))),rt(["0x02",qr(e)])}function Bg(s){const t=tc(L(s).slice(1));m(Array.isArray(t)&&(t.length===8||t.length===11),"invalid field count for transaction type: 1","data",T(s));const e={type:1,chainId:xt(t[0],"chainId"),nonce:$o(t[1],"nonce"),gasPrice:xt(t[2],"gasPrice"),gasLimit:xt(t[3],"gasLimit"),to:pc(t[4]),value:xt(t[5],"value"),data:T(t[6]),accessList:vh(t[7],"accessList")};return t.length===8||(e.hash=$(s),Ih(e,t.slice(8))),e}function yl(s,t){const e=[lt(s.chainId||0,"chainId"),lt(s.nonce||0,"nonce"),lt(s.gasPrice||0,"gasPrice"),lt(s.gasLimit||0,"gasLimit"),s.to!=null?V(s.to):"0x",lt(s.value||0,"value"),s.data||"0x",Ch(s.accessList||[])];return t&&(e.push(lt(t.yParity,"recoveryParam")),e.push(Ut(t.r)),e.push(Ut(t.s))),rt(["0x01",qr(e)])}var De,_s,Ys,qs,Zs,Xs,$s,tr,er,nr,sr,rr;const nn=class nn{constructor(){w(this,De,void 0);w(this,_s,void 0);w(this,Ys,void 0);w(this,qs,void 0);w(this,Zs,void 0);w(this,Xs,void 0);w(this,$s,void 0);w(this,tr,void 0);w(this,er,void 0);w(this,nr,void 0);w(this,sr,void 0);w(this,rr,void 0);d(this,De,null),d(this,_s,null),d(this,qs,0),d(this,Zs,BigInt(0)),d(this,Xs,null),d(this,$s,null),d(this,tr,null),d(this,Ys,"0x"),d(this,er,BigInt(0)),d(this,nr,BigInt(0)),d(this,sr,null),d(this,rr,null)}get type(){return u(this,De)}set type(t){switch(t){case null:d(this,De,null);break;case 0:case"legacy":d(this,De,0);break;case 1:case"berlin":case"eip-2930":d(this,De,1);break;case 2:case"london":case"eip-1559":d(this,De,2);break;default:m(!1,"unsupported transaction type","type",t)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559"}return null}get to(){return u(this,_s)}set to(t){d(this,_s,t==null?null:V(t))}get nonce(){return u(this,qs)}set nonce(t){d(this,qs,D(t,"value"))}get gasLimit(){return u(this,Zs)}set gasLimit(t){d(this,Zs,P(t))}get gasPrice(){const t=u(this,Xs);return t==null&&(this.type===0||this.type===1)?kt:t}set gasPrice(t){d(this,Xs,t==null?null:P(t,"gasPrice"))}get maxPriorityFeePerGas(){const t=u(this,$s);return t??(this.type===2?kt:null)}set maxPriorityFeePerGas(t){d(this,$s,t==null?null:P(t,"maxPriorityFeePerGas"))}get maxFeePerGas(){const t=u(this,tr);return t??(this.type===2?kt:null)}set maxFeePerGas(t){d(this,tr,t==null?null:P(t,"maxFeePerGas"))}get data(){return u(this,Ys)}set data(t){d(this,Ys,T(t))}get value(){return u(this,er)}set value(t){d(this,er,P(t,"value"))}get chainId(){return u(this,nr)}set chainId(t){d(this,nr,P(t))}get signature(){return u(this,sr)||null}set signature(t){d(this,sr,t==null?null:ce.from(t))}get accessList(){const t=u(this,rr)||null;return t??(this.type===1||this.type===2?[]:null)}set accessList(t){d(this,rr,t==null?null:ys(t))}get hash(){return this.signature==null?null:$(this.serialized)}get unsignedHash(){return $(this.unsignedSerialized)}get from(){return this.signature==null?null:Ig(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:ti.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){switch(E(this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"}),this.inferType()){case 0:return ml(this,this.signature);case 1:return yl(this,this.signature);case 2:return wl(this,this.signature)}E(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get unsignedSerialized(){switch(this.inferType()){case 0:return ml(this);case 1:return yl(this);case 2:return wl(this)}E(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".unsignedSerialized"})}inferType(){return this.inferTypes().pop()}inferTypes(){const t=this.gasPrice!=null,e=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null;this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&E(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),E(!e||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),E(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const r=[];return this.type!=null?r.push(this.type):e?r.push(2):t?(r.push(1),n||r.push(0)):n?(r.push(1),r.push(2)):(r.push(0),r.push(1),r.push(2)),r.sort(),r}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}clone(){return nn.from(this)}toJSON(){const t=e=>e==null?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:t(this.gasLimit),gasPrice:t(this.gasPrice),maxPriorityFeePerGas:t(this.maxPriorityFeePerGas),maxFeePerGas:t(this.maxFeePerGas),value:t(this.value),chainId:t(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(t){if(t==null)return new nn;if(typeof t=="string"){const n=L(t);if(n[0]>=127)return nn.from(Rg(n));switch(n[0]){case 1:return nn.from(Bg(n));case 2:return nn.from(Sg(n))}E(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const e=new nn;return t.type!=null&&(e.type=t.type),t.to!=null&&(e.to=t.to),t.nonce!=null&&(e.nonce=t.nonce),t.gasLimit!=null&&(e.gasLimit=t.gasLimit),t.gasPrice!=null&&(e.gasPrice=t.gasPrice),t.maxPriorityFeePerGas!=null&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas),t.maxFeePerGas!=null&&(e.maxFeePerGas=t.maxFeePerGas),t.data!=null&&(e.data=t.data),t.value!=null&&(e.value=t.value),t.chainId!=null&&(e.chainId=t.chainId),t.signature!=null&&(e.signature=ce.from(t.signature)),t.accessList!=null&&(e.accessList=t.accessList),t.hash!=null&&(m(e.isSigned(),"unsigned transaction cannot define hash","tx",t),m(e.hash===t.hash,"hash mismatch","tx",t)),t.from!=null&&(m(e.isSigned(),"unsigned transaction cannot define from","tx",t),m(e.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),e}};De=new WeakMap,_s=new WeakMap,Ys=new WeakMap,qs=new WeakMap,Zs=new WeakMap,Xs=new WeakMap,$s=new WeakMap,tr=new WeakMap,er=new WeakMap,nr=new WeakMap,sr=new WeakMap,rr=new WeakMap;let ko=nn;const Nh=new Uint8Array(32);Nh.fill(0);const Lg=BigInt(-1),kh=BigInt(0),Th=BigInt(1),Ug=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Dg(s){const t=L(s),e=t.length%32;return e?rt([t,Nh.slice(e)]):T(t)}const Fg=Nn(Th,32),Mg=Nn(kh,32),Al={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},fa=["name","version","chainId","verifyingContract","salt"];function bl(s){return function(t){return m(typeof t=="string",`invalid domain value for ${JSON.stringify(s)}`,`domain.${s}`,t),t}}const Hg={name:bl("name"),version:bl("version"),chainId:function(s){const t=P(s,"domain.chainId");return m(t>=0,"invalid chain ID","domain.chainId",s),Number.isSafeInteger(t)?Number(t):ks(t)},verifyingContract:function(s){try{return V(s).toLowerCase()}catch{}m(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",s)},salt:function(s){const t=L(s,"domain.salt");return m(t.length===32,'invalid domain value "salt"',"domain.salt",s),T(t)}};function da(s){{const t=s.match(/^(u?)int(\d*)$/);if(t){const e=t[1]==="",n=parseInt(t[2]||"256");m(n%8===0&&n!==0&&n<=256&&(t[2]==null||t[2]===String(n)),"invalid numeric width","type",s);const r=Gn(Ug,e?n-1:n),i=e?(r+Th)*Lg:kh;return function(o){const a=P(o,"value");return m(a>=i&&a<=r,`value out-of-bounds for ${s}`,"value",a),Nn(e?Xl(a,256):a,32)}}}{const t=s.match(/^bytes(\d+)$/);if(t){const e=parseInt(t[1]);return m(e!==0&&e<=32&&t[1]===String(e),"invalid bytes width","type",s),function(n){const r=L(n);return m(r.length===e,`invalid length for ${s}`,"value",n),Dg(n)}}}switch(s){case"address":return function(t){return ds(V(t),32)};case"bool":return function(t){return t?Fg:Mg};case"bytes":return function(t){return $(t)};case"string":return function(t){return kn(t)}}return null}function El(s,t){return`${s}(${t.map(({name:e,type:n})=>n+" "+e).join(",")})`}var wi,Fe,ir,Do,Ph;const zt=class zt{constructor(t){w(this,Do);y(this,"primaryType");w(this,wi,void 0);w(this,Fe,void 0);w(this,ir,void 0);d(this,wi,JSON.stringify(t)),d(this,Fe,new Map),d(this,ir,new Map);const e=new Map,n=new Map,r=new Map;Object.keys(t).forEach(a=>{e.set(a,new Set),n.set(a,[]),r.set(a,new Set)});for(const a in t){const c=new Set;for(const l of t[a]){m(!c.has(l.name),`duplicate variable name ${JSON.stringify(l.name)} in ${JSON.stringify(a)}`,"types",t),c.add(l.name);const h=l.type.match(/^([^\x5b]*)(\x5b|$)/)[1]||null;m(h!==a,`circular type reference to ${JSON.stringify(h)}`,"types",t),!da(h)&&(m(n.has(h),`unknown type ${JSON.stringify(h)}`,"types",t),n.get(h).push(a),e.get(a).add(h))}}const i=Array.from(n.keys()).filter(a=>n.get(a).length===0);m(i.length!==0,"missing primary type","types",t),m(i.length===1,`ambiguous primary types or unused types: ${i.map(a=>JSON.stringify(a)).join(", ")}`,"types",t),R(this,{primaryType:i[0]});function o(a,c){m(!c.has(a),`circular type reference to ${JSON.stringify(a)}`,"types",t),c.add(a);for(const l of e.get(a))if(n.has(l)){o(l,c);for(const h of c)r.get(h).add(l)}c.delete(a)}o(this.primaryType,new Set);for(const[a,c]of r){const l=Array.from(c);l.sort(),u(this,Fe).set(a,El(a,t[a])+l.map(h=>El(h,t[h])).join(""))}}get types(){return JSON.parse(u(this,wi))}getEncoder(t){let e=u(this,ir).get(t);return e||(e=v(this,Do,Ph).call(this,t),u(this,ir).set(t,e)),e}encodeType(t){const e=u(this,Fe).get(t);return m(e,`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return $(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,n){if(da(t))return n(t,e);const r=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r)return m(!r[3]||parseInt(r[3])===e.length,`array length mismatch; expected length ${parseInt(r[3])}`,"value",e),e.map(o=>this._visit(r[1],o,n));const i=this.types[t];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,e[a],n),o),{});m(!1,`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new zt(t)}static getPrimaryType(t){return zt.from(t).primaryType}static hashStruct(t,e,n){return zt.from(e).hashStruct(t,n)}static hashDomain(t){const e=[];for(const n in t){if(t[n]==null)continue;const r=Al[n];m(r,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",t),e.push({name:n,type:r})}return e.sort((n,r)=>fa.indexOf(n.name)-fa.indexOf(r.name)),zt.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,n){return rt(["0x1901",zt.hashDomain(t),zt.from(e).hash(n)])}static hash(t,e,n){return $(zt.encode(t,e,n))}static async resolveNames(t,e,n,r){t=Object.assign({},t);for(const a in t)t[a]==null&&delete t[a];const i={};t.verifyingContract&&!tt(t.verifyingContract,20)&&(i[t.verifyingContract]="0x");const o=zt.from(e);o.visit(n,(a,c)=>(a==="address"&&!tt(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await r(a);return t.verifyingContract&&i[t.verifyingContract]&&(t.verifyingContract=i[t.verifyingContract]),n=o.visit(n,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:t,value:n}}static getPayload(t,e,n){zt.hashDomain(t);const r={},i=[];fa.forEach(c=>{const l=t[c];l!=null&&(r[c]=Hg[c](l),i.push({name:c,type:Al[c]}))});const o=zt.from(e),a=Object.assign({},e);return m(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",e),a.EIP712Domain=i,o.encode(n),{types:a,domain:r,primaryType:o.primaryType,message:o.visit(n,(c,l)=>{if(c.match(/^bytes(\d*)/))return T(L(l));if(c.match(/^u?int/))return P(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return m(typeof l=="string","invalid string","value",l),l}m(!1,"unsupported type","type",c)})}}};wi=new WeakMap,Fe=new WeakMap,ir=new WeakMap,Do=new WeakSet,Ph=function(t){{const r=da(t);if(r)return r}const e=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(e){const r=e[1],i=this.getEncoder(r);return o=>{m(!e[3]||parseInt(e[3])===o.length,`array length mismatch; expected length ${parseInt(e[3])}`,"value",o);let a=o.map(i);return u(this,Fe).has(r)&&(a=a.map($)),$(rt(a))}}const n=this.types[t];if(n){const r=kn(u(this,Fe).get(t));return i=>{const o=n.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return u(this,Fe).has(c)?$(l):l});return o.unshift(r),rt(o)}}m(!1,`unknown type: ${t}`,"type",t)};let To=zt;function Ct(s){const t=new Set;return s.forEach(e=>t.add(e)),Object.freeze(t)}const Oh="constant external internal payable private public pure view",Gg=Ct(Oh.split(" ")),Rh="constructor error event fallback function receive struct",Sh=Ct(Rh.split(" ")),Bh="calldata memory storage payable indexed",Vg=Ct(Bh.split(" ")),zg="tuple returns",Qg=[Rh,Bh,zg,Oh].join(" "),Wg=Ct(Qg.split(" ")),jg={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Kg=new RegExp("^(\\s*)"),Jg=new RegExp("^([0-9]+)"),_g=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Lh=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Uh=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var ct,se,yi,Da;const Fo=class Fo{constructor(t){w(this,yi);w(this,ct,void 0);w(this,se,void 0);d(this,ct,0),d(this,se,t.slice())}get offset(){return u(this,ct)}get length(){return u(this,se).length-u(this,ct)}clone(){return new Fo(u(this,se))}reset(){d(this,ct,0)}popKeyword(t){const e=this.peek();if(e.type!=="KEYWORD"||!t.has(e.text))throw new Error(`expected keyword ${e.text}`);return this.pop().text}popType(t){if(this.peek().type!==t)throw new Error(`expected ${t}; got ${JSON.stringify(this.peek())}`);return this.pop().text}popParen(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=v(this,yi,Da).call(this,u(this,ct)+1,t.match+1);return d(this,ct,t.match+1),e}popParams(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=[];for(;u(this,ct)<t.match-1;){const n=this.peek().linkNext;e.push(v(this,yi,Da).call(this,u(this,ct)+1,n)),d(this,ct,n)}return d(this,ct,t.match+1),e}peek(){if(u(this,ct)>=u(this,se).length)throw new Error("out-of-bounds");return u(this,se)[u(this,ct)]}peekKeyword(t){const e=this.peekType("KEYWORD");return e!=null&&t.has(e)?e:null}peekType(t){if(this.length===0)return null;const e=this.peek();return e.type===t?e.text:null}pop(){const t=this.peek();return Br(this,ct)._++,t}toString(){const t=[];for(let e=u(this,ct);e<u(this,se).length;e++){const n=u(this,se)[e];t.push(`${n.type}:${n.text}`)}return`<TokenString ${t.join(" ")}>`}};ct=new WeakMap,se=new WeakMap,yi=new WeakSet,Da=function(t=0,e=0){return new Fo(u(this,se).slice(t,e).map(n=>Object.freeze(Object.assign({},n,{match:n.match-t,linkBack:n.linkBack-t,linkNext:n.linkNext-t}))))};let le=Fo;function On(s){const t=[],e=o=>{const a=i<s.length?JSON.stringify(s[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let n=[],r=[],i=0;for(;i<s.length;){let o=s.substring(i),a=o.match(Kg);a&&(i+=a[1].length,o=s.substring(i));const c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};t.push(c);let l=jg[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")n.push(t.length-1),r.push(t.length-1);else if(l=="CLOSE_PAREN")n.length===0&&e("no matching open bracket"),c.match=n.pop(),t[c.match].match=t.length-1,c.depth--,c.linkBack=r.pop(),t[c.linkBack].linkNext=t.length-1;else if(l==="COMMA")c.linkBack=r.pop(),t[c.linkBack].linkNext=t.length-1,r.push(t.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let h=t.pop().text;if(t.length>0&&t[t.length-1].type==="NUMBER"){const f=t.pop().text;h=f+h,t[t.length-1].value=D(f)}if(t.length===0||t[t.length-1].type!=="BRACKET")throw new Error("missing opening bracket");t[t.length-1].text+=h}continue}if(a=o.match(_g),a){if(c.text=a[1],i+=c.text.length,Wg.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(Uh)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(Jg),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new le(t.map(o=>Object.freeze(o)))}function xl(s,t){let e=[];for(const n in t.keys())s.has(n)&&e.push(n);if(e.length>1)throw new Error(`conflicting types: ${e.join(", ")}`)}function ta(s,t){if(t.peekKeyword(Sh)){const e=t.pop().text;if(e!==s)throw new Error(`expected ${s}, got ${e}`)}return t.popType("ID")}function Ye(s,t){const e=new Set;for(;;){const n=s.peekType("KEYWORD");if(n==null||t&&!t.has(n))break;if(s.pop(),e.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);e.add(n)}return Object.freeze(e)}function Dh(s){let t=Ye(s,Gg);return xl(t,Ct("constant payable nonpayable".split(" "))),xl(t,Ct("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function Je(s,t){return s.popParams().map(e=>ut.from(e,t))}function Fh(s){if(s.peekType("AT")){if(s.pop(),s.peekType("NUMBER"))return P(s.pop().text);throw new Error("invalid gas")}return null}function gs(s){if(s.length)throw new Error(`unexpected tokens: ${s.toString()}`)}const Yg=new RegExp(/^(.*)\[([0-9]*)\]$/);function vl(s){const t=s.match(Uh);if(m(t,"invalid type","type",s),s==="uint")return"uint256";if(s==="int")return"int256";if(t[2]){const e=parseInt(t[2]);m(e!==0&&e<=32,"invalid bytes length","type",s)}else if(t[3]){const e=parseInt(t[3]);m(e!==0&&e<=256&&e%8===0,"invalid numeric width","type",s)}return s}const X={},Ot=Symbol.for("_ethers_internal"),Cl="_ParamTypeInternal",Il="_ErrorInternal",Nl="_EventInternal",kl="_ConstructorInternal",Tl="_FallbackInternal",Pl="_FunctionInternal",Ol="_StructInternal";var or,oo;const Qt=class Qt{constructor(t,e,n,r,i,o,a,c){w(this,or);y(this,"name");y(this,"type");y(this,"baseType");y(this,"indexed");y(this,"components");y(this,"arrayLength");y(this,"arrayChildren");if(Bi(t,X,"ParamType"),Object.defineProperty(this,Ot,{value:Cl}),o&&(o=Object.freeze(o.slice())),r==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(r==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");R(this,{name:e,type:n,baseType:r,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(t){if(t==null&&(t="sighash"),t==="json"){let n={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(n.indexed=this.indexed),this.isTuple()&&(n.components=this.components.map(r=>JSON.parse(r.format(t)))),JSON.stringify(n)}let e="";return this.isArray()?(e+=this.arrayChildren.format(t),e+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?(t!=="sighash"&&(e+=this.type),e+="("+this.components.map(n=>n.format(t)).join(t==="full"?", ":",")+")"):e+=this.type,t!=="sighash"&&(this.indexed===!0&&(e+=" indexed"),t==="full"&&this.name&&(e+=" "+this.name)),e}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(t,e){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return t.map(r=>n.arrayChildren.walk(r,e))}if(this.isTuple()){if(!Array.isArray(t))throw new Error("invalid tuple value");if(t.length!==this.components.length)throw new Error("array is wrong length");const n=this;return t.map((r,i)=>n.components[i].walk(r,e))}return e(this.type,t)}async walkAsync(t,e){const n=[],r=[t];return v(this,or,oo).call(this,n,t,e,i=>{r[0]=i}),n.length&&await Promise.all(n),r[0]}static from(t,e){if(Qt.isParamType(t))return t;if(typeof t=="string")return Qt.from(On(t),e);if(t instanceof le){let a="",c="",l=null;Ye(t,Ct(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(c="tuple",l=t.popParams().map(A=>Qt.from(A)),a=`tuple(${l.map(A=>A.format()).join(",")})`):(a=vl(t.popType("TYPE")),c=a);let h=null,f=null;for(;t.length&&t.peekType("BRACKET");){const A=t.pop();h=new Qt(X,"",a,c,null,l,f,h),f=A.value,a+=A.text,c="array",l=null}let p=null;if(Ye(t,Vg).has("indexed")){if(!e)throw new Error("");p=!0}const b=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new Qt(X,b,a,c,p,l,f,h)}const n=t.name;m(!n||typeof n=="string"&&n.match(Lh),"invalid name","obj.name",n);let r=t.indexed;r!=null&&(m(e,"parameter cannot be indexed","obj.indexed",t.indexed),r=!!r);let i=t.type,o=i.match(Yg);if(o){const a=parseInt(o[2]||"-1"),c=Qt.from({type:o[1],components:t.components});return new Qt(X,n||"",i,"array",r,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=t.components!=null?t.components.map(l=>Qt.from(l)):null;return new Qt(X,n||"",i,"tuple",r,a,null,null)}return i=vl(t.type),new Qt(X,n||"",i,i,r,null,null,null)}static isParamType(t){return t&&t[Ot]===Cl}};or=new WeakSet,oo=function(t,e,n,r){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=e.slice();a.forEach((c,l)=>{var h;v(h=o,or,oo).call(h,t,c,n,f=>{a[l]=f})}),r(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(e))a=e.slice();else{if(e==null||typeof e!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in e))throw new Error(`missing value for component ${c.name}`);return e[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var h;v(h=o[l],or,oo).call(h,t,c,n,f=>{a[l]=f})}),r(a);return}const i=n(this.type,e);i.then?t.push(async function(){r(await i)}()):r(i)};let ut=Qt;class ms{constructor(t,e,n){y(this,"type");y(this,"inputs");Bi(t,X,"Fragment"),n=Object.freeze(n.slice()),R(this,{type:e,inputs:n})}static from(t){if(typeof t=="string"){try{ms.from(JSON.parse(t))}catch{}return ms.from(On(t))}if(t instanceof le)switch(t.peekKeyword(Sh)){case"constructor":return je.from(t);case"error":return Tt.from(t);case"event":return Ee.from(t);case"fallback":case"receive":return Pe.from(t);case"function":return xe.from(t);case"struct":return fs.from(t)}else if(typeof t=="object"){switch(t.type){case"constructor":return je.from(t);case"error":return Tt.from(t);case"event":return Ee.from(t);case"fallback":case"receive":return Pe.from(t);case"function":return xe.from(t);case"struct":return fs.from(t)}E(!1,`unsupported type: ${t.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}m(!1,"unsupported frgament object","obj",t)}static isConstructor(t){return je.isFragment(t)}static isError(t){return Tt.isFragment(t)}static isEvent(t){return Ee.isFragment(t)}static isFunction(t){return xe.isFragment(t)}static isStruct(t){return fs.isFragment(t)}}class ea extends ms{constructor(e,n,r,i){super(e,n,i);y(this,"name");m(typeof r=="string"&&r.match(Lh),"invalid identifier","name",r),i=Object.freeze(i.slice()),R(this,{name:r})}}function ai(s,t){return"("+t.map(e=>e.format(s)).join(s==="full"?", ":",")+")"}class Tt extends ea{constructor(t,e,n){super(t,"error",e,n),Object.defineProperty(this,Ot,{value:Il})}get selector(){return kn(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(t)))});const e=[];return t!=="sighash"&&e.push("error"),e.push(this.name+ai(t,this.inputs)),e.join(" ")}static from(t){if(Tt.isFragment(t))return t;if(typeof t=="string")return Tt.from(On(t));if(t instanceof le){const e=ta("error",t),n=Je(t);return gs(t),new Tt(X,e,n)}return new Tt(X,t.name,t.inputs?t.inputs.map(ut.from):[])}static isFragment(t){return t&&t[Ot]===Il}}class Ee extends ea{constructor(e,n,r,i){super(e,"event",n,r);y(this,"anonymous");Object.defineProperty(this,Ot,{value:Nl}),R(this,{anonymous:i})}get topicHash(){return kn(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("event"),n.push(this.name+ai(e,this.inputs)),e!=="sighash"&&this.anonymous&&n.push("anonymous"),n.join(" ")}static getTopicHash(e,n){return n=(n||[]).map(i=>ut.from(i)),new Ee(X,e,n,!1).topicHash}static from(e){if(Ee.isFragment(e))return e;if(typeof e=="string")return Ee.from(On(e));if(e instanceof le){const n=ta("event",e),r=Je(e,!0),i=!!Ye(e,Ct(["anonymous"])).has("anonymous");return gs(e),new Ee(X,n,r,i)}return new Ee(X,e.name,e.inputs?e.inputs.map(n=>ut.from(n,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[Ot]===Nl}}class je extends ms{constructor(e,n,r,i,o){super(e,n,r);y(this,"payable");y(this,"gas");Object.defineProperty(this,Ot,{value:kl}),R(this,{payable:i,gas:o})}format(e){if(E(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[`constructor${ai(e,this.inputs)}`];return n.push(this.payable?"payable":"nonpayable"),this.gas!=null&&n.push(`@${this.gas.toString()}`),n.join(" ")}static from(e){if(je.isFragment(e))return e;if(typeof e=="string")return je.from(On(e));if(e instanceof le){Ye(e,Ct(["constructor"]));const n=Je(e),r=!!Ye(e,Ct(["payable"])).has("payable"),i=Fh(e);return gs(e),new je(X,"constructor",n,r,i)}return new je(X,"constructor",e.inputs?e.inputs.map(ut.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[Ot]===kl}}class Pe extends ms{constructor(e,n,r){super(e,"fallback",n);y(this,"payable");Object.defineProperty(this,Ot,{value:Tl}),R(this,{payable:r})}format(e){const n=this.inputs.length===0?"receive":"fallback";if(e==="json"){const r=this.payable?"payable":"nonpayable";return JSON.stringify({type:n,stateMutability:r})}return`${n}()${this.payable?" payable":""}`}static from(e){if(Pe.isFragment(e))return e;if(typeof e=="string")return Pe.from(On(e));if(e instanceof le){const n=e.toString(),r=e.peekKeyword(Ct(["fallback","receive"]));if(m(r,"type must be fallback or receive","obj",n),e.popKeyword(Ct(["fallback","receive"]))==="receive"){const c=Je(e);return m(c.length===0,"receive cannot have arguments","obj.inputs",c),Ye(e,Ct(["payable"])),gs(e),new Pe(X,[],!0)}let o=Je(e);o.length?m(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[ut.from("bytes")];const a=Dh(e);if(m(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),Ye(e,Ct(["returns"])).has("returns")){const c=Je(e);m(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return gs(e),new Pe(X,o,a==="payable")}if(e.type==="receive")return new Pe(X,[],!0);if(e.type==="fallback"){const n=[ut.from("bytes")],r=e.stateMutability==="payable";return new Pe(X,n,r)}m(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[Ot]===Tl}}class xe extends ea{constructor(e,n,r,i,o,a){super(e,"function",n,i);y(this,"constant");y(this,"outputs");y(this,"stateMutability");y(this,"payable");y(this,"gas");Object.defineProperty(this,Ot,{value:Pl}),o=Object.freeze(o.slice()),R(this,{constant:r==="view"||r==="pure",gas:a,outputs:o,payable:r==="payable",stateMutability:r})}get selector(){return kn(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(r=>JSON.parse(r.format(e))),outputs:this.outputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("function"),n.push(this.name+ai(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&n.push(this.stateMutability),this.outputs&&this.outputs.length&&(n.push("returns"),n.push(ai(e,this.outputs))),this.gas!=null&&n.push(`@${this.gas.toString()}`)),n.join(" ")}static getSelector(e,n){return n=(n||[]).map(i=>ut.from(i)),new xe(X,e,"view",n,[],null).selector}static from(e){if(xe.isFragment(e))return e;if(typeof e=="string")return xe.from(On(e));if(e instanceof le){const r=ta("function",e),i=Je(e),o=Dh(e);let a=[];Ye(e,Ct(["returns"])).has("returns")&&(a=Je(e));const c=Fh(e);return gs(e),new xe(X,r,o,i,a,c)}let n=e.stateMutability;return n==null&&(n="payable",typeof e.constant=="boolean"?(n="view",e.constant||(n="payable",typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable")),new xe(X,e.name,n,e.inputs?e.inputs.map(ut.from):[],e.outputs?e.outputs.map(ut.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[Ot]===Pl}}class fs extends ea{constructor(t,e,n){super(t,"struct",e,n),Object.defineProperty(this,Ot,{value:Ol})}format(){throw new Error("@TODO")}static from(t){if(typeof t=="string")return fs.from(On(t));if(t instanceof le){const e=ta("struct",t),n=Je(t);return gs(t),new fs(X,e,n)}return new fs(X,t.name,t.inputs?t.inputs.map(ut.from):[])}static isFragment(t){return t&&t[Ot]===Ol}}const ue=new Map;ue.set(0,"GENERIC_PANIC");ue.set(1,"ASSERT_FALSE");ue.set(17,"OVERFLOW");ue.set(18,"DIVIDE_BY_ZERO");ue.set(33,"ENUM_RANGE_ERROR");ue.set(34,"BAD_STORAGE_DATA");ue.set(49,"STACK_UNDERFLOW");ue.set(50,"ARRAY_RANGE_ERROR");ue.set(65,"OUT_OF_MEMORY");ue.set(81,"UNINITIALIZED_FUNCTION_CALL");const qg=new RegExp(/^bytes([0-9]*)$/),Zg=new RegExp(/^(u?int)([0-9]*)$/);let pa=null;function Xg(s,t,e,n){let r="missing revert data",i=null;const o=null;let a=null;if(e){r="execution reverted";const l=L(e);if(e=T(e),l.length===0)r+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)r+=" (could not decode reason; invalid data length)";else if(T(l.slice(0,4))==="0x08c379a0")try{i=n.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},r+=`: ${JSON.stringify(i)}`}catch{r+=" (could not decode reason; invalid string data)"}else if(T(l.slice(0,4))==="0x4e487b71")try{const h=Number(n.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[h]},i=`Panic due to ${ue.get(h)||"UNKNOWN"}(${h})`,r+=`: ${i}`}catch{r+=" (could not decode panic code)"}else r+=" (unknown custom error)"}const c={to:t.to?V(t.to):null,data:t.data||"0x"};return t.from&&(c.from=V(t.from)),st(r,"CALL_EXCEPTION",{action:s,data:e,reason:i,transaction:c,invocation:o,revert:a})}var an,vs;const Mo=class Mo{constructor(){w(this,an)}getDefaultValue(t){const e=t.map(r=>v(this,an,vs).call(this,ut.from(r)));return new qi(e,"_").defaultValue()}encode(t,e){ql(e.length,t.length,"types/values length mismatch");const n=t.map(o=>v(this,an,vs).call(this,ut.from(o))),r=new qi(n,"_"),i=new Na;return r.encode(i,e),i.data}decode(t,e,n){const r=t.map(o=>v(this,an,vs).call(this,ut.from(o)));return new qi(r,"_").decode(new ka(e,n))}static defaultAbiCoder(){return pa==null&&(pa=new Mo),pa}static getBuiltinCallException(t,e,n){return Xg(t,e,n,Mo.defaultAbiCoder())}};an=new WeakSet,vs=function(t){if(t.isArray())return new Cp(v(this,an,vs).call(this,t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new qi(t.components.map(n=>v(this,an,vs).call(this,n)),t.name);switch(t.baseType){case"address":return new xp(t.name);case"bool":return new Ip(t.name);case"string":return new Lp(t.name);case"bytes":return new Np(t.name);case"":return new Pp(t.name)}let e=t.type.match(Zg);if(e){let n=parseInt(e[2]||"256");return m(n!==0&&n<=256&&n%8===0,"invalid "+e[1]+" bit length","param",t),new Bp(n/8,e[1]==="int",t.name)}if(e=t.type.match(qg),e){let n=parseInt(e[1]);return m(n!==0&&n<=32,"invalid bytes length","param",t),new kp(n,t.name)}m(!1,"invalid type","type",t.type)};let Tr=Mo;class $g{constructor(t,e,n){y(this,"fragment");y(this,"name");y(this,"signature");y(this,"topic");y(this,"args");const r=t.name,i=t.format();R(this,{fragment:t,name:r,signature:i,topic:e,args:n})}}class t0{constructor(t,e,n,r){y(this,"fragment");y(this,"name");y(this,"args");y(this,"signature");y(this,"selector");y(this,"value");const i=t.name,o=t.format();R(this,{fragment:t,name:i,args:n,signature:o,selector:e,value:r})}}class e0{constructor(t,e,n){y(this,"fragment");y(this,"name");y(this,"args");y(this,"signature");y(this,"selector");const r=t.name,i=t.format();R(this,{fragment:t,name:r,args:n,signature:i,selector:e})}}class Rl{constructor(t){y(this,"hash");y(this,"_isIndexed");R(this,{hash:t,_isIndexed:!0})}static isIndexed(t){return!!(t&&t._isIndexed)}}const Sl={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},Bl={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:s=>`reverted with reason string ${JSON.stringify(s)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:s=>{let t="unknown panic code";return s>=0&&s<=255&&Sl[s.toString()]&&(t=Sl[s.toString()]),`reverted with panic code 0x${s.toString(16)} (${t})`}}};var pe,ge,me,dt,ar,ao,cr,co;const Ps=class Ps{constructor(t){w(this,ar);w(this,cr);y(this,"fragments");y(this,"deploy");y(this,"fallback");y(this,"receive");w(this,pe,void 0);w(this,ge,void 0);w(this,me,void 0);w(this,dt,void 0);let e=[];typeof t=="string"?e=JSON.parse(t):e=t,d(this,me,new Map),d(this,pe,new Map),d(this,ge,new Map);const n=[];for(const o of e)try{n.push(ms.from(o))}catch(a){console.log("EE",a)}R(this,{fragments:Object.freeze(n)});let r=null,i=!1;d(this,dt,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}R(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(m(!r||o.payable!==r.payable,"conflicting fallback fragments",`fragments[${a}]`,o),r=o,i=r.payable);return;case"function":c=u(this,me);break;case"event":c=u(this,ge);break;case"error":c=u(this,pe);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||R(this,{deploy:je.from("constructor()")}),R(this,{fallback:r,receive:i})}format(t){const e=t?"minimal":"full";return this.fragments.map(r=>r.format(e))}formatJson(){const t=this.fragments.map(e=>e.format("json"));return JSON.stringify(t.map(e=>JSON.parse(e)))}getAbiCoder(){return Tr.defaultAbiCoder()}getFunctionName(t){const e=v(this,ar,ao).call(this,t,null,!1);return m(e,"no matching function","key",t),e.name}hasFunction(t){return!!v(this,ar,ao).call(this,t,null,!1)}getFunction(t,e){return v(this,ar,ao).call(this,t,e||null,!0)}forEachFunction(t){const e=Array.from(u(this,me).keys());e.sort((n,r)=>n.localeCompare(r));for(let n=0;n<e.length;n++){const r=e[n];t(u(this,me).get(r),n)}}getEventName(t){const e=v(this,cr,co).call(this,t,null,!1);return m(e,"no matching event","key",t),e.name}hasEvent(t){return!!v(this,cr,co).call(this,t,null,!1)}getEvent(t,e){return v(this,cr,co).call(this,t,e||null,!0)}forEachEvent(t){const e=Array.from(u(this,ge).keys());e.sort((n,r)=>n.localeCompare(r));for(let n=0;n<e.length;n++){const r=e[n];t(u(this,ge).get(r),n)}}getError(t,e){if(tt(t)){const r=t.toLowerCase();if(Bl[r])return Tt.from(Bl[r].signature);for(const i of u(this,pe).values())if(r===i.selector)return i;return null}if(t.indexOf("(")===-1){const r=[];for(const[i,o]of u(this,pe))i.split("(")[0]===t&&r.push(o);if(r.length===0)return t==="Error"?Tt.from("error Error(string)"):t==="Panic"?Tt.from("error Panic(uint256)"):null;if(r.length>1){const i=r.map(o=>JSON.stringify(o.format())).join(", ");m(!1,`ambiguous error description (i.e. ${i})`,"name",t)}return r[0]}if(t=Tt.from(t).format(),t==="Error(string)")return Tt.from("error Error(string)");if(t==="Panic(uint256)")return Tt.from("error Panic(uint256)");const n=u(this,pe).get(t);return n||null}forEachError(t){const e=Array.from(u(this,pe).keys());e.sort((n,r)=>n.localeCompare(r));for(let n=0;n<e.length;n++){const r=e[n];t(u(this,pe).get(r),n)}}_decodeParams(t,e){return u(this,dt).decode(t,e)}_encodeParams(t,e){return u(this,dt).encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){if(typeof t=="string"){const n=this.getError(t);m(n,"unknown error","fragment",t),t=n}return m(et(e,0,4)===t.selector,`data signature does not match error ${t.name}.`,"data",e),this._decodeParams(t.inputs,et(e,4))}encodeErrorResult(t,e){if(typeof t=="string"){const n=this.getError(t);m(n,"unknown error","fragment",t),t=n}return rt([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionData(t,e){if(typeof t=="string"){const n=this.getFunction(t);m(n,"unknown function","fragment",t),t=n}return m(et(e,0,4)===t.selector,`data signature does not match function ${t.name}.`,"data",e),this._decodeParams(t.inputs,et(e,4))}encodeFunctionData(t,e){if(typeof t=="string"){const n=this.getFunction(t);m(n,"unknown function","fragment",t),t=n}return rt([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionResult(t,e){if(typeof t=="string"){const i=this.getFunction(t);m(i,"unknown function","fragment",t),t=i}let n="invalid length for result data";const r=Pt(e);if(r.length%32===0)try{return u(this,dt).decode(t.outputs,r)}catch{n="could not decode result data"}E(!1,n,"BAD_DATA",{value:T(r),info:{method:t.name,signature:t.format()}})}makeError(t,e){const n=L(t,"data"),r=Tr.getBuiltinCallException("call",e,n),i="execution reverted (unknown custom error)";if(r.message.startsWith(i)){const a=T(n.slice(0,4)),c=this.getError(a);if(c)try{const l=u(this,dt).decode(c.inputs,n.slice(4));r.revert={name:c.name,signature:c.format(),args:l},r.reason=r.revert.signature,r.message=`execution reverted: ${r.reason}`}catch{r.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(e);return o&&(r.invocation={method:o.name,signature:o.signature,args:o.args}),r}encodeFunctionResult(t,e){if(typeof t=="string"){const n=this.getFunction(t);m(n,"unknown function","fragment",t),t=n}return T(u(this,dt).encode(t.outputs,e||[]))}encodeFilterTopics(t,e){if(typeof t=="string"){const i=this.getEvent(t);m(i,"unknown event","eventFragment",t),t=i}E(e.length<=t.inputs.length,`too many arguments for ${t.format()}`,"UNEXPECTED_ARGUMENT",{count:e.length,expectedCount:t.inputs.length});const n=[];t.anonymous||n.push(t.topicHash);const r=(i,o)=>i.type==="string"?kn(o):i.type==="bytes"?$(T(o)):(i.type==="bool"&&typeof o=="boolean"&&(o=o?"0x01":"0x00"),i.type.match(/^u?int/)&&(o=Nn(o)),i.type==="address"&&u(this,dt).encode(["address"],[o]),ds(T(o),32));for(e.forEach((i,o)=>{const a=t.inputs[o];if(!a.indexed){m(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?m(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?n.push(i.map(c=>r(a,c))):n.push(r(a,i))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(t,e){if(typeof t=="string"){const o=this.getEvent(t);m(o,"unknown event","eventFragment",t),t=o}const n=[],r=[],i=[];return t.anonymous||n.push(t.topicHash),m(e.length===t.inputs.length,"event arguments/values mismatch","values",e),t.inputs.forEach((o,a)=>{const c=e[a];if(o.indexed)if(o.type==="string")n.push(kn(c));else if(o.type==="bytes")n.push($(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(u(this,dt).encode([o.type],[c]))}else r.push(o),i.push(c)}),{data:u(this,dt).encode(r,i),topics:n}}decodeEventLog(t,e,n){if(typeof t=="string"){const g=this.getEvent(t);m(g,"unknown event","eventFragment",t),t=g}if(n!=null&&!t.anonymous){const g=t.topicHash;m(tt(n[0],32)&&n[0].toLowerCase()===g,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const r=[],i=[],o=[];t.inputs.forEach((g,b)=>{g.indexed?g.type==="string"||g.type==="bytes"||g.baseType==="tuple"||g.baseType==="array"?(r.push(ut.from({type:"bytes32",name:g.name})),o.push(!0)):(r.push(g),o.push(!1)):(i.push(g),o.push(!1))});const a=n!=null?u(this,dt).decode(r,rt(n)):null,c=u(this,dt).decode(i,e,!0),l=[],h=[];let f=0,p=0;return t.inputs.forEach((g,b)=>{let A=null;if(g.indexed)if(a==null)A=new Rl(null);else if(o[b])A=new Rl(a[p++]);else try{A=a[p++]}catch(x){A=x}else try{A=c[f++]}catch(x){A=x}l.push(A),h.push(g.name||null)}),wo.fromItems(l,h)}parseTransaction(t){const e=L(t.data,"tx.data"),n=P(t.value!=null?t.value:0,"tx.value"),r=this.getFunction(T(e.slice(0,4)));if(!r)return null;const i=u(this,dt).decode(r.inputs,e.slice(4));return new t0(r,r.selector,i,n)}parseCallResult(t){throw new Error("@TODO")}parseLog(t){const e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new $g(e,e.topicHash,this.decodeEventLog(e,t.data,t.topics))}parseError(t){const e=T(t),n=this.getError(et(e,0,4));if(!n)return null;const r=u(this,dt).decode(n.inputs,et(e,4));return new e0(n,n.selector,r)}static from(t){return t instanceof Ps?t:typeof t=="string"?new Ps(JSON.parse(t)):typeof t.format=="function"?new Ps(t.format("json")):new Ps(t)}};pe=new WeakMap,ge=new WeakMap,me=new WeakMap,dt=new WeakMap,ar=new WeakSet,ao=function(t,e,n){if(tt(t)){const i=t.toLowerCase();for(const o of u(this,me).values())if(i===o.selector)return o;return null}if(t.indexOf("(")===-1){const i=[];for(const[o,a]of u(this,me))o.split("(")[0]===t&&i.push(a);if(e){const o=e.length>0?e[e.length-1]:null;let a=e.length,c=!0;wt.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const h=i[l].inputs.length;h!==a&&(!c||h!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const h=i[l].inputs;for(let f=0;f<e.length;f++)if(wt.isTyped(e[f])){if(f>=h.length){if(e[f].type==="overrides")continue;i.splice(l,1);break}if(e[f].type!==h[f].baseType){i.splice(l,1);break}}}}if(i.length===1&&e&&e.length!==i[0].inputs.length){const o=e[e.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(a=>JSON.stringify(a.format())).join(", ");m(!1,`ambiguous function description (i.e. matches ${o})`,"key",t)}return i[0]}const r=u(this,me).get(xe.from(t).format());return r||null},cr=new WeakSet,co=function(t,e,n){if(tt(t)){const i=t.toLowerCase();for(const o of u(this,ge).values())if(i===o.topicHash)return o;return null}if(t.indexOf("(")===-1){const i=[];for(const[o,a]of u(this,ge))o.split("(")[0]===t&&i.push(a);if(e){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<e.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<e.length;c++)if(wt.isTyped(e[c])&&e[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(a=>JSON.stringify(a.format())).join(", ");m(!1,`ambiguous event description (i.e. matches ${o})`,"key",t)}return i[0]}const r=u(this,ge).get(Ee.from(t).format());return r||null};let Fa=Ps;const Mh=BigInt(0);function Jr(s){return s??null}function mt(s){return s==null?null:s.toString()}class n0{constructor(t,e,n){y(this,"gasPrice");y(this,"maxFeePerGas");y(this,"maxPriorityFeePerGas");R(this,{gasPrice:Jr(t),maxFeePerGas:Jr(e),maxPriorityFeePerGas:Jr(n)})}toJSON(){const{gasPrice:t,maxFeePerGas:e,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:mt(t),maxFeePerGas:mt(e),maxPriorityFeePerGas:mt(n)}}}function Po(s){const t={};s.to&&(t.to=s.to),s.from&&(t.from=s.from),s.data&&(t.data=T(s.data));const e="chainId,gasLimit,gasPrice,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const r of e)!(r in s)||s[r]==null||(t[r]=P(s[r],`request.${r}`));const n="type,nonce".split(/,/);for(const r of n)!(r in s)||s[r]==null||(t[r]=D(s[r],`request.${r}`));return s.accessList&&(t.accessList=ys(s.accessList)),"blockTag"in s&&(t.blockTag=s.blockTag),"enableCcipRead"in s&&(t.enableCcipReadEnabled=!!s.enableCcipRead),"customData"in s&&(t.customData=s.customData),t}var Me;class s0{constructor(t,e){y(this,"provider");y(this,"number");y(this,"hash");y(this,"timestamp");y(this,"parentHash");y(this,"nonce");y(this,"difficulty");y(this,"gasLimit");y(this,"gasUsed");y(this,"miner");y(this,"extraData");y(this,"baseFeePerGas");w(this,Me,void 0);d(this,Me,t.transactions.map(n=>typeof n!="string"?new ci(n,e):n)),R(this,{provider:e,hash:Jr(t.hash),number:t.number,timestamp:t.timestamp,parentHash:t.parentHash,nonce:t.nonce,difficulty:t.difficulty,gasLimit:t.gasLimit,gasUsed:t.gasUsed,miner:t.miner,extraData:t.extraData,baseFeePerGas:Jr(t.baseFeePerGas)})}get transactions(){return u(this,Me).map(t=>typeof t=="string"?t:t.hash)}get prefetchedTransactions(){const t=u(this,Me).slice();return t.length===0?[]:(E(typeof t[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),t)}toJSON(){const{baseFeePerGas:t,difficulty:e,extraData:n,gasLimit:r,gasUsed:i,hash:o,miner:a,nonce:c,number:l,parentHash:h,timestamp:f,transactions:p}=this;return{_type:"Block",baseFeePerGas:mt(t),difficulty:mt(e),extraData:n,gasLimit:mt(r),gasUsed:mt(i),hash:o,miner:a,nonce:c,number:l,parentHash:h,timestamp:f,transactions:p}}[Symbol.iterator](){let t=0;const e=this.transactions;return{next:()=>t<this.length?{value:e[t++],done:!1}:{value:void 0,done:!0}}}get length(){return u(this,Me).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(t){let e;if(typeof t=="number")e=u(this,Me)[t];else{const n=t.toLowerCase();for(const r of u(this,Me))if(typeof r=="string"){if(r!==n)continue;e=r;break}else{if(r.hash===n)continue;e=r;break}}if(e==null)throw new Error("no such tx");return typeof e=="string"?await this.provider.getTransaction(e):e}getPrefetchedTransaction(t){const e=this.prefetchedTransactions;if(typeof t=="number")return e[t];t=t.toLowerCase();for(const n of e)if(n.hash===t)return n;m(!1,"no matching transaction","indexOrHash",t)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return r0(this)}}Me=new WeakMap;class na{constructor(t,e){y(this,"provider");y(this,"transactionHash");y(this,"blockHash");y(this,"blockNumber");y(this,"removed");y(this,"address");y(this,"data");y(this,"topics");y(this,"index");y(this,"transactionIndex");this.provider=e;const n=Object.freeze(t.topics.slice());R(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:n,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){const{address:t,blockHash:e,blockNumber:n,data:r,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:t,blockHash:e,blockNumber:n,data:r,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const t=await this.provider.getBlock(this.blockHash);return E(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransaction(){const t=await this.provider.getTransaction(this.transactionHash);return E(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransactionReceipt(){const t=await this.provider.getTransactionReceipt(this.transactionHash);return E(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{}),t}removedEvent(){return i0(this)}}var Ai;class Hh{constructor(t,e){y(this,"provider");y(this,"to");y(this,"from");y(this,"contractAddress");y(this,"hash");y(this,"index");y(this,"blockHash");y(this,"blockNumber");y(this,"logsBloom");y(this,"gasUsed");y(this,"cumulativeGasUsed");y(this,"gasPrice");y(this,"type");y(this,"status");y(this,"root");w(this,Ai,void 0);d(this,Ai,Object.freeze(t.logs.map(r=>new na(r,e))));let n=Mh;t.effectiveGasPrice!=null?n=t.effectiveGasPrice:t.gasPrice!=null&&(n=t.gasPrice),R(this,{provider:e,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,gasPrice:n,type:t.type,status:t.status,root:t.root})}get logs(){return u(this,Ai)}toJSON(){const{to:t,from:e,contractAddress:n,hash:r,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:h,root:f}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:n,cumulativeGasUsed:mt(this.cumulativeGasUsed),from:e,gasPrice:mt(this.gasPrice),gasUsed:mt(this.gasUsed),hash:r,index:i,logs:l,logsBloom:c,root:f,status:h,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const t=await this.provider.getBlock(this.blockHash);if(t==null)throw new Error("TODO");return t}async getTransaction(){const t=await this.provider.getTransaction(this.hash);if(t==null)throw new Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Vh(this)}reorderedEvent(t){return E(!t||t.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Gh(this,t)}}Ai=new WeakMap;var cn;const Ic=class Ic{constructor(t,e){y(this,"provider");y(this,"blockNumber");y(this,"blockHash");y(this,"index");y(this,"hash");y(this,"type");y(this,"to");y(this,"from");y(this,"nonce");y(this,"gasLimit");y(this,"gasPrice");y(this,"maxPriorityFeePerGas");y(this,"maxFeePerGas");y(this,"data");y(this,"value");y(this,"chainId");y(this,"signature");y(this,"accessList");w(this,cn,void 0);this.provider=e,this.blockNumber=t.blockNumber!=null?t.blockNumber:null,this.blockHash=t.blockHash!=null?t.blockHash:null,this.hash=t.hash,this.index=t.index,this.type=t.type,this.from=t.from,this.to=t.to||null,this.gasLimit=t.gasLimit,this.nonce=t.nonce,this.data=t.data,this.value=t.value,this.gasPrice=t.gasPrice,this.maxPriorityFeePerGas=t.maxPriorityFeePerGas!=null?t.maxPriorityFeePerGas:null,this.maxFeePerGas=t.maxFeePerGas!=null?t.maxFeePerGas:null,this.chainId=t.chainId,this.signature=t.signature,this.accessList=t.accessList!=null?t.accessList:null,d(this,cn,-1)}toJSON(){const{blockNumber:t,blockHash:e,index:n,hash:r,type:i,to:o,from:a,nonce:c,data:l,signature:h,accessList:f}=this;return{_type:"TransactionReceipt",accessList:f,blockNumber:t,blockHash:e,chainId:mt(this.chainId),data:l,from:a,gasLimit:mt(this.gasLimit),gasPrice:mt(this.gasPrice),hash:r,maxFeePerGas:mt(this.maxFeePerGas),maxPriorityFeePerGas:mt(this.maxPriorityFeePerGas),nonce:c,signature:h,to:o,index:n,type:i,value:mt(this.value)}}async getBlock(){let t=this.blockNumber;if(t==null){const n=await this.getTransaction();n&&(t=n.blockNumber)}if(t==null)return null;const e=this.provider.getBlock(t);if(e==null)throw new Error("TODO");return e}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:e,blockNumber:n}=await Et({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return e==null||e.blockNumber==null?0:n-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(t,e){const n=t??1,r=e??0;let i=u(this,cn),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:f,nonce:p}=await Et({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(p<this.nonce){i=f;return}if(a)return null;const g=await this.getTransaction();if(!(g&&g.blockNumber!=null))for(o===-1&&(o=i-3,o<u(this,cn)&&(o=u(this,cn)));o<=f;){if(a)return null;const b=await this.provider.getBlock(o,!0);if(b==null)return;for(const A of b)if(A===this.hash)return;for(let A=0;A<b.length;A++){const x=await b.getTransaction(A);if(x.from===this.from&&x.nonce===this.nonce){if(a)return null;const I=await this.provider.getTransactionReceipt(x.hash);if(I==null||f-I.blockNumber+1<n)return;let C="replaced";x.data===this.data&&x.to===this.to&&x.value===this.value?C="repriced":x.data==="0x"&&x.from===x.to&&x.value===Mh&&(C="cancelled"),E(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:C==="replaced"||C==="cancelled",reason:C,replacement:x.replaceableTransaction(i),hash:x.hash,receipt:I})}}o++}},l=await this.provider.getTransactionReceipt(this.hash);if(l){if(await l.confirmations()>=n)return l}else if(await c(),n===0)return null;return await new Promise((f,p)=>{const g=[],b=()=>{g.forEach(x=>x())};if(g.push(()=>{a=!0}),r>0){const x=setTimeout(()=>{b(),p(st("wait for transaction timeout","TIMEOUT"))},r);g.push(()=>{clearTimeout(x)})}const A=async x=>{await x.confirmations()>=n&&(b(),f(x))};if(g.push(()=>{this.provider.off(this.hash,A)}),this.provider.on(this.hash,A),i>=0){const x=async()=>{try{await c()}catch(I){if(Ce(I,"TRANSACTION_REPLACED")){b(),p(I);return}}a||this.provider.once("block",x)};g.push(()=>{this.provider.off("block",x)}),this.provider.once("block",x)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}removedEvent(){return E(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Vh(this)}reorderedEvent(t){return E(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),E(!t||t.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Gh(this,t)}replaceableTransaction(t){m(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const e=new Ic(this,this.provider);return d(e,cn,t),e}};cn=new WeakMap;let ci=Ic;function r0(s){return{orphan:"drop-block",hash:s.hash,number:s.number}}function Gh(s,t){return{orphan:"reorder-transaction",tx:s,other:t}}function Vh(s){return{orphan:"drop-transaction",tx:s}}function i0(s){return{orphan:"drop-log",log:{transactionHash:s.transactionHash,blockHash:s.blockHash,blockNumber:s.blockNumber,address:s.address,data:s.data,topics:Object.freeze(s.topics.slice()),index:s.index}}}class gc extends na{constructor(e,n,r){super(e,e.provider);y(this,"interface");y(this,"fragment");y(this,"args");const i=n.decodeEventLog(r,e.data,e.topics);R(this,{args:i,fragment:r,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}var lr;class o0 extends Hh{constructor(e,n,r){super(r,n);w(this,lr,void 0);d(this,lr,e)}get logs(){return super.logs.map(e=>{const n=e.topics.length?u(this,lr).getEvent(e.topics[0]):null;return n?new gc(e,u(this,lr),n):e})}}lr=new WeakMap;var bi;class mc extends ci{constructor(e,n,r){super(r,n);w(this,bi,void 0);d(this,bi,e)}async wait(e){const n=await super.wait();return n==null?null:new o0(u(this,bi),this.provider,n)}}bi=new WeakMap;class zh extends $l{constructor(e,n,r,i){super(e,n,r);y(this,"log");R(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class a0 extends zh{constructor(t,e,n,r,i){super(t,e,n,new gc(i,t.interface,r));const o=t.interface.decodeEventLog(r,this.log.data,this.log.topics);R(this,{args:o,fragment:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const Ll=BigInt(0);function Qh(s){return s&&typeof s.call=="function"}function Wh(s){return s&&typeof s.estimateGas=="function"}function wc(s){return s&&typeof s.resolveName=="function"}function jh(s){return s&&typeof s.sendTransaction=="function"}var Ei;class c0{constructor(t,e,n){w(this,Ei,void 0);y(this,"fragment");if(R(this,{fragment:e}),e.inputs.length<n.length)throw new Error("too many arguments");const r=ws(t.runner,"resolveName"),i=wc(r)?r:null;d(this,Ei,async function(){const o=await Promise.all(e.inputs.map((a,c)=>n[c]==null?null:a.walkAsync(n[c],(h,f)=>h==="address"?Dt(f,i):f)));return t.interface.encodeFilterTopics(e,o)}())}getTopicFilter(){return u(this,Ei)}}Ei=new WeakMap;function ws(s,t){return s==null?null:typeof s[t]=="function"?s:s.provider&&typeof s.provider[t]=="function"?s.provider:null}function Vn(s){return s==null?null:s.provider||null}async function Kh(s,t){const e=Po(wt.dereference(s,"overrides"));return m(e.to==null||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",e.to),m(e.data==null||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",e.data),e.from&&(e.from=await Dt(e.from)),e}async function l0(s,t,e){const n=ws(s,"resolveName"),r=wc(n)?n:null;return await Promise.all(t.map((i,o)=>i.walkAsync(e[o],(a,c)=>(c=wt.dereference(c,a),a==="address"?Dt(c,r):c))))}function u0(s){const t=async function(o){const a=await Kh(o,["data"]);a.to=await s.getAddress();const c=s.interface,l=P(a.value||Ll,"overrides.value")===Ll,h=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!h&&!l&&m(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),m(c.fallback||h,"cannot send data to receive-only contract","overrides.data",a.data);const f=c.receive||c.fallback&&c.fallback.payable;return m(f||l,"cannot send value to non-payable fallback","overrides.value",a.value),m(c.fallback||h,"cannot send data to receive-only contract","overrides.data",a.data),a},e=async function(o){const a=ws(s.runner,"call");E(Qh(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await t(o);try{return await a.call(c)}catch(l){throw Xa(l)&&l.data?s.interface.makeError(l.data,c):l}},n=async function(o){const a=s.runner;E(jh(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await t(o)),l=Vn(s.runner);return new mc(s.interface,l,c)},r=async function(o){const a=ws(s.runner,"estimateGas");return E(Wh(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await t(o))},i=async o=>await n(o);return R(i,{_contract:s,estimateGas:r,populateTransaction:t,send:n,staticCall:e}),i}function h0(s,t){const e=function(...l){const h=s.interface.getFunction(t,l);return E(h,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment"}),h},n=async function(...l){const h=e(...l);let f={};if(h.inputs.length+1===l.length&&(f=await Kh(l.pop())),h.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const p=await l0(s.runner,h.inputs,l);return Object.assign({},f,await Et({to:s.getAddress(),data:s.interface.encodeFunctionData(h,p)}))},r=async function(...l){const h=await a(...l);return h.length===1?h[0]:h},i=async function(...l){const h=s.runner;E(jh(h),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const f=await h.sendTransaction(await n(...l)),p=Vn(s.runner);return new mc(s.interface,p,f)},o=async function(...l){const h=ws(s.runner,"estimateGas");return E(Wh(h),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await h.estimateGas(await n(...l))},a=async function(...l){const h=ws(s.runner,"call");E(Qh(h),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const f=await n(...l);let p="0x";try{p=await h.call(f)}catch(b){throw Xa(b)&&b.data?s.interface.makeError(b.data,f):b}const g=e(...l);return s.interface.decodeFunctionResult(g,p)},c=async(...l)=>e(...l).constant?await r(...l):await i(...l);return R(c,{name:s.interface.getFunctionName(t),_contract:s,_key:t,getFragment:e,estimateGas:o,populateTransaction:n,send:i,staticCall:r,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=s.interface.getFunction(t);return E(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment"}),l}}),c}function f0(s,t){const e=function(...r){const i=s.interface.getEvent(t,r);return E(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment"}),i},n=function(...r){return new c0(s,e(...r),r)};return R(n,{name:s.interface.getEventName(t),_contract:s,_key:t,getFragment:e}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const r=s.interface.getEvent(t);return E(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment"}),r}}),n}const Oo=Symbol.for("_ethersInternal_contract"),Jh=new WeakMap;function d0(s,t){Jh.set(s[Oo],t)}function Vt(s){return Jh.get(s[Oo])}function p0(s){return s&&typeof s=="object"&&"getTopicFilter"in s&&typeof s.getTopicFilter=="function"&&s.fragment}async function yc(s,t){let e,n=null;if(Array.isArray(t)){const i=function(o){if(tt(o,32))return o;const a=s.interface.getEvent(o);return m(a,"unknown fragment","name",o),a.topicHash};e=t.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else t==="*"?e=[null]:typeof t=="string"?tt(t,32)?e=[t]:(n=s.interface.getEvent(t),m(n,"unknown fragment","event",t),e=[n.topicHash]):p0(t)?e=await t.getTopicFilter():"fragment"in t?(n=t.fragment,e=[n.topicHash]):m(!1,"unknown event name","event",t);e=e.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const r=e.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:n,tag:r,topics:e}}async function Gr(s,t){const{subs:e}=Vt(s);return e.get((await yc(s,t)).tag)||null}async function Ul(s,t,e){const n=Vn(s.runner);E(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:r,tag:i,topics:o}=await yc(s,e),{addr:a,subs:c}=Vt(s);let l=c.get(i);if(!l){const f={address:a||s,topics:o},p=x=>{let I=r;if(I==null)try{I=s.interface.getEvent(x.topics[0])}catch{}if(I){const C=I,O=r?s.interface.decodeEventLog(r,x.data,x.topics):[];Ha(s,e,O,U=>new a0(s,U,e,C,x))}else Ha(s,e,[],C=>new zh(s,C,e,x))};let g=[];l={tag:i,listeners:[],start:()=>{g.length||g.push(n.on(f,p))},stop:async()=>{if(g.length==0)return;let x=g;g=[],await Promise.all(x),n.off(f,p)}},c.set(i,l)}return l}let Ma=Promise.resolve();async function g0(s,t,e,n){await Ma;const r=await Gr(s,t);if(!r)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:o,once:a})=>{const c=Array.from(e);n&&c.push(n(a?null:o));try{o.call(s,...c)}catch{}return!a}),i>0}async function Ha(s,t,e,n){try{await Ma}catch{}const r=g0(s,t,e,n);return Ma=r,await r}const Zi=["then"];var km;const Yr=class Yr{constructor(t,e,n,r){y(this,"target");y(this,"interface");y(this,"runner");y(this,"filters");y(this,km);y(this,"fallback");m(typeof t=="string"||Xu(t),"invalid value for Contract target","target",t),n==null&&(n=null);const i=Fa.from(e);R(this,{target:t,runner:n,interface:i}),Object.defineProperty(this,Oo,{value:{}});let o,a=null,c=null;if(r){const f=Vn(n);c=new mc(this.interface,f,r)}let l=new Map;if(typeof t=="string")if(tt(t))a=t,o=Promise.resolve(t);else{const f=ws(n,"resolveName");if(!wc(f))throw st("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=f.resolveName(t).then(p=>{if(p==null)throw new Error("TODO");return Vt(this).addr=p,p})}else o=t.getAddress().then(f=>{if(f==null)throw new Error("TODO");return Vt(this).addr=f,f});d0(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const h=new Proxy({},{get:(f,p,g)=>{if(Zi.indexOf(p)>=0)return Reflect.get(f,p,g);const b=String(p),A=this.getEvent(b);if(A)return A;throw new Error(`unknown contract event: ${b}`)},has:(f,p)=>Zi.indexOf(p)>=0?Reflect.has(f,p):Reflect.has(f,p)||this.interface.hasEvent(String(p))});return R(this,{filters:h}),R(this,{fallback:i.receive||i.fallback?u0(this):null}),new Proxy(this,{get:(f,p,g)=>{if(p in f||Zi.indexOf(p)>=0)return Reflect.get(f,p,g);const b=String(p),A=f.getFunction(b);if(A)return A;throw new Error(`unknown contract method: ${b}`)},has:(f,p)=>p in f||Zi.indexOf(p)>=0?Reflect.has(f,p):f.interface.hasFunction(String(p))})}connect(t){return new Yr(this.target,this.interface,t)}attach(t){return new Yr(t,this.interface,this.runner)}async getAddress(){return await Vt(this).addrPromise}async getDeployedCode(){const t=Vn(this.runner);E(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const e=await t.getCode(await this.getAddress());return e==="0x"?null:e}async waitForDeployment(){const t=this.deploymentTransaction();if(t)return await t.wait(),this;if(await this.getDeployedCode()!=null)return this;const n=Vn(this.runner);return E(n!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((r,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return r(this);n.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return Vt(this).deployTx}getFunction(t){return typeof t!="string"&&(t=t.format()),h0(this,t)}getEvent(t){return typeof t!="string"&&(t=t.format()),f0(this,t)}async queryTransaction(t){throw new Error("@TODO")}async queryFilter(t,e,n){e==null&&(e=0),n==null&&(n="latest");const{addr:r,addrPromise:i}=Vt(this),o=r||await i,{fragment:a,topics:c}=await yc(this,t),l={address:o,topics:c,fromBlock:e,toBlock:n},h=Vn(this.runner);return E(h,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await h.getLogs(l)).map(f=>{let p=a;if(p==null)try{p=this.interface.getEvent(f.topics[0])}catch{}return p?new gc(f,this.interface,p):new na(f,h)})}async on(t,e){const n=await Ul(this,"on",t);return n.listeners.push({listener:e,once:!1}),n.start(),this}async once(t,e){const n=await Ul(this,"once",t);return n.listeners.push({listener:e,once:!0}),n.start(),this}async emit(t,...e){return await Ha(this,t,e,null)}async listenerCount(t){if(t){const r=await Gr(this,t);return r?r.listeners.length:0}const{subs:e}=Vt(this);let n=0;for(const{listeners:r}of e.values())n+=r.length;return n}async listeners(t){if(t){const r=await Gr(this,t);return r?r.listeners.map(({listener:i})=>i):[]}const{subs:e}=Vt(this);let n=[];for(const{listeners:r}of e.values())n=n.concat(r.map(({listener:i})=>i));return n}async off(t,e){const n=await Gr(this,t);if(!n)return this;if(e){const r=n.listeners.map(({listener:i})=>i).indexOf(e);r>=0&&n.listeners.splice(r,1)}return(e==null||n.listeners.length===0)&&(n.stop(),Vt(this).subs.delete(n.tag)),this}async removeAllListeners(t){if(t){const e=await Gr(this,t);if(!e)return this;e.stop(),Vt(this).subs.delete(e.tag)}else{const{subs:e}=Vt(this);for(const{tag:n,stop:r}of e.values())r(),e.delete(n)}return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return await this.off(t,e)}static buildClass(t){class e extends Yr{constructor(r,i=null){super(r,t,i)}}return e}static from(t,e,n){return n==null&&(n=null),new this(t,e,n)}};km=Oo;let Ga=Yr;function m0(){return Ga}class it extends m0(){}function ga(s){return s.match(/^ipfs:\/\/ipfs\//i)?s=s.substring(12):s.match(/^ipfs:\/\//i)?s=s.substring(7):m(!1,"unsupported IPFS format","link",s),`https://gateway.ipfs.io/ipfs/${s}`}class w0{constructor(t){y(this,"name");R(this,{name:t})}connect(t){return this}supportsCoinType(t){return!1}async encodeAddress(t,e){throw new Error("unsupported coin")}async decodeAddress(t,e){throw new Error("unsupported coin")}}const _h=new RegExp("^(ipfs)://(.*)$","i"),Dl=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),_h,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var ln,Zn,un,Cs,Ho,Yh;const Os=class Os{constructor(t,e,n){w(this,un);y(this,"provider");y(this,"address");y(this,"name");w(this,ln,void 0);w(this,Zn,void 0);R(this,{provider:t,address:e,name:n}),d(this,ln,null),d(this,Zn,new it(e,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],t))}async supportsWildcard(){return u(this,ln)==null&&d(this,ln,(async()=>{try{return await u(this,Zn).supportsInterface("0x9061b923")}catch(t){if(Ce(t,"CALL_EXCEPTION"))return!1;throw d(this,ln,null),t}})()),await u(this,ln)}async getAddress(t){if(t==null&&(t=60),t===60)try{const i=await v(this,un,Cs).call(this,"addr(bytes32)");return i==null||i===Sa?null:i}catch(i){if(Ce(i,"CALL_EXCEPTION"))return null;throw i}if(t>=0&&t<2147483648){let i=t+2147483648;const o=await v(this,un,Cs).call(this,"addr(bytes32,uint)",[i]);if(tt(o,20))return V(o)}let e=null;for(const i of this.provider.plugins)if(i instanceof w0&&i.supportsCoinType(t)){e=i;break}if(e==null)return null;const n=await v(this,un,Cs).call(this,"addr(bytes32,uint)",[t]);if(n==null||n==="0x")return null;const r=await e.decodeAddress(t,n);if(r!=null)return r;E(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${t})`,info:{coinType:t,data:n}})}async getText(t){const e=await v(this,un,Cs).call(this,"text(bytes32,string)",[t]);return e==null||e==="0x"?null:e}async getContentHash(){const t=await v(this,un,Cs).call(this,"contenthash(bytes32)");if(t==null||t==="0x")return null;const e=t.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const r=e[1]==="e3010170"?"ipfs":"ipns",i=parseInt(e[4],16);if(e[5].length===i*2)return`${r}://${wf("0x"+e[2])}`}const n=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===64)return`bzz://${n[1]}`;E(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:t}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const t=[{type:"name",value:this.name}];try{const e=await this.getText("avatar");if(e==null)return t.push({type:"!avatar",value:""}),{url:null,linkage:t};t.push({type:"avatar",value:e});for(let n=0;n<Dl.length;n++){const r=e.match(Dl[n]);if(r==null)continue;const i=r[1].toLowerCase();switch(i){case"https":case"data":return t.push({type:"url",value:e}),{linkage:t,url:e};case"ipfs":{const o=ga(e);return t.push({type:"ipfs",value:e}),t.push({type:"url",value:o}),{linkage:t,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";t.push({type:i,value:e});const a=await this.getAddress();if(a==null)return t.push({type:"!owner",value:""}),{url:null,linkage:t};const c=(r[2]||"").split("/");if(c.length!==2)return t.push({type:`!${i}caip`,value:r[2]||""}),{url:null,linkage:t};const l=c[1],h=new it(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const A=await h.ownerOf(l);if(a!==A)return t.push({type:"!owner",value:A}),{url:null,linkage:t};t.push({type:"owner",value:A})}else if(i==="erc1155"){const A=await h.balanceOf(a,l);if(!A)return t.push({type:"!balance",value:"0"}),{url:null,linkage:t};t.push({type:"balance",value:A.toString()})}let f=await h[o](l);if(f==null||f==="0x")return t.push({type:"!metadata-url",value:""}),{url:null,linkage:t};t.push({type:"metadata-url-base",value:f}),i==="erc1155"&&(f=f.replace("{id}",Nn(l,32).substring(2)),t.push({type:"metadata-url-expanded",value:f})),f.match(/^ipfs:/i)&&(f=ga(f)),t.push({type:"metadata-url",value:f});let p={};const g=await new _e(f).send();g.assertOk();try{p=g.bodyJson}catch{try{t.push({type:"!metadata",value:g.bodyText})}catch{const I=g.body;return I&&t.push({type:"!metadata",value:T(I)}),{url:null,linkage:t}}return{url:null,linkage:t}}if(!p)return t.push({type:"!metadata",value:""}),{url:null,linkage:t};t.push({type:"metadata",value:JSON.stringify(p)});let b=p.image;if(typeof b!="string")return t.push({type:"!imageUrl",value:""}),{url:null,linkage:t};if(!b.match(/^(https:\/\/|data:)/i)){if(b.match(_h)==null)return t.push({type:"!imageUrl-ipfs",value:b}),{url:null,linkage:t};t.push({type:"imageUrl-ipfs",value:b}),b=ga(b)}return t.push({type:"url",value:b}),{linkage:t,url:b}}}}}catch{}return{linkage:t,url:null}}static async getEnsAddress(t){const e=await t.getNetwork(),n=e.getPlugin("org.ethers.plugins.network.Ens");return E(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:e}}),n.address}static async fromName(t,e){var r;let n=e;for(;;){if(n===""||n==="."||e!=="eth"&&n==="eth")return null;const i=await v(r=Os,Ho,Yh).call(r,t,n);if(i!=null){const o=new Os(t,i,e);return n!==e&&!await o.supportsWildcard()?null:o}n=n.split(".").slice(1).join(".")}}};ln=new WeakMap,Zn=new WeakMap,un=new WeakSet,Cs=async function(t,e){e=(e||[]).slice();const n=u(this,Zn).interface;e.unshift(Ua(this.name));let r=null;await this.supportsWildcard()&&(r=n.getFunction(t),E(r,"missing fragment","UNKNOWN_ERROR",{info:{funcName:t}}),e=[vg(this.name),n.encodeFunctionData(r,e)],t="resolve(bytes,bytes)"),e.push({ccipReadEnable:!0});try{const i=await u(this,Zn)[t](...e);return r?n.decodeFunctionResult(r,i)[0]:i}catch(i){if(!Ce(i,"CALL_EXCEPTION"))throw i}return null},Ho=new WeakSet,Yh=async function(t,e){const n=await Os.getEnsAddress(t);try{const i=await new it(n,["function resolver(bytes32) view returns (address)"],t).resolver(Ua(e),{enableCcipRead:!0});return i===Sa?null:i}catch(r){throw r}return null},w(Os,Ho);let Ro=Os;const Fl=BigInt(0);function q(s,t){return function(e){return e==null?t:s(e)}}function Ac(s){return t=>{if(!Array.isArray(t))throw new Error("not an array");return t.map(e=>s(e))}}function Mi(s,t){return e=>{const n={};for(const r in s){let i=r;if(t&&r in t&&!(i in e)){for(const o of t[r])if(o in e){i=o;break}}try{const o=s[r](e[i]);o!==void 0&&(n[r]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";E(!1,`invalid value for value.${r} (${a})`,"BAD_DATA",{value:e})}}return n}}function y0(s){switch(s){case!0:case"true":return!0;case!1:case"false":return!1}m(!1,`invalid boolean; ${JSON.stringify(s)}`,"value",s)}function Pr(s){return m(tt(s,!0),"invalid data","value",s),s}function _t(s){return m(tt(s,32),"invalid hash","value",s),s}const A0=Mi({address:V,blockHash:_t,blockNumber:D,data:Pr,index:D,removed:q(y0,!1),topics:Ac(_t),transactionHash:_t,transactionIndex:D},{index:["logIndex"]});function b0(s){return A0(s)}const E0=Mi({hash:q(_t),parentHash:_t,number:D,timestamp:D,nonce:q(Pr),difficulty:P,gasLimit:P,gasUsed:P,miner:q(V),extraData:Pr,baseFeePerGas:q(P)});function x0(s){const t=E0(s);return t.transactions=s.transactions.map(e=>typeof e=="string"?e:qh(e)),t}const v0=Mi({transactionIndex:D,blockNumber:D,transactionHash:_t,address:V,topics:Ac(_t),data:Pr,index:D,blockHash:_t},{index:["logIndex"]});function C0(s){return v0(s)}const I0=Mi({to:q(V,null),from:q(V,null),contractAddress:q(V,null),index:D,root:q(T),gasUsed:P,logsBloom:q(Pr),blockHash:_t,hash:_t,logs:Ac(C0),blockNumber:D,cumulativeGasUsed:P,effectiveGasPrice:q(P),status:q(D),type:q(D,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function N0(s){return I0(s)}function qh(s){s.to&&P(s.to)===Fl&&(s.to="0x0000000000000000000000000000000000000000");const t=Mi({hash:_t,type:e=>e==="0x"||e==null?0:D(e),accessList:q(ys,null),blockHash:q(_t,null),blockNumber:q(D,null),transactionIndex:q(D,null),from:V,gasPrice:q(P),maxPriorityFeePerGas:q(P),maxFeePerGas:q(P),gasLimit:P,to:q(V,null),value:P,nonce:D,data:Pr,creates:q(V,null),chainId:q(P,null)},{data:["input"],gasLimit:["gas"]})(s);if(t.to==null&&t.creates==null&&(t.creates=bp(t)),(s.type===1||s.type===2)&&s.accessList==null&&(t.accessList=[]),s.signature?t.signature=ce.from(s.signature):t.signature=ce.from(s),t.chainId==null){const e=t.signature.legacyChainId;e!=null&&(t.chainId=e)}return t.blockHash&&P(t.blockHash)===Fl&&(t.blockHash=null),t}const k0="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class sa{constructor(t){y(this,"name");R(this,{name:t})}clone(){return new sa(this.name)}}class ra extends sa{constructor(e,n){e==null&&(e=0);super(`org.ethers.network.plugins.GasCost#${e||0}`);y(this,"effectiveBlock");y(this,"txBase");y(this,"txCreate");y(this,"txDataZero");y(this,"txDataNonzero");y(this,"txAccessListStorageKey");y(this,"txAccessListAddress");const r={effectiveBlock:e};function i(o,a){let c=(n||{})[o];c==null&&(c=a),m(typeof c=="number",`invalud value for ${o}`,"costs",n),r[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),R(this,r)}clone(){return new ra(this.effectiveBlock,this)}}class ia extends sa{constructor(e,n){super("org.ethers.plugins.network.Ens");y(this,"address");y(this,"targetNetwork");R(this,{address:e||k0,targetNetwork:n??1})}clone(){return new ia(this.address,this.targetNetwork)}}const ma=new Map;var ur,hr,hn;const Rs=class Rs{constructor(t,e){w(this,ur,void 0);w(this,hr,void 0);w(this,hn,void 0);d(this,ur,t),d(this,hr,P(e)),d(this,hn,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return u(this,ur)}set name(t){d(this,ur,t)}get chainId(){return u(this,hr)}set chainId(t){d(this,hr,P(t,"chainId"))}matches(t){if(t==null)return!1;if(typeof t=="string"){try{return this.chainId===P(t)}catch{}return this.name===t}if(typeof t=="number"||typeof t=="bigint"){try{return this.chainId===P(t)}catch{}return!1}if(typeof t=="object"){if(t.chainId!=null){try{return this.chainId===P(t.chainId)}catch{}return!1}return t.name!=null?this.name===t.name:!1}return!1}get plugins(){return Array.from(u(this,hn).values())}attachPlugin(t){if(u(this,hn).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return u(this,hn).set(t.name,t.clone()),this}getPlugin(t){return u(this,hn).get(t)||null}getPlugins(t){return this.plugins.filter(e=>e.name.split("#")[0]===t)}clone(){const t=new Rs(this.name,this.chainId);return this.plugins.forEach(e=>{t.attachPlugin(e.clone())}),t}computeIntrinsicGas(t){const e=this.getPlugin("org.ethers.plugins.network.GasCost")||new ra;let n=e.txBase;if(t.to==null&&(n+=e.txCreate),t.data)for(let r=2;r<t.data.length;r+=2)t.data.substring(r,r+2)==="00"?n+=e.txDataZero:n+=e.txDataNonzero;if(t.accessList){const r=ys(t.accessList);for(const i in r)n+=e.txAccessListAddress+e.txAccessListStorageKey*r[i].storageKeys.length}return n}static from(t){if(T0(),t==null)return Rs.from("mainnet");if(typeof t=="number"&&(t=BigInt(t)),typeof t=="string"||typeof t=="bigint"){const e=ma.get(t);if(e)return e();if(typeof t=="bigint")return new Rs("unknown",t);m(!1,"unknown network","network",t)}if(typeof t.clone=="function")return t.clone();if(typeof t=="object"){m(typeof t.name=="string"&&typeof t.chainId=="number","invalid network object name or chainId","network",t);const e=new Rs(t.name,t.chainId);return(t.ensAddress||t.ensNetwork!=null)&&e.attachPlugin(new ia(t.ensAddress,t.ensNetwork)),e}m(!1,"invalid network","network",t)}static register(t,e){typeof t=="number"&&(t=BigInt(t));const n=ma.get(t);n&&m(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",t),ma.set(t,e)}};ur=new WeakMap,hr=new WeakMap,hn=new WeakMap;let ve=Rs,Ml=!1;function T0(){if(Ml)return;Ml=!0;function s(t,e,n){const r=function(){const i=new ve(t,e);return n.ensNetwork!=null&&i.attachPlugin(new ia(null,n.ensNetwork)),n.priorityFee,i.attachPlugin(new ra),i};ve.register(t,r),ve.register(e,r),n.altNames&&n.altNames.forEach(i=>{ve.register(i,r)})}s("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),s("ropsten",3,{ensNetwork:3}),s("rinkeby",4,{ensNetwork:4}),s("goerli",5,{ensNetwork:5}),s("kovan",42,{ensNetwork:42}),s("sepolia",11155111,{}),s("classic",61,{}),s("classicKotti",6,{}),s("xdai",100,{ensNetwork:1}),s("optimism",10,{ensNetwork:1,etherscan:{url:"https://api-optimistic.etherscan.io/"}}),s("optimism-goerli",420,{etherscan:{url:"https://api-goerli-optimistic.etherscan.io/"}}),s("arbitrum",42161,{ensNetwork:1,etherscan:{url:"https://api.arbiscan.io/"}}),s("arbitrum-goerli",421613,{etherscan:{url:"https://api-goerli.arbiscan.io/"}}),s("matic",137,{ensNetwork:1,etherscan:{url:"https://api.polygonscan.com/"}}),s("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],etherscan:{url:"https://api-testnet.polygonscan.com/"}}),s("bnb",56,{ensNetwork:1,etherscan:{url:"http://api.bscscan.com"}}),s("bnbt",97,{etherscan:{url:"http://api-testnet.bscscan.com"}})}function Va(s){return JSON.parse(JSON.stringify(s))}var He,jt,fn,we,fr,lo;class P0{constructor(t){w(this,fr);w(this,He,void 0);w(this,jt,void 0);w(this,fn,void 0);w(this,we,void 0);d(this,He,t),d(this,jt,null),d(this,fn,4e3),d(this,we,-2)}get pollingInterval(){return u(this,fn)}set pollingInterval(t){d(this,fn,t)}start(){u(this,jt)||(d(this,jt,u(this,He)._setTimeout(v(this,fr,lo).bind(this),u(this,fn))),v(this,fr,lo).call(this))}stop(){u(this,jt)&&(u(this,He)._clearTimeout(u(this,jt)),d(this,jt,null))}pause(t){this.stop(),t&&d(this,we,-2)}resume(){this.start()}}He=new WeakMap,jt=new WeakMap,fn=new WeakMap,we=new WeakMap,fr=new WeakSet,lo=async function(){try{const t=await u(this,He).getBlockNumber();if(u(this,we)===-2){d(this,we,t);return}if(t!==u(this,we)){for(let e=u(this,we)+1;e<=t;e++){if(u(this,jt)==null)return;await u(this,He).emit("block",e)}d(this,we,t)}}catch{}u(this,jt)!=null&&d(this,jt,u(this,He)._setTimeout(v(this,fr,lo).bind(this),u(this,fn)))};var Xn,$n,dn;class Zh{constructor(t){w(this,Xn,void 0);w(this,$n,void 0);w(this,dn,void 0);d(this,Xn,t),d(this,dn,!1),d(this,$n,e=>{this._poll(e,u(this,Xn))})}async _poll(t,e){throw new Error("sub-classes must override this")}start(){u(this,dn)||(d(this,dn,!0),u(this,$n).call(this,-2),u(this,Xn).on("block",u(this,$n)))}stop(){u(this,dn)&&(d(this,dn,!1),u(this,Xn).off("block",u(this,$n)))}pause(t){this.stop()}resume(){this.start()}}Xn=new WeakMap,$n=new WeakMap,dn=new WeakMap;var Go;class O0 extends Zh{constructor(e,n){super(e);w(this,Go,void 0);d(this,Go,Va(n))}async _poll(e,n){throw new Error("@TODO")}}Go=new WeakMap;var dr;class R0 extends Zh{constructor(e,n){super(e);w(this,dr,void 0);d(this,dr,n)}async _poll(e,n){const r=await n.getTransactionReceipt(u(this,dr));r&&n.emit(u(this,dr),r)}}dr=new WeakMap;var Ge,pr,gr,pn,Kt,Vo,Xh;class bc{constructor(t,e){w(this,Vo);w(this,Ge,void 0);w(this,pr,void 0);w(this,gr,void 0);w(this,pn,void 0);w(this,Kt,void 0);d(this,Ge,t),d(this,pr,Va(e)),d(this,gr,v(this,Vo,Xh).bind(this)),d(this,pn,!1),d(this,Kt,-2)}start(){u(this,pn)||(d(this,pn,!0),u(this,Kt)===-2&&u(this,Ge).getBlockNumber().then(t=>{d(this,Kt,t)}),u(this,Ge).on("block",u(this,gr)))}stop(){u(this,pn)&&(d(this,pn,!1),u(this,Ge).off("block",u(this,gr)))}pause(t){this.stop(),t&&d(this,Kt,-2)}resume(){this.start()}}Ge=new WeakMap,pr=new WeakMap,gr=new WeakMap,pn=new WeakMap,Kt=new WeakMap,Vo=new WeakSet,Xh=async function(t){if(u(this,Kt)===-2)return;const e=Va(u(this,pr));e.fromBlock=u(this,Kt)+1,e.toBlock=t;const n=await u(this,Ge).getLogs(e);if(n.length===0){u(this,Kt)<t-60&&d(this,Kt,t-60);return}for(const r of n)u(this,Ge).emit(u(this,pr),r),d(this,Kt,r.blockNumber)};const S0=BigInt(2),B0=10;function Xi(s){return s&&typeof s.then=="function"}function uo(s,t){return s+":"+JSON.stringify(t,(e,n)=>{if(n==null)return"null";if(typeof n=="bigint")return`bigint:${n.toString()}`;if(typeof n=="string")return n.toLowerCase();if(typeof n=="object"&&!Array.isArray(n)){const r=Object.keys(n);return r.sort(),r.reduce((i,o)=>(i[o]=n[o],i),{})}return n})}class So{constructor(t){y(this,"name");R(this,{name:t})}start(){}stop(){}pause(t){}resume(){}}function L0(s){return JSON.parse(JSON.stringify(s))}function za(s){return s=Array.from(new Set(s).values()),s.sort(),s}async function wa(s,t){if(s==null)throw new Error("invalid event");if(Array.isArray(s)&&(s={topics:s}),typeof s=="string")switch(s){case"block":case"pending":case"debug":case"error":case"network":return{type:s,tag:s}}if(tt(s,32)){const e=s.toLowerCase();return{type:"transaction",tag:uo("tx",{hash:e}),hash:e}}if(s.orphan){const e=s;return{type:"orphan",tag:uo("orphan",e),filter:L0(e)}}if(s.address||s.topics){const e=s,n={topics:(e.topics||[]).map(r=>r==null?null:Array.isArray(r)?za(r.map(i=>i.toLowerCase())):r.toLowerCase())};if(e.address){const r=[],i=[],o=a=>{tt(a)?r.push(a):i.push((async()=>{r.push(await Dt(a,t))})())};Array.isArray(e.address)?e.address.forEach(o):o(e.address),i.length&&await Promise.all(i),n.address=za(r.map(a=>a.toLowerCase()))}return{filter:n,tag:uo("event",n),type:"event"}}m(!1,"unknown ProviderEvent","event",s)}function ya(){return new Date().getTime()}const U0={cacheTimeout:250};var pt,gn,gt,mr,Lt,ts,mn,Ve,xi,Jt,wr,vi,It,Gt,Ci,Qa,Ii,Wa,es,Vr,zo,$h,ns,zr,yr,ho;class D0{constructor(t,e){w(this,It);w(this,Ci);w(this,Ii);w(this,es);w(this,zo);w(this,ns);w(this,yr);w(this,pt,void 0);w(this,gn,void 0);w(this,gt,void 0);w(this,mr,void 0);w(this,Lt,void 0);w(this,ts,void 0);w(this,mn,void 0);w(this,Ve,void 0);w(this,xi,void 0);w(this,Jt,void 0);w(this,wr,void 0);w(this,vi,void 0);if(d(this,vi,Object.assign({},U0,e||{})),t==="any")d(this,ts,!0),d(this,Lt,null);else if(t){const n=ve.from(t);d(this,ts,!1),d(this,Lt,Promise.resolve(n)),setTimeout(()=>{this.emit("network",n,null)},0)}else d(this,ts,!1),d(this,Lt,null);d(this,Ve,-1),d(this,mn,new Map),d(this,pt,new Map),d(this,gn,new Map),d(this,gt,null),d(this,mr,!1),d(this,xi,1),d(this,Jt,new Map),d(this,wr,!1)}get provider(){return this}get plugins(){return Array.from(u(this,gn).values())}attachPlugin(t){if(u(this,gn).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return u(this,gn).set(t.name,t.connect(this)),this}getPlugin(t){return u(this,gn).get(t)||null}get disableCcipRead(){return u(this,wr)}set disableCcipRead(t){d(this,wr,!!t)}async ccipReadFetch(t,e,n){if(this.disableCcipRead||n.length===0||t.to==null)return null;const r=t.to.toLowerCase(),i=e.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const c=n[a],l=c.replace("{sender}",r).replace("{data}",i),h=new _e(l);c.indexOf("{data}")===-1&&(h.body={data:i,sender:r}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:h,index:a,urls:n});let f="unknown error";const p=await h.send();try{const g=p.bodyJson;if(g.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:h,result:g}),g.data;g.message&&(f=g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:h,result:g})}catch{}E(p.statusCode<400||p.statusCode>=500,`response not found during CCIP fetch: ${f}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:t,info:{url:c,errorMessage:f}}),o.push(f)}E(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:t,info:{urls:n,errorMessages:o}})}_wrapBlock(t,e){return new s0(x0(t),this)}_wrapLog(t,e){return new na(b0(t),this)}_wrapTransactionReceipt(t,e){return new Hh(N0(t),this)}_wrapTransactionResponse(t,e){return new ci(qh(t),this)}_detectNetwork(){E(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(t){E(!1,`unsupported method: ${t.method}`,"UNSUPPORTED_OPERATION",{operation:t.method,info:t})}async getBlockNumber(){const t=D(await v(this,It,Gt).call(this,{method:"getBlockNumber"}),"%response");return u(this,Ve)>=0&&d(this,Ve,t),t}_getAddress(t){return Dt(t,this)}_getBlockTag(t){if(t==null)return"latest";switch(t){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return t}if(tt(t))return tt(t,32)?t:ks(t);if(typeof t=="bigint"&&(t=D(t,"blockTag")),typeof t=="number")return t>=0?ks(t):u(this,Ve)>=0?ks(u(this,Ve)+t):this.getBlockNumber().then(e=>ks(e+t));m(!1,"invalid blockTag","blockTag",t)}_getFilter(t){const e=(t.topics||[]).map(c=>c==null?null:Array.isArray(c)?za(c.map(l=>l.toLowerCase())):c.toLowerCase()),n="blockHash"in t?t.blockHash:void 0,r=(c,l,h)=>{let f;switch(c.length){case 0:break;case 1:f=c[0];break;default:c.sort(),f=c}if(n&&(l!=null||h!=null))throw new Error("invalid filter");const p={};return f&&(p.address=f),e.length&&(p.topics=e),l&&(p.fromBlock=l),h&&(p.toBlock=h),n&&(p.blockHash=n),p};let i=[];if(t.address)if(Array.isArray(t.address))for(const c of t.address)i.push(this._getAddress(c));else i.push(this._getAddress(t.address));let o;"fromBlock"in t&&(o=this._getBlockTag(t.fromBlock));let a;return"toBlock"in t&&(a=this._getBlockTag(t.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>r(c[0],c[1],c[2])):r(i,o,a)}_getTransactionRequest(t){const e=Po(t),n=[];if(["to","from"].forEach(r=>{if(e[r]==null)return;const i=Dt(e[r]);Xi(i)?n.push(async function(){e[r]=await i}()):e[r]=i}),e.blockTag!=null){const r=this._getBlockTag(e.blockTag);Xi(r)?n.push(async function(){e.blockTag=await r}()):e.blockTag=r}return n.length?async function(){return await Promise.all(n),e}():e}async getNetwork(){if(u(this,Lt)==null){const r=this._detectNetwork().then(i=>(this.emit("network",i,null),i),i=>{throw u(this,Lt)===r&&d(this,Lt,null),i});return d(this,Lt,r),(await r).clone()}const t=u(this,Lt),[e,n]=await Promise.all([t,this._detectNetwork()]);return e.chainId!==n.chainId&&(u(this,ts)?(this.emit("network",n,e),u(this,Lt)===t&&d(this,Lt,Promise.resolve(n))):E(!1,`network changed: ${e.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),e.clone()}async getFeeData(){const{block:t,gasPrice:e}=await Et({block:this.getBlock("latest"),gasPrice:(async()=>{try{const i=await v(this,It,Gt).call(this,{method:"getGasPrice"});return P(i,"%response")}catch{}return null})()});let n=null,r=null;return t&&t.baseFeePerGas&&(r=BigInt("1000000000"),n=t.baseFeePerGas*S0+r),new n0(e,n,r)}async estimateGas(t){let e=this._getTransactionRequest(t);return Xi(e)&&(e=await e),P(await v(this,It,Gt).call(this,{method:"estimateGas",transaction:e}),"%response")}async call(t){const{tx:e,blockTag:n}=await Et({tx:this._getTransactionRequest(t),blockTag:this._getBlockTag(t.blockTag)});return await v(this,Ii,Wa).call(this,v(this,Ci,Qa).call(this,e,n,t.enableCcipRead?0:-1))}async getBalance(t,e){return P(await v(this,es,Vr).call(this,{method:"getBalance"},t,e),"%response")}async getTransactionCount(t,e){return D(await v(this,es,Vr).call(this,{method:"getTransactionCount"},t,e),"%response")}async getCode(t,e){return T(await v(this,es,Vr).call(this,{method:"getCode"},t,e))}async getStorage(t,e,n){const r=P(e,"position");return T(await v(this,es,Vr).call(this,{method:"getStorage",position:r},t,n))}async broadcastTransaction(t){const{blockNumber:e,hash:n,network:r}=await Et({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:t}),network:this.getNetwork()}),i=ko.from(t);if(i.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,r).replaceableTransaction(e)}async getBlock(t,e){const{network:n,params:r}=await Et({network:this.getNetwork(),params:v(this,zo,$h).call(this,t,!!e)});return r==null?null:this._wrapBlock(r,n)}async getTransaction(t){const{network:e,params:n}=await Et({network:this.getNetwork(),params:v(this,It,Gt).call(this,{method:"getTransaction",hash:t})});return n==null?null:this._wrapTransactionResponse(n,e)}async getTransactionReceipt(t){const{network:e,params:n}=await Et({network:this.getNetwork(),params:v(this,It,Gt).call(this,{method:"getTransactionReceipt",hash:t})});if(n==null)return null;if(n.gasPrice==null&&n.effectiveGasPrice==null){const r=await v(this,It,Gt).call(this,{method:"getTransaction",hash:t});if(r==null)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=r.gasPrice}return this._wrapTransactionReceipt(n,e)}async getTransactionResult(t){const{result:e}=await Et({network:this.getNetwork(),result:v(this,It,Gt).call(this,{method:"getTransactionResult",hash:t})});return e==null?null:T(e)}async getLogs(t){let e=this._getFilter(t);Xi(e)&&(e=await e);const{network:n,params:r}=await Et({network:this.getNetwork(),params:v(this,It,Gt).call(this,{method:"getLogs",filter:e})});return r.map(i=>this._wrapLog(i,n))}_getProvider(t){E(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(t){return await Ro.fromName(this,t)}async getAvatar(t){const e=await this.getResolver(t);return e?await e.getAvatar():null}async resolveName(t){const e=await this.getResolver(t);return e?await e.getAddress():null}async lookupAddress(t){t=V(t);const e=Ua(t.substring(2).toLowerCase()+".addr.reverse");try{const n=await Ro.getEnsAddress(this),i=await new it(n,["function resolver(bytes32) view returns (address)"],this).resolver(e);if(i==null||i===Sa)return null;const a=await new it(i,["function name(bytes32) view returns (string)"],this).name(e);return await this.resolveName(a)!==t?null:a}catch(n){if(Ce(n,"BAD_DATA")&&n.value==="0x"||Ce(n,"CALL_EXCEPTION"))return null;throw n}return null}async waitForTransaction(t,e,n){const r=e??1;return r===0?this.getTransactionReceipt(t):new Promise(async(i,o)=>{let a=null;const c=async l=>{try{const h=await this.getTransactionReceipt(t);if(h!=null&&l-h.blockNumber+1>=r){i(h),a&&(clearTimeout(a),a=null);return}}catch(h){console.log("EEE",h)}this.once("block",c)};n!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(st("timeout","TIMEOUT",{reason:"timeout"})))},n)),c(await this.getBlockNumber())})}async waitForBlock(t){E(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(t){const e=u(this,Jt).get(t);e&&(e.timer&&clearTimeout(e.timer),u(this,Jt).delete(t))}_setTimeout(t,e){e==null&&(e=0);const n=Br(this,xi)._++,r=()=>{u(this,Jt).delete(n),t()};if(this.paused)u(this,Jt).set(n,{timer:null,func:r,time:e});else{const i=setTimeout(r,e);u(this,Jt).set(n,{timer:i,func:r,time:ya()})}return n}_forEachSubscriber(t){for(const e of u(this,pt).values())t(e.subscriber)}_getSubscriber(t){switch(t.type){case"debug":case"error":case"network":return new So(t.type);case"block":return new P0(this);case"event":return new bc(this,t.filter);case"transaction":return new R0(this,t.hash);case"orphan":return new O0(this,t.filter)}throw new Error(`unsupported event: ${t.type}`)}_recoverSubscriber(t,e){for(const n of u(this,pt).values())if(n.subscriber===t){n.started&&n.subscriber.stop(),n.subscriber=e,n.started&&e.start(),u(this,gt)!=null&&e.pause(u(this,gt));break}}async on(t,e){const n=await v(this,yr,ho).call(this,t);return n.listeners.push({listener:e,once:!1}),n.started||(n.subscriber.start(),n.started=!0,u(this,gt)!=null&&n.subscriber.pause(u(this,gt))),this}async once(t,e){const n=await v(this,yr,ho).call(this,t);return n.listeners.push({listener:e,once:!0}),n.started||(n.subscriber.start(),n.started=!0,u(this,gt)!=null&&n.subscriber.pause(u(this,gt))),this}async emit(t,...e){const n=await v(this,ns,zr).call(this,t,e);if(!n||n.listeners.length===0)return!1;const r=n.listeners.length;return n.listeners=n.listeners.filter(({listener:i,once:o})=>{const a=new $l(this,o?null:i,t);try{i.call(this,...e,a)}catch{}return!o}),n.listeners.length===0&&(n.started&&n.subscriber.stop(),u(this,pt).delete(n.tag)),r>0}async listenerCount(t){if(t){const n=await v(this,ns,zr).call(this,t);return n?n.listeners.length:0}let e=0;for(const{listeners:n}of u(this,pt).values())e+=n.length;return e}async listeners(t){if(t){const n=await v(this,ns,zr).call(this,t);return n?n.listeners.map(({listener:r})=>r):[]}let e=[];for(const{listeners:n}of u(this,pt).values())e=e.concat(n.map(({listener:r})=>r));return e}async off(t,e){const n=await v(this,ns,zr).call(this,t);if(!n)return this;if(e){const r=n.listeners.map(({listener:i})=>i).indexOf(e);r>=0&&n.listeners.splice(r,1)}return(!e||n.listeners.length===0)&&(n.started&&n.subscriber.stop(),u(this,pt).delete(n.tag)),this}async removeAllListeners(t){if(t){const{tag:e,started:n,subscriber:r}=await v(this,yr,ho).call(this,t);n&&r.stop(),u(this,pt).delete(e)}else for(const[e,{started:n,subscriber:r}]of u(this,pt))n&&r.stop(),u(this,pt).delete(e);return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return this.off(t,e)}get destroyed(){return u(this,mr)}destroy(){this.removeAllListeners();for(const t of u(this,Jt).keys())this._clearTimeout(t);d(this,mr,!0)}get paused(){return u(this,gt)!=null}set paused(t){!!t!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(t){if(d(this,Ve,-1),u(this,gt)!=null){if(u(this,gt)==!!t)return;E(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(e=>e.pause(t)),d(this,gt,!!t);for(const e of u(this,Jt).values())e.timer&&clearTimeout(e.timer),e.time=ya()-e.time}resume(){if(u(this,gt)!=null){this._forEachSubscriber(t=>t.resume()),d(this,gt,null);for(const t of u(this,Jt).values()){let e=t.time;e<0&&(e=0),t.time=ya(),setTimeout(t.func,e)}}}}pt=new WeakMap,gn=new WeakMap,gt=new WeakMap,mr=new WeakMap,Lt=new WeakMap,ts=new WeakMap,mn=new WeakMap,Ve=new WeakMap,xi=new WeakMap,Jt=new WeakMap,wr=new WeakMap,vi=new WeakMap,It=new WeakSet,Gt=async function(t){const e=u(this,vi).cacheTimeout;if(e<0)return await this._perform(t);const n=uo(t.method,t);let r=u(this,mn).get(n);return r||(r=this._perform(t),u(this,mn).set(n,r),setTimeout(()=>{u(this,mn).get(n)===r&&u(this,mn).delete(n)},e)),await r},Ci=new WeakSet,Qa=async function(t,e,n){E(n<B0,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},t,{blockTag:e,enableCcipRead:!0})});const r=Po(t);try{return T(await this._perform({method:"call",transaction:r,blockTag:e}))}catch(i){if(!this.disableCcipRead&&Xa(i)&&i.data&&n>=0&&e==="latest"&&r.to!=null&&et(i.data,0,4)==="0x556f1830"){const o=i.data,a=await Dt(r.to,this);let c;try{c=V0(et(i.data,4))}catch(f){E(!1,f.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:r,info:{data:o}})}E(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:r,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(r,c.calldata,c.urls);E(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:r,info:{data:i.data,errorArgs:c.errorArgs}});const h={to:a,data:rt([c.selector,G0([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:h});try{const f=await v(this,Ci,Qa).call(this,h,e,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},h),result:f}),f}catch(f){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},h),error:f}),f}}throw i}},Ii=new WeakSet,Wa=async function(t){const{value:e}=await Et({network:this.getNetwork(),value:t});return e},es=new WeakSet,Vr=async function(t,e,n){let r=this._getAddress(e),i=this._getBlockTag(n);return(typeof r!="string"||typeof i!="string")&&([r,i]=await Promise.all([r,i])),await v(this,Ii,Wa).call(this,v(this,It,Gt).call(this,Object.assign(t,{address:r,blockTag:i})))},zo=new WeakSet,$h=async function(t,e){if(tt(t,32))return await v(this,It,Gt).call(this,{method:"getBlock",blockHash:t,includeTransactions:e});let n=this._getBlockTag(t);return typeof n!="string"&&(n=await n),await v(this,It,Gt).call(this,{method:"getBlock",blockTag:n,includeTransactions:e})},ns=new WeakSet,zr=async function(t,e){let n=await wa(t,this);return n.type==="event"&&e&&e.length>0&&e[0].removed===!0&&(n=await wa({orphan:"drop-log",log:e[0]},this)),u(this,pt).get(n.tag)||null},yr=new WeakSet,ho=async function(t){const e=await wa(t,this),n=e.tag;let r=u(this,pt).get(n);return r||(r={subscriber:this._getSubscriber(e),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},u(this,pt).set(n,r)),r};function F0(s,t){try{const e=ja(s,t);if(e)return $a(e)}catch{}return null}function ja(s,t){if(s==="0x")return null;try{const e=D(et(s,t,t+32)),n=D(et(s,e,e+32));return et(s,e+32,e+32+n)}catch{}return null}function Hl(s){const t=Ut(s);if(t.length>32)throw new Error("internal; should not happen");const e=new Uint8Array(32);return e.set(t,32-t.length),e}function M0(s){if(s.length%32===0)return s;const t=new Uint8Array(Math.ceil(s.length/32)*32);return t.set(s),t}const H0=new Uint8Array([]);function G0(s){const t=[];let e=0;for(let n=0;n<s.length;n++)t.push(H0),e+=32;for(let n=0;n<s.length;n++){const r=L(s[n]);t[n]=Hl(e),t.push(Hl(r.length)),t.push(M0(r)),e+=32+Math.ceil(r.length/32)*32}return rt(t)}const Gl="0x0000000000000000000000000000000000000000000000000000000000000000";function V0(s){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};E(Ss(s)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const e=et(s,0,32);E(et(e,0,12)===et(Gl,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=et(e,12);try{const n=[],r=D(et(s,32,64)),i=D(et(s,r,r+32)),o=et(s,r+32);for(let a=0;a<i;a++){const c=F0(o,a*32);if(c==null)throw new Error("abort");n.push(c)}t.urls=n}catch{E(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=ja(s,64);if(n==null)throw new Error("abort");t.calldata=n}catch{E(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}E(et(s,100,128)===et(Gl,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=et(s,96,100);try{const n=ja(s,128);if(n==null)throw new Error("abort");t.extraData=n}catch{E(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(n=>t[n]),t}function Es(s,t){if(s.provider)return s.provider;E(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function Vl(s,t){let e=Po(t);if(e.to!=null&&(e.to=Dt(e.to,s)),e.from!=null){const n=e.from;e.from=Promise.all([s.getAddress(),Dt(n,s)]).then(([r,i])=>(m(r.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),r))}else e.from=s.getAddress();return await Et(e)}class z0{constructor(t){y(this,"provider");R(this,{provider:t||null})}async getNonce(t){return Es(this,"getTransactionCount").getTransactionCount(await this.getAddress(),t)}async populateCall(t){return await Vl(this,t)}async populateTransaction(t){const e=Es(this,"populateTransaction"),n=await Vl(this,t);n.nonce==null&&(n.nonce=await this.getNonce("pending")),n.gasLimit==null&&(n.gasLimit=await this.estimateGas(n));const r=await this.provider.getNetwork();if(n.chainId!=null){const o=P(n.chainId);m(o===r.chainId,"transaction chainId mismatch","tx.chainId",t.chainId)}else n.chainId=r.chainId;const i=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||i)?m(!1,"eip-1559 transaction do not support gasPrice","tx",t):(n.type===0||n.type===1)&&i&&m(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1){const o=await e.getFeeData();E(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice)}else{const o=await e.getFeeData();if(n.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(n.type=2,n.gasPrice!=null){const a=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=a,n.maxPriorityFeePerGas=a}else n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(E(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice),n.type=0):E(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else n.type===2&&(n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await Et(n)}async estimateGas(t){return Es(this,"estimateGas").estimateGas(await this.populateCall(t))}async call(t){return Es(this,"call").call(await this.populateCall(t))}async resolveName(t){return await Es(this,"resolveName").resolveName(t)}async sendTransaction(t){const e=Es(this,"sendTransaction"),n=await this.populateTransaction(t);delete n.from;const r=ko.from(n);return await e.broadcastTransaction(await this.signTransaction(r))}}const zl=new Set;function Q0(s){zl.has(s)||(zl.add(s),console.log("========= NOTICE ========="),console.log(`Request-Rate Exceeded for ${s} (this message will not be repeated)`),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.org/api-keys/"),console.log("=========================="))}function W0(s){return JSON.parse(JSON.stringify(s))}var Nt,ye,ss,wn,rs,Ar,Ni,Ka,ki,Ja;class tf{constructor(t){w(this,Ni);w(this,ki);w(this,Nt,void 0);w(this,ye,void 0);w(this,ss,void 0);w(this,wn,void 0);w(this,rs,void 0);w(this,Ar,void 0);d(this,Nt,t),d(this,ye,null),d(this,ss,v(this,Ni,Ka).bind(this)),d(this,wn,!1),d(this,rs,null),d(this,Ar,!1)}_subscribe(t){throw new Error("subclasses must override this")}_emitResults(t,e){throw new Error("subclasses must override this")}_recover(t){throw new Error("subclasses must override this")}start(){u(this,wn)||(d(this,wn,!0),v(this,Ni,Ka).call(this,-2))}stop(){u(this,wn)&&(d(this,wn,!1),d(this,Ar,!0),v(this,ki,Ja).call(this),u(this,Nt).off("block",u(this,ss)))}pause(t){t&&v(this,ki,Ja).call(this),u(this,Nt).off("block",u(this,ss))}resume(){this.start()}}Nt=new WeakMap,ye=new WeakMap,ss=new WeakMap,wn=new WeakMap,rs=new WeakMap,Ar=new WeakMap,Ni=new WeakSet,Ka=async function(t){try{u(this,ye)==null&&d(this,ye,this._subscribe(u(this,Nt)));let e=null;try{e=await u(this,ye)}catch(i){if(!Ce(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(e==null){d(this,ye,null),u(this,Nt)._recoverSubscriber(this,this._recover(u(this,Nt)));return}const n=await u(this,Nt).getNetwork();if(u(this,rs)||d(this,rs,n),u(this,rs).chainId!==n.chainId)throw new Error("chaid changed");if(u(this,Ar))return;const r=await u(this,Nt).send("eth_getFilterChanges",[e]);await this._emitResults(u(this,Nt),r)}catch(e){console.log("@TODO",e)}u(this,Nt).once("block",u(this,ss))},ki=new WeakSet,Ja=function(){const t=u(this,ye);t&&(d(this,ye,null),t.then(e=>{u(this,Nt).send("eth_uninstallFilter",[e])}))};var is;class j0 extends tf{constructor(e,n){super(e);w(this,is,void 0);d(this,is,W0(n))}_recover(e){return new bc(e,u(this,is))}async _subscribe(e){return await e.send("eth_newFilter",[u(this,is)])}async _emitResults(e,n){for(const r of n)e.emit(u(this,is),e._wrapLog(r,e._network))}}is=new WeakMap;class K0 extends tf{async _subscribe(t){return await t.send("eth_newPendingTransactionFilter",[])}async _emitResults(t,e){for(const n of e)t.emit("pending",n)}}const J0="bigint,boolean,function,number,string,symbol".split(/,/g);function fo(s){if(s==null||J0.indexOf(typeof s)>=0||typeof s.getAddress=="function")return s;if(Array.isArray(s))return s.map(fo);if(typeof s=="object")return Object.keys(s).reduce((t,e)=>(t[e]=s[e],t),{});throw new Error(`should not happen: ${s} (${typeof s})`)}function _0(s){return new Promise(t=>{setTimeout(t,s)})}function xs(s){return s&&s.toLowerCase()}function Ql(s){return s&&typeof s.pollingInterval=="number"}const Y0={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250};class Aa extends z0{constructor(e,n){super(e);y(this,"address");n=V(n),R(this,{address:n})}connect(e){E(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const n=fo(e),r=[];if(n.from){const o=n.from;r.push((async()=>{const a=await Dt(o,this.provider);m(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=a})())}else n.from=this.address;if(n.gasLimit==null&&r.push((async()=>{n.gasLimit=await this.provider.estimateGas({...n,from:this.address})})()),n.to!=null){const o=n.to;r.push((async()=>{n.to=await Dt(o,this.provider)})())}r.length&&await Promise.all(r);const i=this.provider.getRpcTransaction(n);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(e){const n=await this.provider.getBlockNumber(),r=await this.sendUncheckedTransaction(e);return await new Promise((i,o)=>{const a=[1e3,100],c=async()=>{const l=await this.provider.getTransaction(r);if(l!=null){i(l.replaceableTransaction(n));return}this.provider._setTimeout(()=>{c()},a.pop()||4e3)};c()})}async signTransaction(e){const n=fo(e);if(n.from){const i=await Dt(n.from,this.provider);m(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=i}else n.from=this.address;const r=this.provider.getRpcTransaction(n);return await this.provider.send("eth_signTransaction",[r])}async signMessage(e){const n=typeof e=="string"?Ke(e):e;return await this.provider.send("personal_sign",[T(n),this.address.toLowerCase()])}async signTypedData(e,n,r){const i=fo(r),o=await To.resolveNames(e,n,i,async a=>{const c=await Dt(a);return m(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(To.getPayload(o.domain,n,o.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const n=typeof e=="string"?Ke(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),T(n)])}}var os,br,ze,Ae,re,Qe,Ti,_a;class ef extends D0{constructor(e,n){const r={};n&&n.cacheTimeout!=null&&(r.cacheTimeout=n.cacheTimeout);super(e,r);w(this,Ti);w(this,os,void 0);w(this,br,void 0);w(this,ze,void 0);w(this,Ae,void 0);w(this,re,void 0);w(this,Qe,void 0);d(this,br,1),d(this,os,Object.assign({},Y0,n||{})),d(this,ze,[]),d(this,Ae,null),d(this,Qe,null);{let o=null;const a=new Promise(c=>{o=c});d(this,re,{promise:a,resolve:o})}const i=this._getOption("staticNetwork");i&&(m(e==null||i.matches(e),"staticNetwork MUST match network object","options",n),d(this,Qe,i))}_getOption(e){return u(this,os)[e]}get _network(){return E(u(this,Qe),"network is not available yet","NETWORK_ERROR"),u(this,Qe)}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let r=e.transaction;if(r&&r.type!=null&&P(r.type)&&r.maxFeePerGas==null&&r.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},r,{type:void 0})}))}}const n=this.getRpcRequest(e);return n!=null?await this.send(n.method,n.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)return e;if(this.ready)return ve.from(P(await this.send("eth_chainId",[])));const n={id:Br(this,br)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:n});let r;try{r=(await this._send(n))[0]}catch(i){throw this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:r}),"result"in r)return ve.from(P(r.result));throw this.getRpcError(n,r)}_start(){u(this,re)==null||u(this,re).resolve==null||(u(this,re).resolve(),d(this,re,null),(async()=>{for(;u(this,Qe)==null&&!this.destroyed;)try{d(this,Qe,await this._detectNetwork())}catch(e){console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",st("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await _0(1e3)}v(this,Ti,_a).call(this)})())}async _waitUntilReady(){if(u(this,re)!=null)return await u(this,re).promise}_getSubscriber(e){return e.type==="pending"?new K0(this):e.type==="event"?this._getOption("polling")?new bc(this,e.filter):new j0(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new So("orphan"):super._getSubscriber(e)}get ready(){return u(this,re)==null}getRpcTransaction(e){const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(r=>{if(e[r]==null)return;let i=r;r==="gasLimit"&&(i="gas"),n[i]=ks(P(e[r],`tx.${r}`))}),["from","to","data"].forEach(r=>{e[r]!=null&&(n[r]=T(e[r]))}),e.accessList&&(n.accessList=ys(e.accessList)),n}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getBalance":return{method:"eth_getBalance",args:[xs(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[xs(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[xs(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[xs(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(xs):e.filter.address=xs(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,n){const{method:r}=e,{error:i}=n;if(r==="eth_estimateGas"&&i.message){const a=i.message;if(!a.match(/revert/i)&&a.match(/insufficient funds/i))return st("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:i}})}if(r==="eth_call"||r==="eth_estimateGas"){const a=Ya(i),c=Tr.getBuiltinCallException(r==="eth_call"?"call":"estimateGas",e.params[0],a?a.data:null);return c.info={error:i,payload:e},c}const o=JSON.stringify(q0(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return st("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[r]||"unknown",reason:"rejected",info:{payload:e,error:i}});if(r==="eth_sendRawTransaction"||r==="eth_sendTransaction"){const a=e.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return st("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:a,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return st("nonce has already been used","NONCE_EXPIRED",{transaction:a,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return st("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:a,info:{error:i}});if(o.match(/only replay-protected/i))return st("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:r,info:{transaction:a,info:{error:i}}})}return o.match(/the method .* does not exist/i)?st("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:i}}):st("could not coalesce error","UNKNOWN_ERROR",{error:i})}send(e,n){if(this.destroyed)return Promise.reject(st("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const r=Br(this,br)._++,i=new Promise((o,a)=>{u(this,ze).push({resolve:o,reject:a,payload:{method:e,params:n,id:r,jsonrpc:"2.0"}})});return v(this,Ti,_a).call(this),i}async getSigner(e){e==null&&(e=0);const n=this.send("eth_accounts",[]);if(typeof e=="number"){const i=await n;if(e>=i.length)throw new Error("no such account");return new Aa(this,i[e])}const{accounts:r}=await Et({network:this.getNetwork(),accounts:n});e=V(e);for(const i of r)if(V(i)===e)return new Aa(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(n=>new Aa(this,n))}destroy(){u(this,Ae)&&(clearTimeout(u(this,Ae)),d(this,Ae,null));for(const{payload:e,reject:n}of u(this,ze))n(st("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));d(this,ze,[]),super.destroy()}}os=new WeakMap,br=new WeakMap,ze=new WeakMap,Ae=new WeakMap,re=new WeakMap,Qe=new WeakMap,Ti=new WeakSet,_a=function(){if(u(this,Ae))return;const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");d(this,Ae,setTimeout(()=>{d(this,Ae,null);const n=u(this,ze);for(d(this,ze,[]);n.length;){const r=[n.shift()];for(;n.length&&r.length!==u(this,os).batchMaxCount;)if(r.push(n.shift()),JSON.stringify(r.map(o=>o.payload)).length>u(this,os).batchMaxSize){n.unshift(r.pop());break}(async()=>{const i=r.length===1?r[0].payload:r.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of r){if(this.destroyed){c(st("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const h=o.filter(f=>f.id===l.id)[0];if(h==null){const f=st("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",f),c(f);continue}if("error"in h){c(this.getRpcError(l,h));continue}a(h.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of r)a(o)}})()}},e))};var yn;class nf extends ef{constructor(e,n){super(e,n);w(this,yn,void 0);d(this,yn,4e3)}_getSubscriber(e){const n=super._getSubscriber(e);return Ql(n)&&(n.pollingInterval=u(this,yn)),n}get pollingInterval(){return u(this,yn)}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");d(this,yn,e),this._forEachSubscriber(n=>{Ql(n)&&(n.pollingInterval=u(this,yn))})}}yn=new WeakMap;var Er;class sf extends nf{constructor(e,n,r){e==null&&(e="http://localhost:8545");super(n,r);w(this,Er,void 0);typeof e=="string"?d(this,Er,new _e(e)):d(this,Er,e.clone())}_getConnection(){return u(this,Er).clone()}async send(e,n){return await this._start(),await super.send(e,n)}async _send(e){const n=this._getConnection();n.body=JSON.stringify(e),n.setHeader("content-type","application/json");const r=await n.send();r.assertOk();let i=r.bodyJson;return Array.isArray(i)||(i=[i]),i}}Er=new WeakMap;function Ya(s){if(s==null)return null;if(typeof s.message=="string"&&s.message.match("reverted")&&tt(s.data))return{message:s.message,data:s.data};if(typeof s=="object"){for(const t in s){const e=Ya(s[t]);if(e)return e}return null}if(typeof s=="string")try{return Ya(JSON.parse(s))}catch{}return null}function qa(s,t){if(s!=null){if(typeof s.message=="string"&&t.push(s.message),typeof s=="object")for(const e in s)qa(s[e],t);if(typeof s=="string")try{return qa(JSON.parse(s),t)}catch{}}}function q0(s){const t=[];return qa(s,t),t}function Z0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const X0=Z0().WebSocket;var We,Pi,An,as,bn;class Ec{constructor(t,e){w(this,We,void 0);w(this,Pi,void 0);w(this,An,void 0);w(this,as,void 0);w(this,bn,void 0);d(this,We,t),d(this,Pi,JSON.stringify(e)),d(this,An,null),d(this,as,null),d(this,bn,null)}get filter(){return JSON.parse(u(this,Pi))}start(){d(this,An,u(this,We).send("eth_subscribe",this.filter).then(t=>(u(this,We)._register(t,this),t)))}stop(){u(this,An).then(t=>{u(this,We).send("eth_unsubscribe",[t])}),d(this,An,null)}pause(t){E(t,"preserve logs while paused not supported by SocketSubscriber yet","UNSUPPORTED_OPERATION",{operation:"pause(false)"}),d(this,as,!!t)}resume(){d(this,as,null)}_handleMessage(t){if(u(this,An)!=null&&u(this,as)===null){let e=u(this,bn);e==null?e=this._emit(u(this,We),t):e=e.then(async()=>{await this._emit(u(this,We),t)}),d(this,bn,e.then(()=>{u(this,bn)===e&&d(this,bn,null)}))}}async _emit(t,e){throw new Error("sub-classes must implemente this; _emit")}}We=new WeakMap,Pi=new WeakMap,An=new WeakMap,as=new WeakMap,bn=new WeakMap;class $0 extends Ec{constructor(t){super(t,["newHeads"])}async _emit(t,e){t.emit("block",parseInt(e.number))}}class tm extends Ec{constructor(t){super(t,["newPendingTransactions"])}async _emit(t,e){t.emit("pending",e)}}var Oi;class em extends Ec{constructor(e,n){super(e,["logs",n]);w(this,Oi,void 0);d(this,Oi,JSON.stringify(n))}get logFilter(){return JSON.parse(u(this,Oi))}async _emit(e,n){e.emit(this.logFilter,e._wrapLog(n,e._network))}}Oi=new WeakMap;var cs,xr,En;class nm extends ef{constructor(e){super(e,{batchMaxCount:1});w(this,cs,void 0);w(this,xr,void 0);w(this,En,void 0);d(this,cs,new Map),d(this,xr,new Map),d(this,En,new Map)}_getSubscriber(e){switch(e.type){case"close":return new So("close");case"block":return new $0(this);case"pending":return new tm(this);case"event":return new em(this,e.filter);case"orphan":if(e.filter.orphan==="drop-log")return new So("drop-log")}return super._getSubscriber(e)}_register(e,n){u(this,xr).set(e,n);const r=u(this,En).get(e);if(r){for(const i of r)n._handleMessage(i);u(this,En).delete(e)}}async _send(e){m(!Array.isArray(e),"WebSocket does not support batch send","payload",e);const n=new Promise((r,i)=>{u(this,cs).set(e.id,{payload:e,resolve:r,reject:i})});return await this._waitUntilReady(),await this._write(JSON.stringify(e)),[await n]}async _processMessage(e){const n=JSON.parse(e);if(n&&typeof n=="object"&&"id"in n){const r=u(this,cs).get(n.id);if(r==null){this.emit("error",st("received result for unknown id","UNKNOWN_ERROR",{reasonCode:"UNKNOWN_ID",result:n}));return}u(this,cs).delete(n.id),r.resolve(n)}else if(n&&n.method==="eth_subscription"){const r=n.params.subscription,i=u(this,xr).get(r);if(i)i._handleMessage(n.params.result);else{let o=u(this,En).get(r);o==null&&(o=[],u(this,En).set(r,o)),o.push(n.params.result)}}else{this.emit("error",st("received unexpected message","UNKNOWN_ERROR",{reasonCode:"UNEXPECTED_MESSAGE",result:n}));return}}async _write(e){throw new Error("sub-classes must override this")}}cs=new WeakMap,xr=new WeakMap,En=new WeakMap;var ls,ie;class sm extends nm{constructor(e,n){super(n);w(this,ls,void 0);w(this,ie,void 0);typeof e=="string"?(d(this,ls,()=>new X0(e)),d(this,ie,u(this,ls).call(this))):typeof e=="function"?(d(this,ls,e),d(this,ie,e())):(d(this,ls,null),d(this,ie,e)),this.websocket.onopen=async()=>{try{await this._start(),this.resume()}catch(r){console.log("failed to start WebsocketProvider",r)}},this.websocket.onmessage=r=>{this._processMessage(r.data)}}get websocket(){if(u(this,ie)==null)throw new Error("websocket closed");return u(this,ie)}async _write(e){this.websocket.send(e)}async destroy(){u(this,ie)!=null&&(u(this,ie).close(),d(this,ie,null)),super.destroy()}}ls=new WeakMap,ie=new WeakMap;const Qr="84842078b09946638c03157f83405213";function rm(s){switch(s){case"mainnet":return"mainnet.infura.io";case"goerli":return"goerli.infura.io";case"sepolia":return"sepolia.infura.io";case"arbitrum":return"arbitrum-mainnet.infura.io";case"arbitrum-goerli":return"arbitrum-goerli.infura.io";case"matic":return"polygon-mainnet.infura.io";case"matic-mumbai":return"polygon-mumbai.infura.io";case"optimism":return"optimism-mainnet.infura.io";case"optimism-goerli":return"optimism-goerli.infura.io"}m(!1,"unsupported network","network",s)}class im extends sm{constructor(e,n){const r=new li(e,n),i=r._getConnection();E(!i.credentials,"INFURA WebSocket project secrets unsupported","UNSUPPORTED_OPERATION",{operation:"InfuraProvider.getWebSocketProvider()"});const o=i.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(o,e);y(this,"projectId");y(this,"projectSecret");R(this,{projectId:r.projectId,projectSecret:r.projectSecret})}isCommunityResource(){return this.projectId===Qr}}class li extends sf{constructor(e,n,r){e==null&&(e="mainnet");const i=ve.from(e);n==null&&(n=Qr),r==null&&(r=null);const o=li.getRequest(i,n,r);super(o,i,{staticNetwork:i});y(this,"projectId");y(this,"projectSecret");R(this,{projectId:n,projectSecret:r})}_getProvider(e){try{return new li(e,this.projectId,this.projectSecret)}catch{}return super._getProvider(e)}isCommunityResource(){return this.projectId===Qr}static getWebSocketProvider(e,n){return new im(e,n)}static getRequest(e,n,r){n==null&&(n=Qr),r==null&&(r=null);const i=new _e(`https://${rm(e.name)}/v3/${n}`);return i.allowGzip=!0,r&&i.setCredentials("",r),n===Qr&&(i.retryFunc=async(o,a,c)=>(Q0("InfuraProvider"),!0)),i}}BigInt("1");BigInt("2");var vr;class om extends nf{constructor(e,n){super(n,{batchMaxCount:1});w(this,vr,void 0);d(this,vr,async(r,i)=>{const o={method:r,params:i};this.emit("debug",{action:"sendEip1193Request",payload:o});try{const a=await e.request(o);return this.emit("debug",{action:"receiveEip1193Result",result:a}),a}catch(a){const c=new Error(a.message);throw c.code=a.code,c.data=a.data,c.payload=o,this.emit("debug",{action:"receiveEip1193Error",error:c}),c}})}async send(e,n){return await this._start(),await super.send(e,n)}async _send(e){m(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const n=await u(this,vr).call(this,e.method,e.params||[]);return[{id:e.id,result:n}]}catch(n){return[{id:e.id,error:{code:n.code,data:n.data,message:n.message}}]}}getRpcError(e,n){switch(n=JSON.parse(JSON.stringify(n)),n.error.code||-1){case 4001:n.error.message=`ethers-user-denied: ${n.error.message}`;break;case 4200:n.error.message=`ethers-unsupported: ${n.error.message}`;break}return super.getRpcError(e,n)}async hasSigner(e){e==null&&(e=0);const n=await this.send("eth_accounts",[]);return typeof e=="number"?n.length>e:(e=e.toLowerCase(),n.filter(r=>r.toLowerCase()===e).length!==0)}async getSigner(e){if(e==null&&(e=0),!await this.hasSigner(e))try{await u(this,vr).call(this,"eth_requestAccounts",[])}catch(n){const r=n.payload;throw this.getRpcError(r,{id:r.id,error:n})}return await super.getSigner(e)}}vr=new WeakMap;const Bo=" !#$%&'()*+,-./<=>?@[]^_`{|}~",am=/^[a-z]*$/i;function Wl(s,t){let e=97;return s.reduce((n,r)=>(r===t?e++:r.match(am)?n.push(String.fromCharCode(e)+r):(e=97,n.push(r)),n),[])}function cm(s,t){for(let r=Bo.length-1;r>=0;r--)s=s.split(Bo[r]).join(t.substring(2*r,2*r+2));const e=[],n=s.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(r,i,o,a)=>{if(o)for(let c=parseInt(o);c>=0;c--)e.push(";");else e.push(i.toLowerCase());return""});if(n)throw new Error(`leftovers: ${JSON.stringify(n)}`);return Wl(Wl(e,";"),":")}function lm(s){return m(s[0]==="0","unsupported auwl data","data",s),cm(s.substring(1+2*Bo.length),s.substring(1,1+2*Bo.length))}class um{constructor(t){y(this,"locale");R(this,{locale:t})}split(t){return t.toLowerCase().split(/\s+/g)}join(t){return t.join(" ")}}var Cr,Ri,us,Si,Za;class hm extends um{constructor(e,n,r){super(e);w(this,Si);w(this,Cr,void 0);w(this,Ri,void 0);w(this,us,void 0);d(this,Cr,n),d(this,Ri,r),d(this,us,null)}get _data(){return u(this,Cr)}_decodeWords(){return lm(u(this,Cr))}getWord(e){const n=v(this,Si,Za).call(this);return m(e>=0&&e<n.length,`invalid word index: ${e}`,"index",e),n[e]}getWordIndex(e){return v(this,Si,Za).call(this).indexOf(e)}}Cr=new WeakMap,Ri=new WeakMap,us=new WeakMap,Si=new WeakSet,Za=function(){if(u(this,us)==null){const e=this._decodeWords();if(kn(e.join(`
`)+`
`)!==u(this,Ri))throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);d(this,us,e)}return u(this,us)};const fm="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",dm="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let ba=null;class xc extends hm{constructor(){super("en",fm,dm)}static wordlist(){return ba==null&&(ba=new xc),ba}}BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");xc.wordlist();const at=(s,...t)=>String.raw({raw:s},...t),jl=s=>{let t;const e=new Set,n=(c,l)=>{const h=typeof c=="function"?c(t):c;if(!Object.is(h,t)){const f=t;t=l??typeof h!="object"?h:Object.assign({},t,h),e.forEach(p=>p(t,f))}},r=()=>t,a={setState:n,getState:r,subscribe:c=>(e.add(c),()=>e.delete(c)),destroy:()=>{e.clear()}};return t=s(n,r,a),a},pm=s=>s?jl(s):jl,gm=s=>(t,e,n)=>s((...r)=>{console.log("Action: ",r[0]),t(...r)},e,n),rf=s=>{for(const t in s)if(Object.hasOwn(s,t))return!1;return!0};function $i(s){return new Promise((e,n)=>{setTimeout(()=>{e()},s*1e3)})}class mm{constructor(){this.callbacks={}}on(t,e){this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e)}emit(t,e){window.DEBUG&&console.log("<- emit: ",t,e);let n=this.callbacks[t];n&&setTimeout(()=>{n.forEach(r=>r(e))},0)}}const j=new mm;var Kl=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");Kl&&document.documentElement.setAttribute("data-theme",Kl);function wm(s){return s.slice(0,4)+"..."+s.slice(Math.max(s.length-4,0))}Object.byString=function(s,t){t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");for(var e=t.split("."),n=0,r=e.length;n<r;++n){var i=e[n];if(i in s)s=s[i];else return}return s};const ym=(s,t=1e3)=>{let e=null;return(...n)=>{window.clearTimeout(e),e=window.setTimeout(()=>{s.apply(null,n)},t)}},Or=(s,t)=>Object.keys(s).length===Object.keys(t).length&&Object.keys(s).every(e=>t.hasOwnProperty(e)&&s[e]===t[e]),po=()=>{(function(){var s=document.getElementsByTagName("rainbow");Array.prototype.forEach.call(s,t);function t(e){var n=0,r=e.textContent.split(""),i=r.length,o=360/i,a;e.innerHTML=r.map(function(c){return'<span class="text-rainbow">'+c+"</span>"}).join(""),a=e.children,function c(){for(var l=0;l<i;l++)a[l].style.color="hsl("+(n+Math.floor(l*o))+", 55%, 70%)";n++,requestAnimationFrame(c)}()}})()};class Am{constructor(t){if(!t)throw new Error("param is missing from constructor");this.contractAddr=t,this.contract=new it(t,bm),this.pending=[]}connectProvider(t){this.provider=t,this.contract=this.contract.connect(this.provider)}connectURL(t){this.provider=new sf(t),this.contract=this.contract.connect(this.provider)}disconnect(){this.provider.removeAllListeners()}async deposit(t,e,n){const r=await t.getAddress(),o=await this.contract.connect(t).getFunction("deposit").call(r,e,n);return this.addTx(o),o}async claim(t,e){const n=await t.getAddress(),r=this.contract.connect(t);console.log(e),console.log(typeof e),console.log(e.length);debugger;const i=await r.getFunction("claim").call(n,e);return this.addTx(i),i}async changeOutput(t,e){const n=await t.getAddress(),i=await this.contract.connect(t).getFunction("changeOutput").call(n,e);return this.addTx(i),i}async initiateWithdrawal(t,e){const n=await t.getAddress(),r=this.contract.connect(t);if(e.length===0)throw new Error("nothing to initiate");const i=await r.getFunction("initiateWithdrawal").call(n,e);return await this.addTx(i),i}async finaliseWithdrawal(t,e,n){const r=await t.getAddress(),i=this.contract.connect(t);if(console.log("depositorsAddresses: ",e),console.log("hints: ",n),n.length===0||e.length===0)throw new Error("nothing to finalize");const o=await i.getFunction("finaliseWithdrawal").call(r,e,n);return await this.addTx(o),o}async triggerEmission(t,e){const n=await t.getAddress(),i=await this.contract.connect(t).getFunction("triggerEmission").call(n,e);return await this.addTx(i),i}async getDeposits(t,e){return await this.contract.connect(t).deposits(e)}async getQueue(t,e){return await this.contract.connect(t).queue(e)}async getQueueSize(t){return await this.contract.connect(t).queueSize()}async getQueueFront(t){return await this.contract.connect(t).queueFront()}async getQueueBack(t){return await this.contract.connect(t).queueBack()}async getOutputIndex(t,e){return await this.contract.connect(t).outputIndex(e)}async getOutputPipes(t,e){return await this.contract.connect(t).outputPipes(e)}async getEmissionPerBlock(t){return await this.contract.connect(t).emissionPerBlock()}async getLastRewardBlock(t,e){return await this.contract.connect(t).lastRewardBlock(e)}async getEventsDEPOSIT(t){const e=this.contract.filters.Deposit;return await this.contract.queryFilter(e)}async getEventsWITHDRAWALREQUEST(t){const e=this.contract.filters.WithdrawalRequest;return await this.contract.queryFilter(e)}async updatePendingTransactions(){this.pending=await Promise.all(this.pending.map(async t=>t.confirmations==0?await this.provider.getTransaction(t.hash):t))}async getTx(t){return await this.provider.getTransaction(t.hash)}async addTx(t){const e=await this.provider.getTransaction(t.hash),n=[].concat(this.pending);return n.push(e),this.pending=n,n}purgeMinedTransactions(){this.pending=this.pending.filter(t=>t.confirmations==0)}}const to=["function transfer(address _to, uint256 _value) returns (bool)","function approve(address _spender, uint256 _value) returns (bool)","function transferFrom(address _from, address _to, uint256 _value) returns (bool)","function mint(uint256 amount, address recipient)","function name() view returns (string)","function symbol() view returns (string)","function decimals() view returns (uint8)","function totalSupply() view returns (uint256)","function balanceOf(address arg0) view returns (uint256)","function allowance(address arg0, address arg1) view returns (uint256)"],Jl=["function findCheckpointHints(uint256[],uint256,uint256) view returns (uint256[])","function getWithdrawalRequests(address) view returns (uint256[])","function getWithdrawalStatus(uint256[]) view returns (tuple(uint256,uint256,address,uint256,bool,bool)[])","function getLastCheckpointIndex() view returns (uint256)","function getLastFinalizedRequestId() view returns (uint256)","function getLastRequestId() view returns (uint256)","function unfinalizedRequestNumber() view returns (uint256)","function unfinalizedStETH() view returns (uint256)"],bm=["event ChangeAdmin(address indexed oldAdmin, address indexed newAdmin)","event SetOutputValidity(address indexed output, bool indexed valid)","event ChangeEmission(uint256 indexed oldEmissionPerBlock, uint256 indexed newEmissionPerBlock)","event SetLastRewardBlock(address indexed pipe, uint256 indexed bnum)","event Deposit(address indexed who, uint256 indexed amount)","event WithdrawalRequest(uint256[] requestIds, address[] depositors, uint256[] amounts)","event Claim(address indexed who, address indexed output, uint256 indexed amount)","function changeAdmin(address newAdmin)","function setLidont(address lidontAddress)","function setUpgrade(address upgradeAddress)","function triggerEmission(address output)","function toggleValidOutput(address output)","function changeEmissionRate(uint256 newEmissionPerBlock)","function deposit(uint256 stETHAmount, address outputPipe)","function changeOutput(address outputPipe)","function initiateWithdrawal(address[] depositors) returns (uint256[])","function finaliseWithdrawal(address[] depositors, uint256[] _hints) returns (uint256[])","function claim(bytes data) returns (uint256)","function lidont() view returns (address)","function deposits(address arg0) view returns (tuple(uint256 stETH, uint256 requestId, uint256 ETH, address outputPipe))","function queue(uint256 arg0) view returns (address)","function queueSize() view returns (uint256)","function queueFront() view returns (uint256)","function queueBack() view returns (uint256)","function admin() view returns (address)","function newMinter() view returns (address)","function outputIndex(address arg0) view returns (uint256)","function outputPipes(uint256 arg0) view returns (address)","function emissionPerBlock() view returns (uint256)","function lastRewardBlock(address arg0) view returns (uint256)"],eo=["event Receive(uint256 indexed amount, uint256 indexed oldBondValue, uint256 indexed newBondValue)","event Stake(address indexed user, uint256 indexed amount)","event Unstake(address indexed user, uint256 indexed amount, uint256 indexed reward)","function receiveReward(address _token, address _from, uint256 _amount)","function unstake(uint256 amount)","function previewUnstake(address user, uint256 amount) returns (uint256)","function bondValue() view returns (uint256)","function temp() view returns (uint256)","function dust() view returns (uint256)","function stakes(address arg0) view returns (tuple(uint256 amount, uint256 bondValue))","function totalStake() view returns (uint256)"],_l=["event Stake(address indexed user, uint256 indexed amount)","event Unstake(address indexed user, uint256 indexed amount, uint256 rewardLidont, uint256 rewardRocket)","function receiveReward(address _token, address _from, uint256 _amount)","function unstake(uint256 amount)","function previewUnstake(address user, uint256 amount) returns (uint256, uint256)","function rewardPoolLidont() view returns (tuple(address token, uint256 precision, uint256 bondValue, uint256 temp, uint256 dust))","function rewardPoolRocket() view returns (tuple(address token, uint256 precision, uint256 bondValue, uint256 temp, uint256 dust))","function bondValueLidont() view returns (uint256)","function bondValueRocket() view returns (uint256)","function tempLidont() view returns (uint256)","function dustLidont() view returns (uint256)","function tempRocket() view returns (uint256)","function dustRocket() view returns (uint256)","function stakes(address arg0) view returns (tuple(uint256 amount, uint256 bondValueLidont, uint256 bondValueRocket))","function totalStake() view returns (uint256)"],Em=[{inputs:[{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"uint256",name:"_steps",type:"uint256"}],name:"optimiseSwapTo",outputs:[{internalType:"uint256[2]",name:"portions",type:"uint256[2]"},{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"nonpayable",type:"function"}],xm=1,At=xm;console.log("chain id is: "+At);const of=new Map;of.set("0x0","ETH");of.set("0x1","rETH");const yt={1:{withdrawler:"0x274b028b03A250cA03644E6c578D81f019eE1323",lidont:"0xBcF7FFFD8B256Ec51a36782a52D0c34f6474D951",reth:"",rocketStorage:"0x1d8f8f00cfa6758d7bE78336684788Fb0ee0Fa46",rocketSwapRouter:"0x16D5A408e807db8eF7c578279BEeEe6b228f1c1C",steth:"0xae7ab96520DE3A18E5e111B5EaAb095312D7fE84",unsteth:"0x889edC2eDab5f40e902b864aD4d7AdE8E412F9B1",SCAN:"https://etherscan.io/",NAME:"Ethereum Mainnet",ICON:"eth.png"},5:{withdrawler:"0x3fAA7e474B810c2Bf9590D69368E0ba7D7AD1146",lidont:"0x055EC52e9fC20Acf31495d4dC57a47a372faDe04",reth:"0x178E141a0E3b34152f73Ff610437A7bf9B83267A",rocketStorage:"0xd8Cd47263414aFEca62d6e2a3917d6600abDceB3",rocketSwapRouter:"0x16D5A408e807db8eF7c578279BEeEe6b228f1c1C",steth:"0x1643E812aE58766192Cf7D2Cf9567dF2C37e9B7F",unsteth:"0xCF117961421cA9e546cD7f50bC73abCdB3039533",SCAN:"https://goerli.etherscan.io/",NAME:"Ethereum Goerli",ICON:"eth.png"}};function Yl(s){return"0x"+s.toString(16)}const F=pm(gm((s,t,e)=>({loading:!1,address:null,balance:null,balanceFormatted:null,balances:{},balancesBySymbol:{},inputs:{},outputPipes:{},addrToOutputPipes:{},queue:{},errors:{test:!0},success:{test:!0},depositEvents:[],withdrawEvents:[],addrToDeposits:{},addrToRequestIds:{},balanceOfLidontSTETH:void 0,balanceOfLidontETH:void 0,stETHAllowance:void 0,provider:window.ethereum?new om(window.ethereum):new li("mainnet","ID"),lidontWeb3API:new Am(yt[At].withdrawler),pending:void 0,async INIT(){const{RELOAD:n,lidontWeb3API:r,provider:i,addConnectNetwork:o,connectWallet:a}=t();await o(At),await a(),r.connectProvider(i);let c;F.subscribe(()=>{c!==r.pending&&(c=r.pending,s({pending:r.pending}))}),j.emit("msg","fetching data..."),await n()},async RELOAD(){const{getDeposits:n,getQueue:r,getAllOutputPipes:i,getDepositEvents:o,getWithdrawEvents:a,getOutputPipesManual:c,updateBalance:l,updateErc20Balance:h,getAllowanceSTETH:f}=t();await l(),await h(yt[At].steth),await h(yt[At].lidont),await f(),await r(),await o(),await a(),await n(),j.emit("msg","<3")},async openMenu(){j.emit("ADMIN");const{getDepositEvents:n,getWithdrawEvents:r,getNextClaim:i}=t();await n(),await r()},async fetchWithdrawals(){const{getLidontSTETHBalance:n,getDepositEvents:r,getWithdrawRequests:i}=t();await n(),await r(),await i()},async getQueue(){const{lidontWeb3API:n}=t(),{provider:r}=t(),i=await r.getSigner(),o=await n.getQueueFront(i),a=await n.getQueueBack(i),c=await n.getQueueSize(i),l={};for(let f=0;f<Number(c);f++){const p=await n.getQueue(i,f);l[p]=void 0}s({queue:{front:o,back:a,size:c,list:l}})},async getAllOutputPipes(){const{lidontWeb3API:n,getStakesForPipe:r,previewUnstake:i}=t(),{provider:o}=t(),a=await o.getSigner(),c={},l={};for(let h=0;h<64;h++)try{const f=await n.getOutputPipes(a,h),p=await r(f),g=await i(f,p.amount);console.log("got pipe "+h,f),c[h]={i:h,addr:f,stakes:p,claimable:g},l[f]={i:h,addr:f,stakes:p,claimable:g}}catch{console.log("catch! pipes total: "+h);break}s({outputPipes:c,addrToOutputPipes:l})},async getNextClaim(){const{queue:n,queueDetails:r,getDepositsOfAddress:i}=t();console.log(n,r);const o=n[r.front],a=await i(o);return console.log(o,a),a},async getDepositsOfAddress(n){const{lidontWeb3API:r}=t(),{provider:i}=t(),o=await i.getSigner();return await o.getAddress(),await r.getDeposits(o,n)},async getDeposits(){const{lidontWeb3API:n}=t(),{provider:r}=t(),i=await r.getSigner(),o=await i.getAddress(),a=await n.getDeposits(i,o);s({deposits:a})},async getQueue(){const{lidontWeb3API:n}=t(),{provider:r}=t(),i=await r.getSigner(),o=await n.getQueueSize(i),a=await n.getQueueFront(i),c=await n.getQueueBack(i),l=[];for(let h=0;h<=o;h++){const f=await n.getQueue(i,h);l.push(f)}s({queue:l}),s({queueDetails:{size:o,front:a,back:c}})},async getLidontSTETHBalance(){t();const{provider:n}=t(),r=await n.getSigner();await r.getAddress();const i=yt[At].steth,o=yt[At].withdrawler,c=await new it(i,to,r).balanceOf(o);s({balanceOfLidontSTETH:c})},async getAllowanceSTETH(){const{provider:n}=t(),r=await n.getSigner(),i=await r.getAddress(),o=yt[At].steth,a=yt[At].withdrawler,l=await new it(o,to,r).allowance(i,a);return s({stETHAllowance:l}),l},async deposit(){const{provider:n,inputs:r,lidontWeb3API:i,RELOAD:o,getAllowanceSTETH:a,outputPipes:c}=t();try{const l=await n.getSigner(),h=Ff(r.stETHAmount,18),f=await l.getAddress(),p=yt[At].steth,g=yt[At].withdrawler,b=new it(p,to,l),A=r.selectedOutputPipe,x=Object.keys(c).find(S=>c[S].i===parseInt(A)),I=c[x],C=await a();if(C<h){j.emit("spinner","stETH allowance: "+C+" approving "+h);const S=parseInt(h),K=S+S*1e-4;await(await b.getFunction("approve").call(f,g,K.toString())).wait(),await $i(1)}C<h&&(await $i(.5),await o(),await $i(.5)),j.emit("spinner","swapping. "+C+" sufficient for: "+h),await(await i.deposit(l,h,I.addr)).wait(),await o();const U=t().success;s({success:{...U,userDeposit:"Deposit successful: "+be(h)+" stETH"}})}catch(l){const h=t().errors;s({errors:{...h,userDeposit:l}}),j.emit("ERROR",l)}},async changeOutput(n){const{provider:r,inputs:i,lidontWeb3API:o,RELOAD:a}=t();try{const c=await r.getSigner(),l=await c.getAddress();j.emit("spinner","changing output pipe: "+n),await(await o.changeOutput(c,n)).wait(),await a();const f=t().success;s({success:{...f,changeOutput:"Changed Output"}})}catch(c){const l=t().errors;s({errors:{...l,changeOutput:c}}),j.emit("ERROR",c)}},async getDataForPipe(n){const{provider:r}=t(),i=await r.getSigner(),o=new it(n,eo,i),a=await o.bondValue(),c=await o.totalStake(),l=await o.temp(),h=await o.dust();return{bondValue:a,totalStake:c,temp:l,dust:h}},async getStakesForPipe(n){const{provider:r}=t(),i=await r.getSigner(),o=await i.getAddress(),c=await new it(n,eo,i).getFunction("stakes").call(o,i);return{stakesRaw:c,amount:c[0],bondValue:c[1]}},async unstakeForPipe(n,r){const{provider:i,lidontWeb3API:o,RELOAD:a}=t(),c=await i.getSigner(),l=await c.getAddress();let h;n==="0x4B3E65104805A303c274f078127D5a7E9F9b47b2"&&(h=new it(n,eo,c)),n==="0x6Af9BB9Cf7307AC439cc7E37859bdD844874ebc1"&&(h=new it(n,_l,c)),j.emit("spinner","claiming emission rewards"),await(await h.getFunction("unstake").call(l,r)).wait(),await a()},async previewUnstake(n,r){const{provider:i,lidontWeb3API:o}=t(),a=await i.getSigner(),c=await a.getAddress();let l;n==="0x4B3E65104805A303c274f078127D5a7E9F9b47b2"&&(l=new it(n,eo,a)),n==="0x6Af9BB9Cf7307AC439cc7E37859bdD844874ebc1"&&(l=new it(n,_l,a)),j.emit("spinner","...getting emissions for: "+r);try{const h=await l.previewUnstake.staticCall(c,r);return console.log(h),h}catch(h){return console.log(h),j.emit("ERROR",h),null}},async rocketSwapStaticOptimiseSwapTo(n){const{provider:r,lidontWeb3API:i}=t(),o=await r.getSigner(),a=await o.getAddress(),c=new it(yt[At].rocketSwapRouter,Em,o);j.emit("spinner","calling rocketSwap: "+n.toString());try{return await c.optimiseSwapTo.staticCall(n,10,{from:a})}catch(l){return console.log(l),j.emit("ERROR",l),null}},async getDepositEvents(){const{provider:n,lidontWeb3API:r}=t();await(await n.getSigner()).getAddress();const o=await r.getEventsDEPOSIT(),a=Object.assign({});for(const c of o){const l=c.args[0].toLowerCase(),h=c.args[1];a[l]=a[l]||{},a[l].deposits=a[l].deposits||[],a[l].depositTotalAmount=a[l].depositTotalAmount||0n,a[l].deposits.push({block:c.blockNumber,txhash:c.transactionHash,address:l,amount:h}),a[l].depositTotalAmount=a[l].depositTotalAmount+h}return s({addrToDeposits:a}),o},async getWithdrawEvents(){const{provider:n,lidontWeb3API:r,depositEvents:i}=t(),o=await n.getSigner();await o.getAddress();const a=yt[At].unsteth,c=new it(a,Jl,o),l=await r.getEventsWITHDRAWALREQUEST();s({withdrawEvents:l});const h=Object.assign({});for(const f of l){const p=f.args[0].toArray(),g=f.args[1].toArray(),b=f.args[2].toArray(),A=await c.getWithdrawalStatus(p);p.forEach((x,I)=>{const C=g[I].toLowerCase(),O=A[I];h[C]=h[C]||{},h[C].amounts=h[C].amounts||{total:0n,unfinalized:0n,finalized:0n,claimed:0n};const U={requestId:x,amount:b[I],amountOfStETH:A[I][0],amountOfShares:A[I][1],owner:A[I][2],timestamp:A[I][3],isFinalized:A[I][4],isClaimed:A[I][5],statusRaw:O};h[C].allRequestIds=h[C].allRequestIds||{},h[C].allRequestIds[x]=U,h[C].amounts.total=h[C].amounts.total+U.amount,U.isFinalized||(h[C].unfinalized=h[C].unfinalized||{},h[C].unfinalized[x]=U,h[C].amounts.unfinalized=h[C].amounts.unfinalized+U.amount),U.isFinalized&&!U.isClaimed&&(h[C].finalized=h[C].finalized||{},h[C].finalized[x]=U,h[C].amounts.finalized=h[C].amounts.finalized+U.amount),U.isFinalized&&U.isClaimed&&(h[C].claimed=h[C].claimed||{},h[C].claimed[x]=U,h[C].amounts.claimed=h[C].amounts.claimed+U.amount)})}s({addrToRequestIds:h})},async getCheckpointHints(n){const{provider:r}=t(),i=yt[At].unsteth,o=await r.getSigner(),a=new it(i,Jl,o),c=1n,l=await a.getLastCheckpointIndex();return await a.findCheckpointHints(n,c,l)},async initiateWithdrawal(){const{provider:n,addrToDeposits:r,addrToRequestIds:i,lidontWeb3API:o}=t(),a=await n.getSigner();j.emit("msg","initiating withdrawal");try{const c=[];Object.keys(r).forEach(f=>{const p=f.toLowerCase(),g=i[p];if(!g){c.push(p);return}if(g){const b=r[p].depositTotalAmount,A=i[p];if(b>A.amounts.total){c.push(p);return}}}),console.log(c),await(await o.initiateWithdrawal(a,c)).wait(),await $i(.3);const h=t().success;s({success:{...h,initWithdraw:"Withdrawing for # of Addresses: "+c.length}})}catch(c){const l=t().errors;s({errors:{...l,initWithdraw:c}}),j.emit("ERROR",c)}},async assembleFinalizationBatch(){const{addrToRequestIds:n}=t();j.emit("msg","assemble next batch for withdrawal");const r=[],i=[];return Object.keys(n).forEach(o=>{const a=o.toLowerCase(),c=n[a];c.finalized&&Object.keys(c.finalized).forEach(l=>{const h=c.finalized[l];h.isFinalized&&(r.push(a),i.push(h.requestId))})}),console.log(r,i),r.length>32&&(r.length=32,i.length=32),{depositors:r,requestIds:i}},async finalizeWithdrawal(){const{provider:n,inputs:r,lidontWeb3API:i,getCheckpointHints:o,assembleFinalizationBatch:a,errors:c,success:l}=t();try{const h=await n.getSigner(),f=await a();j.emit("msg","getting hints...");const p=await o(f.requestIds);j.emit("msg","finalizing withdrawal"),await i.finaliseWithdrawal(h,f.depositors,p.toArray());const g=t().success;s({success:{...g,finalizeWithdraw:"finalizing withdrawal for # of requests: "+p.length}})}catch(h){const f=t().errors;s({errors:{...f,finalizeWithdraw:h}}),j.emit("ERROR",h)}},async claimWithdrawal(){const{provider:n,rocketSwapStaticOptimiseSwapTo:r,lidontWeb3API:i,getNextClaim:o,getCheckpointHints:a,assembleFinalizationBatch:c}=t(),l=await n.getSigner();j.emit("msg","claiming");const h=await o(),f=h[3],p=Tr.defaultAbiCoder();let g=[];if(f==="0x4B3E65104805A303c274f078127D5a7E9F9b47b2"&&(console.log("ETH claim strategy"),g="0x"),f==="0x6Af9BB9Cf7307AC439cc7E37859bdD844874ebc1"){console.log("rETH claim strategy");const b=await r(h[2]);console.log(b);const A=b[0],x=b[1],I=["uint256","uint256","uint256","uint256"],C=[A[0],A[1],x,x];console.log(A,x),g=p.encode(I,C)}await i.claim(l,g)},async connectWallet(){const{address:n,loading:r,onAccountChange:i,onNetworkChange:o}=t(),{ethereum:a}=window;if(a&&!n&&!r){try{await a.request({method:"eth_requestAccounts"})}catch(g){return console.log(g)}const c=await a.request({method:"eth_accounts"}),p=(await(await t().provider.getSigner()).provider.getNetwork()).chainId;s({address:c[0]}),s({chainId:p}),a.on("accountsChanged",i),a.on("chainChanged",o),await t().updateBalance()}},async addConnectNetwork(n){const r=n||At;if(console.log("connecting to: "+r),window.ethereum)try{return console.log("check if the chain to connect to is installed"),await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:Yl(r)}]})}catch(i){if(i.code===4902)try{return await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:Yl(r),chainName:yt[r].NAME,rpcUrls:[yt[r].RPC],blockExplorerUrls:[yt[r].SCAN]}]})}catch(o){console.error(o)}console.error(i)}},async onAccountChange(n){console.log("Account Changed",n)},async onNetworkChange(n){console.log("ChainChanged")},async changeChains(n){const r=(void 0)(parseInt(n));return t().provider.send("wallet_switchEthereumChain",[{chainId:r}])==null},async signMessage(n){return await t().provider.getSigner().signMessage(n)},async updateBalance(){const{provider:n,address:r}=t();await n.getSigner();const i=await n.getBalance(r);s({balance:i});const o=be(i);return s({balanceFormatted:o}),{balance:i,balanceFormatted:o}},async updateErc20Balance(n){let r,i;try{r=await t().provider.getSigner(),i=await r.getAddress()}catch(l){return console.log(l)}const o=await t().getTokenDetails(n),a=t().balances;a[n]=o,s({balances:a});const c=t().balancesBySymbol;return c[o.symbol]=o,s({balancesBySymbol:c}),o},async getTokenDetails(n){const{provider:r}=t();if(!Ep(n))throw"Invalid tokenAddr";const i=await r.getSigner(),o=new it(n,to,r),a=await i.getAddress(),[c,l,h,f]=[await o.symbol(),await o.name(),await o.decimals(),await o.balanceOf(a)],p=await ec(f,h);return{symbol:c,name:l,decimals:h,balance:f,balanceFormatted:p}}})));window.gs=()=>{const s=Object.assign({},F.getState());delete s.provider,delete s.lidontWeb3API;for(const t in s)typeof s[t]=="function"&&delete s[t];return console.table(s),s};window.store=F;const vm=at`
<main>
<logger-radio></logger-radio>
<sub class="text-light">RC1.0</sub>
<div class="container">
    <div class="nav">
        <div class="stack">
            <button-connected class="icon flex-left pointer openMenu" naked icon data-action="openMenu">🍔</button-connected>
            <button-connect-wallet class="flex-right"></button-connect-wallet>
            <span class="flex-right force-center pill"><value-connected data-format="formatDecimals" data-path="balance"></value-connected>&nbsp; ETH</span>
        </div>
    </div>
    <div class="flex-center"><img class="logo" src="logo2.png" /></div>

    <template-errors></template-errors>

    <template-admin></template-admin>

    <hr/>
    <div class="card">
        <div class="flex flex-between">
            <span class="text-big">Deposit stETH</span>
            <div>
                <sub>Balance: <value-connected data-format="formatDecimals" data-path="balancesBySymbol.stETH.balance"></value-connected>  stETH</sub>
                <!--sub>Allowance: <value-connected data-format="formatDecimals" data-path="stETHAllowance"></value-connected> stETH</sub-->
            </div>
        </div>
        <div class="flex-center">
            <icon-comp icon="stETH"></icon-comp><p class="spin">♻️</p><icon-comp icon="lidont"></icon-comp>
        </div>
        <sub>1. Send stETH to Withdrawler:</sub>
        <hr/>
        <div class="stack flex-center">
            <input-connected class="flex-7" type="number" placeholder="stETH amount to swap" name="stETHAmount"></input-connected>
        </div>
        <br/>
        <sub>2. Choose Output Pipe & Bribes:</sub>
        <hr/>
        <select-pipes></select-pipes>
        <br/>
        <sub>3. Deposit:</sub>
        <hr/>
        <div class="stack flex-center">
            <button-deposit></button-deposit>
        </div>
        <sub><value-connected class="success" hideSpinner data-path="success.userDeposit"></value-connected></sub>
        <sub><value-connected class="error" hideSpinner data-path="errors.userDeposit"></value-connected></sub>

        <sub>After the withdraw cycle your LST is staked to earn rewards (this can take hours to days)</sub>
        
    </div>
    <template-success></template-success>
    <emoji-rain></emoji-rain>
    <hr />
    <deposit-status></deposit-status>
    <div class="card">
        <div class="flex flex-between">
            <span class="text-big">Token Output:</span>
            <sub>Balance: <value-connected data-format="formatDecimals" data-path="balancesBySymbol.LIDONT.balance"></value-connected> LIDONT</sub>
        </div>
        <div class="flex-center">
            <!--p class="spin"><icon-comp icon="lidont"></icon-comp></p-->
        </div>
        <sub>Pipes:</sub>
        <hr/>

        <list-pipes></list-pipes>

    </div>
    <hr/>
    <div>
        <div class="stack flex-around">
            <sub>Initiative by:</sub>
        </div>
        <div class="stack flex-center">
            <a href="https://dao.evmavericks.xyz/"><icon-comp large icon="evm"></icon-comp></a>
            &
            <a href="https://discord.gg/rocketpool"><icon-comp large icon="rocketlion"></icon-comp></a>
        </div>
    </div>

    <div class="flex flex-around text-light">
        <h2>save the ethereum network</h2>
    </div>
</div>
</main>
`;customElements.define("template-main",class extends HTMLElement{constructor(){super()}connectedCallback(){this.render()}attributeChangedCallback(){this.render()}render(){this.innerHTML=vm}});customElements.define("template-admin",class extends HTMLElement{constructor(){super(),this.hidden=!0}connectedCallback(){let s=null;F.subscribe(()=>{const t=F.getState();if(s!==t.withdrawEvents&&s!==t.withdrawEvents)return s=t.withdrawEvents,this.render()}),j.on("ADMIN",()=>{this.hidden=!this.hidden,this.render()}),this.render()}attributeChangedCallback(){this.render()}render(){if(this.hidden)return this.innerHTML="";this.innerHTML=at`
      <section>
        <hr/>
        <div class="card">
            <div class="box">
            <div class="rainbow-bg"></div>
            </div>
            <div class="flex flex-between">
                <!--span class="text-big">Attack</span-->
                <div>
                    <sub>Public Vampire Attack Functions</sub>
                </div>
            </div>
            <sub></sub>
            <div class="stack flex-center">
                <button-connected large class="flex-center" data-action="initiateWithdrawal">1: pre-lido: Init Withdraw</button-connected>
            </div>
            <sub><value-connected class="success" hideSpinner data-path="success.initWithdraw"></value-connected></sub>
            <sub><value-connected class="error" hideSpinner data-path="errors.initWithdraw"></value-connected></sub>

            <div class="stack flex-center">
                <button-connected large class="flex-center" data-action="finalizeWithdrawal">2: post-lido: Finalize Batch</button-connected>
            </div>
            <sub><value-connected class="success" hideSpinner data-path="success.finalizeWithdraw"></value-connected></sub>
            <sub><value-connected class="error" hideSpinner data-path="errors.finalizeWithdraw"></value-connected></sub>

            <div class="stack flex-center">
                <button-connected large class="flex-center" data-action="claimWithdrawal">3: Claim</button-connected>
            </div>
        
        </div>
    </section>
      `}});customElements.define("template-error",class extends HTMLElement{constructor(){super(),this.hidden=!0}connectedCallback(){j.on("ERROR",s=>{this.render(s)})}render(s){console.log(s),this.innerHTML=at`
      <section>
        <hr/> ERROR:
    </section>
      `}});customElements.define("template-success",class extends HTMLElement{constructor(){super(),this.hidden=!0}connectedCallback(){j.on("SUCCESS",s=>{this.render(s)})}render(s){console.log(s),this.innerHTML=at`
      <section>
        <hr/>
    </section>
      `}});customElements.define("deposit-status",class extends HTMLElement{constructor(){super(),this.hidden=!1}connectedCallback(){this.render()}attributeChangedCallback(){this.render()}render(){if(this.hidden)return this.innerHTML="";this.innerHTML=at`
      <section>
        <hr/>
        <div class="card">
        <div class="flex flex-between">
            <span class="text-big">Your Deposits:</span>
        </div>
        <div class="flex-center">
            <p class="spin"><icon-comp icon="lidont"></icon-comp></p>
        </div>
        <hr/>
        <list-deposits></list-deposits>
        </div>
    </section>
      `}});customElements.define("icon-comp",class extends HTMLElement{constructor(){super();const s=this.getAttribute("icon"),t=this.getAttribute("large")===""||this.getAttribute("large")===!0;let e="";(s==="ETH"||s==="0")&&(e="/icons/eth.png"),(s==="rETH"||s==="1")&&(e="data:image/webp;base64,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"),s==="stETH"&&(e="/icons/steth.png"),s==="lidont"&&(e="/icons/lidont_coin.png"),s==="evm"&&(e="/icons/logo_evm.png"),s==="rocketlion"&&(e="/icons/logo_rocketlion.png"),this.innerHTML=at`<img class="img-icon ${t?"icon--large":""}" src="${e}"/>`}});customElements.define("input-connected",class extends HTMLElement{constructor(){super();const s=this.getAttribute("name"),t=this.getAttribute("type"),e=this.getAttribute("debounceAction");this.debounce=()=>{},e&&(this.debounce=ym(F.getState()[e])),t==="number"&&this.addEventListener("keyup",n=>{const r=Object.assign({},F.getState().inputs);r[s]=n.target.value,F.setState({inputs:r}),this.debounce()}),t==="checkbox"&&this.addEventListener("change",function(){const n=F.getState().inputs[s],r=Object.assign({},F.getState().inputs);r[s]=!n,F.setState({inputs:r})}),t==="radio"&&this.addEventListener("change",function(n){const r=Object.assign({},F.getState().inputs);r[s]=n.target.id,F.setState({inputs:r}),this.render(F.getState())})}connectedCallback(){this.render(F.getState())}attributeChangedCallback(){this.render(F.getState())}render(s){const t=this.getAttribute("name"),e=this.getAttribute("type"),n=this.getAttribute("icon"),r=this.getAttribute("id"),i=this.getAttribute("label"),o=this.getAttribute("placeholder"),a=s.inputs.selectedOutputPipe;n!==""&&(this.innerHTML=at`
    <div>
      <input 
        ${r?`id=${r}`:""} 
        ${t?`name=${t}`:""} 
        ${e?`type=${e}`:""} 
        ${o?`placeholder=${JSON.stringify(o)}`:""}
        ${a===this.id?"checked":""}
      />
      ${i?`<sub>${i}</sub>`:""}
    </div>`),n===""&&(document.querySelectorAll("icon-comp.radio--icon--selected").forEach(c=>{c.classList.remove("radio--icon--selected")}),this.innerHTML=at`
    <div>
      <input 
        class="radio--icon--input"
        ${r?`id=${r}`:""} 
        ${t?`name=${t}`:""} 
        ${e?`type=${e}`:""} 
        ${a===this.id?"checked":""}
      />
      <icon-comp large class="radio--icon ${a===this.id?"radio--icon--selected":""}" icon="${this.id}"></icon-comp>
      <div class="flex-center">${i?`<sub>${i}</sub>`:""}</div>
    </div>`)}});customElements.define("value-connected",class extends HTMLElement{constructor(){super();const s=this.getAttribute("data-path");let t=null;F.subscribe(()=>{const e=F.getState();if(!s)return;const n=Object.byString(e,s);//!
const r=t===n;if(!r&&!r)return t=n,this.render(n)})}render(s){let t="div";const e=this.getAttribute("data-node"),n=this.getAttribute("hideSpinner");e&&(t=e);const r=this.getAttribute("data-format"),i=s!==void 0;this.innerHTML=`${i?r?`<${t}>${this.formatter(r)(s)}</${t}>`:`<${t}>${s}</${t}>`:n===""?"":'<div class="spinner"/>'}`,t==="rainbow"&&po()}formatter(s){return{toFixed:e=>parseFloat(e).toFixed(3),formatDecimals:e=>parseFloat(ec(e,18)).toFixed(3)}[s]}connectedCallback(){this.render()}attributeChangedCallback(){this.render()}});customElements.define("button-connected",class extends HTMLElement{constructor(){super();const s=this.getAttribute("large"),t=this.getAttribute("disabled"),e=this.getAttribute("icon");this.getAttribute("naked")===""?this.innerHTML=this.innerText:this.innerHTML=at`<button class="button ${s===""?"button--large":""} ${e===""?"button--icon":""} ${t===""||t?"disabled":""}"><span class="force-center">${this.innerText}</span></button>`;const r=this.getAttribute("data-action"),i=this.getAttribute("data-id");r&&this.addEventListener("click",async o=>{o.preventDefault();const a=F.getState();a[r]&&(console.log(i),i&&i!==""&&await a[r](i),(!i||i==="")&&await a[r]())},!1)}});customElements.define("button-connect-wallet",class extends HTMLElement{constructor(){super();let s=null;F.subscribe(()=>{const t=F.getState();if(s!==t.address&&s!==t.address)return s=t.address,this.render(t.address)})}render(s){this.innerHTML=at`
        <button-connected data-action="INIT">${s?wm(s):"Connect"}</button-connected>
      `}connectedCallback(){this.render()}attributeChangedCallback(){this.render()}});customElements.define("button-deposit",class extends HTMLElement{constructor(){super()}connectedCallback(){this.prevValue={},F.subscribe(()=>{const s=F.getState();if(!Or(this.prevValue,s.inputs)&&!Or(this.prevValue,s.inputs))return this.prevValue=F.getState().inputs,this.render()}),this.render()}render(){const s=F.getState(),t=s.inputs&&s.inputs.selectedOutputPipe,e=s.inputs&&s.inputs.stETHAmount;if(console.log("rerender btn"),!e||!t||parseFloat(e)<=0)return this.innerHTML=at`
        <button-connected disabled large icon class="disabled vampire--off flex-center" data-action="deposit">🧛</button-connected>
      `;this.innerHTML=at`
      <button-connected large icon class="vampire flex-center" data-action="deposit">🧛</button-connected>
    `}attributeChangedCallback(){this.render()}});customElements.define("button-unstake",class extends HTMLElement{constructor(){super();const s=this.getAttribute("pipeAddr"),t=this.getAttribute("amount");this.innerHTML=at`<button class="button"><span class="force-center">${this.innerText}</span></button>`,this.addEventListener("click",async e=>{e.preventDefault();const{unstakeForPipe:n}=F.getState();await n(s,t)})}});customElements.define("select-pipes",class extends HTMLElement{constructor(){super()}connectedCallback(){this.prevValue={},F.subscribe(()=>{const{outputPipes:s}=F.getState();if(!Or(this.prevValue,s)&&!Or(this.prevValue,s))return this.prevValue=s,this.render()}),this.render()}attributeChangedCallback(){this.render()}render(){const{outputPipes:s}=F.getState();if(rf(s))return this.innerHTML="<div class='spinner'></div>";const t=Object.values(s);console.log("rerender select"),this.innerHTML=`
    <div class="stack flex-center">
    ${t.map((e,n)=>(console.log(e),at`
        <input-connected class="flex-center radio" icon label="${n===0?"ETH":"rETH"}"  id="${n}" type="radio" name="selectedOutputPipe"></input-connected>
      `.trim())).join("")}
    </div>
    `}});const Cm={0:"ETH",1:"rETH"};customElements.define("list-pipes",class extends HTMLElement{constructor(){super()}connectedCallback(){this.prevValue={},F.subscribe(()=>{const{outputPipes:s}=F.getState();if(!Or(this.prevValue,s)&&!Or(this.prevValue,s)){this.prevValue=s,this.render(),po();return}}),this.render(),po()}attributeChangedCallback(){this.render(),po()}render(){const{outputPipes:s}=F.getState();if(rf(s))return this.innerHTML="<div class='spinner'></div>";const t=Object.values(s);console.log("rerender pipes"),this.innerHTML=`
    <div>
      ${t.map((e,n)=>{console.log(e);let r=Cm[n];return at`
        <div class="flex">
        <div class="flex stack col flex-between">
          <div class="flex stack row">
            <sub>[${n}]</sub>
            <icon-comp class="radio--icon radio--icon--selected--permanent" icon="${n}"></icon-comp>
          </div>
          <sub>${be(e.stakes.amount)} ${r}</sub>
          <sub>bond: ${be(e.stakes.bondValue)}</sub>
          <div class="flex flex-around row">
            <button-unstake pipeAddr="${e.addr}" amount="${e.stakes.amount}">Unstake</button-unstake>
            <button-connected class="flex-right" data-id="${e.addr}" data-action="changeOutput">Set ${r} as Output Pipe*</button-connected>
            </div>  
          <!--button-connected class="flex-right" data-id="${e.addr}" data-action="staticUnstakeForPipe">update</button-connected-->
        </div>
        </div>
        <br/>
        <div style="display: flex; flex-direction: row-reverse;">
          ${e.claimable[0]?"<sub></sub>":`<sub>Claimable: <rainbow>${parseFloat(be(e.claimable)).toFixed(3)} Lidont</rainbow></sub>`}
          ${e.claimable[0]?`<sub>Claimable: <rainbow>${parseFloat(be(e.claimable[0])).toFixed(3)} Lidont</rainbow></sub>`:"<sub></sub>"}
          ${e.claimable[1]?`<sub>other: ${parseFloat(be(e.claimable[1])).toFixed(3)}"</sub>`:"<sub></sub>"}
        </div>
        <hr/>
        `.trim()}).join("")}
      <sup>* Hint: Changing Pipes can be done before a Claim - (if changed your mind, unstuck funds from an old pipe, etc.)</sup>
    </div>
    `}});customElements.define("list-deposits",class extends HTMLElement{constructor(){super()}connectedCallback(){let s=null;F.subscribe(()=>{const t=F.getState(),e=t.address,r=t.addrToRequestIds[e];if(s!==r&&s!==r)return s=r,this.render(r)}),this.render()}attributeChangedCallback(){this.render()}render(s){if(!s||s.length===0)return this.innerHTML="<div class='spinner'></div>";const t=Object.keys(s.allRequestIds);this.innerHTML=`
    <div>
    <sub class="flex flex-right">Total Queued: ${s.amounts&&be(s.amounts.unfinalized)} ETH </sub>
    <hr/>
      ${t.map((e,n)=>{const r=s.allRequestIds[e];return console.log(e,r,s),at`
          <div class="stack row flex-between">
          <sub>${e} - ${be(r.amount)} ETH</sub>

          ${s.claimed&&s.claimed[e]?'<sub class="flex-right">🎯 claimed 🎯</sub>':""}
          ${s.unfinalized&&s.unfinalized[e]?'<sub class="flex-right">⚡ unfinalized ⚡</sub>':""}

          </div>
        `.trim()}).join("")}
      <hr/>
      <sub class="flex flex-right">Total Claimed: ${s.amounts&&be(s.amounts.claimed)} ETH </sub>
    </div>
    `}});customElements.define("logger-radio",class extends HTMLElement{constructor(){super()}connectedCallback(){j.on("msg",s=>{this.render(s,!1)}),j.on("err",s=>{this.render(s,!0)}),j.on("spinner",s=>{this.render(s,!1,!0)})}render(s,t=!1,e=!1){this.innerHTML=at`
    <div class="stack col">
      <div>${e?'<div class="spinner float-r"></div>':""}</div>
      <sub>${s}</sub>
    <div/>`}});function Im(s,t,e,n,r){var i=document.getElementById("animateEmoji"),o=this;this.x=s,this.y=t,this.color=e,this.v=n,this.range=r,this.element=document.createElement("span"),this.element.style.opacity=0,this.element.style.position="absolute",this.element.style.fontSize="26px",this.element.style.color="hsl("+(Math.random()*360|0)+",80%,50%)",this.element.innerHTML=e,i.appendChild(this.element),this.update=function(a){o.y>800&&(o.y=80+Math.random()*4,o.x=o.range[0]+Math.random()*o.range[1]),o.y+=o.v.y,o.x+=o.v.x,this.element.style.opacity=.77,this.element.style.transform="translate3d("+o.x+"px, "+o.y+"px, 0px)",this.element.style.webkitTransform="translate3d("+o.x+"px, "+o.y+"px, 0px)",this.element.style.mozTransform="translate3d("+o.x+"px, "+o.y+"px, 0px)"}}customElements.define("emoji-rain",class extends HTMLElement{constructor(){super(),this.render()}render(s){this.innerHTML=at`
      <div id="containerEmoji">
        <div id="animateEmoji"></div>
      </div>
    `}connectedCallback(){this.render(),j.on("RAIN",this.letItRain)}letItRain(){setTimeout(()=>{var s=["💰","💎","🏴‍☠️","⚔️","🔓","💴","💶","🪙"],t=[];function e(i,o,a){setTimeout(function(){var c=new Im(o[0]+Math.random()*o[1],80+Math.random()*4,a,{x:-.15+Math.random()*.3,y:1+Math.random()*1},o);t.push(c)},i)}for(var n=0;n<10;n++)e(n*150,[10,300],s[Math.floor(Math.random()*s.length)]),e(n*160,[10,-300],s[Math.floor(Math.random()*s.length)]),e(n*170,[-190,-300],s[Math.floor(Math.random()*s.length)]),e(n*180,[210,300],s[Math.floor(Math.random()*s.length)]),e(n*190,[-390,-300],s[Math.floor(Math.random()*s.length)]),e(n*250,[410,300],s[Math.floor(Math.random()*s.length)]),e(n*260,[-590,-300],s[Math.floor(Math.random()*s.length)]),e(n*270,[610,300],s[Math.floor(Math.random()*s.length)]);function r(i){for(var o in t)t[o].update(i);requestAnimationFrame(r)}r()},500)}});window.DEBUG=!0;window.RADIO=j;window.DEBUG&&console.log("DEBUG MODE");window.RADIO.emit("msg","App Init!");async function Nm(){const s=F.getState();await s.INIT(),await s.getAllOutputPipes()}try{Nm()}catch(s){console.log(s)}
